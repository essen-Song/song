<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºè˜AI - ä¼ä¸šçº§æ™ºèƒ½æ±‚èŒå¹³å°</title>
    <style>
        /* ä¼ä¸šçº§CSSé‡ç½®å’ŒåŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* ä¼ä¸šçº§è‰²å½©ç³»ç»Ÿ */
            --primary-color: #1890ff;
            --primary-hover: #40a9ff;
            --success-color: #52c41a;
            --warning-color: #faad14;
            --error-color: #f5222d;
            --info-color: #722ed1;
            --text-primary: #262626;
            --text-secondary: #595959;
            --text-tertiary: #8c8c8c;
            --border-color: #d9d9d9;
            --background-color: #f5f5f5;
            --card-background: #ffffff;
            --header-height: 64px;
            --sidebar-width: 240px;
            --border-radius: 6px;
            --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            --box-shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background-color: var(--background-color);
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
        }

        /* ä¼ä¸šçº§å¤´éƒ¨å¯¼èˆª */
        .header {
            height: var(--header-height);
            background: var(--card-background);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--primary-color);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }



        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-container {
            margin-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
            display: flex;
        }

        .sidebar {
            width: var(--sidebar-width);
            background: var(--card-background);
            border-right: 1px solid var(--border-color);
            position: fixed;
            top: var(--header-height);
            bottom: 0;
            left: 0;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-menu {
            list-style: none;
            flex: 1;
            padding: 0;
        }

        .sidebar-item {
            padding: 14px 24px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            border-left: 3px solid transparent;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .sidebar-item:hover, .sidebar-item.active {
            color: var(--primary-color);
            background: rgba(24, 144, 255, 0.06);
            border-left-color: var(--primary-color);
        }

        .sidebar-item .icon {
            width: 20px;
            text-align: center;
            font-size: 16px;
        }

        .sidebar-footer {
            padding: 20px 24px;
            border-top: 1px solid var(--border-color);
            background: var(--background-color);
        }

        .content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 24px;
        }

        /* ä¼ä¸šçº§å¡ç‰‡è®¾è®¡ */
        .card {
            background: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .card:hover {
            box-shadow: var(--box-shadow-hover);
        }

        .card-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-body {
            padding: 24px;
        }

        /* ä¼ä¸šçº§è¡¨å•æ§ä»¶ */
        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 14px;
            transition: all 0.3s;
            background: var(--card-background);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        /* ä¼ä¸šçº§æŒ‰é’® */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 8px 16px;
            border: 1px solid transparent;
            border-radius: var(--border-radius);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            border-color: var(--primary-hover);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-secondary);
            border-color: var(--border-color);
        }

        .btn-secondary:hover {
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .btn-danger {
            background: #ff4d4f;
            color: white;
            border-color: #ff4d4f;
        }

        .btn-danger:hover {
            background: #ff7875;
            border-color: #ff7875;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        /* çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .status {
            display: inline-flex;
            align-items: center;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-success {
            background: rgba(82, 196, 26, 0.1);
            color: var(--success-color);
        }

        .status-warning {
            background: rgba(250, 173, 20, 0.1);
            color: var(--warning-color);
        }

        .status-error {
            background: rgba(245, 34, 45, 0.1);
            color: var(--error-color);
        }

        /* æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ */
        .upload-area {
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            padding: 40px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }

        .upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(24, 144, 255, 0.02);
        }

        .upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(24, 144, 255, 0.06);
        }

        .upload-icon {
            font-size: 48px;
            color: var(--text-tertiary);
            margin-bottom: 16px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin: 16px 0;
        }

        .metric-card {
            background: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 16px;
            text-align: center;
        }

        .metric-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .metric-label {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å ä½å†…å®¹æ ·å¼ */
        .placeholder-content {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .placeholder-icon {
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0.7;
        }

        .placeholder-content h3 {
            font-size: 24px;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .placeholder-content p {
            font-size: 16px;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto 40px;
        }

        .placeholder-features {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 120px;
        }

        .feature-icon {
            font-size: 32px;
            opacity: 0.8;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .content {
                margin-left: 0;
            }
            
            .row {
                grid-template-columns: 1fr;
            }
        }

        /* ä¸“ä¸šçš„æ•°æ®è¡¨æ ¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background: rgba(0, 0, 0, 0.02);
            font-weight: 600;
            color: var(--text-secondary);
        }

        .data-table tr:hover {
            background: rgba(24, 144, 255, 0.02);
        }

        /* ä¸“ä¸šçš„åˆ†é¡µå™¨ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 24px;
        }

        .page-item {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s;
        }

        .page-item.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .page-item:hover:not(.active) {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        /* é€šçŸ¥æ ·å¼ */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 99999;
            min-width: 300px;
            border-left: 4px solid #1890ff;
            pointer-events: auto;
        }
        .notification-success { border-left-color: #52c41a; }
        .notification-warning { border-left-color: #faad14; }
        .notification-error { border-left-color: #f5222d; }
        .notification-content {
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            margin-left: auto;
            padding: 0 4px;
            pointer-events: auto;
        }
        .notification-close:hover {
            color: #f5222d;
        }
        
        /* ç¡®ä¿é¡µé¢éƒ¨åˆ†é»˜è®¤éšè— */
        .page-section {
            display: none;
        }
    </style>
</head>
<body style="visibility: hidden;">
    <!-- ä¼ä¸šçº§å¤´éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="logo">
            <div class="logo-icon">æ™º</div>
            <span>æ™ºè˜AI</span>
        </div>
        
        <div class="user-info">
            <div>ç®¡ç†å‘˜</div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-container">
        <!-- ä¾§è¾¹æ èœå• -->
        <aside class="sidebar">
            <ul class="sidebar-menu">
                <li class="sidebar-item">
                    <span class="icon">ğŸ </span>
                    é¦–é¡µ
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ“</span>
                    ç®€å†ç®¡ç†
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ“„</span>
                    ç®€å†ä¼˜åŒ–
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ¯</span>
                    èŒä½åŒ¹é…
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ“¤</span>
                    æ™ºèƒ½æŠ•é€’
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ¤</span>
                    é¢è¯•æ•™ç»ƒ
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ¯</span>
                    è§†é¢‘é¢è¯•
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ“Š</span>
                    æ•°æ®åˆ†æ
                </li>
                <li class="sidebar-item">
                    <span class="icon">âš™ï¸</span>
                    æ¨¡å‹é…ç½®
                </li>
                <li class="sidebar-item">
                    <span class="icon">ğŸ”§</span>
                    ç³»ç»Ÿè®¾ç½®
                </li>
            </ul>
        </aside>

        <!-- ä¸»è¦å†…å®¹ -->
        <main class="content">
            <!-- å¿«é€Ÿæ“ä½œæ¨¡å— -->
            <div id="homeSection" class="page-section">
                <div class="card">
                <div class="card-header">
                    <div class="card-title">âš¡ å¿«é€Ÿæ“ä½œ</div>
                </div>
                <div class="card-body">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); grid-template-rows: repeat(2, 1fr); gap: 16px;">
                        <button class="btn btn-primary" onclick="navigateTo('resume', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">ğŸ“„</span>
                            <span>ç®€å†ä¸Šä¼ </span>
                        </button>
                        <button class="btn btn-primary" onclick="navigateTo('jobs', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">ğŸ¯</span>
                            <span>èŒä½åŒ¹é…</span>
                        </button>
                        <button class="btn btn-primary" onclick="navigateTo('delivery', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">ğŸ“¤</span>
                            <span>æ™ºèƒ½æŠ•é€’</span>
                        </button>
                        <button class="btn btn-secondary" onclick="navigateTo('interview', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">ğŸ¤</span>
                            <span>é¢è¯•æ•™ç»ƒ</span>
                        </button>
                        <button class="btn btn-secondary" onclick="navigateTo('analytics', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">ğŸ“ˆ</span>
                            <span>æ•°æ®åˆ†æ</span>
                        </button>
                        <button class="btn btn-secondary" onclick="navigateTo('settings', event)" style="padding: 32px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 8px; font-size: 16px;">
                            <span style="font-size: 24px;">âš™ï¸</span>
                            <span>ç³»ç»Ÿè®¾ç½®</span>
                        </button>
                    </div>
                </div>
            </div>
            </div>


            <!-- èŒä½åŒ¹é…é¡µé¢ -->
            <div id="jobsSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ” æ™ºèƒ½èŒä½åŒ¹é…</h2>
                        <p>åŸºäºAIç®—æ³•çš„ç²¾å‡†èŒä½æ¨è</p>
                    </div>
                    <div class="card-body">
                        <!-- ç®€å†ä¸é¢è¯•é—®é¢˜åŒ¹é…åº¦åˆ†æ -->
                        <div style="margin-top: 32px;">
                            <h3 style="margin-bottom: 24px; font-size: 18px; font-weight: 600;">ç®€å†ä¸é¢è¯•é—®é¢˜åŒ¹é…åº¦åˆ†æ</h3>
                            
                            <div id="resumeAnalysisSection" style="background: rgba(24, 144, 255, 0.05); padding: 24px; border-radius: var(--border-radius);">
                                <!-- åˆ†æè®¾ç½® -->
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-bottom: 24px;">
                                    <div class="form-group">
                                        <label class="form-label">é€‰æ‹©ç®€å†</label>
                                        <select class="form-control" id="resumeForAnalysis">
                                            <option value="">è¯·é€‰æ‹©è¦åˆ†æçš„ç®€å†</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">ç›®æ ‡èŒä½</label>
                                        <input type="text" class="form-control" id="jobForAnalysis" placeholder="è¯·è¾“å…¥ç›®æ ‡èŒä½åç§°">
                                    </div>
                                </div>
                                
                                <div style="margin-bottom: 24px; text-align: center;">
                                    <button class="btn btn-primary" onclick="analyzeResumeMatch()">
                                        åˆ†æåŒ¹é…åº¦
                                    </button>
                                </div>
                                
                                <!-- åˆ†æç»“æœ -->
                                <div id="analysisResult">
                                    <div style="text-align: center; padding: 40px;">
                                        <div style="font-size: 32px; margin-bottom: 16px;">ğŸ“ˆ</div>
                                        <h4>ç®€å†ä¸é¢è¯•é—®é¢˜åŒ¹é…åº¦åˆ†æ</h4>
                                        <p style="margin-top: 8px; color: var(--text-secondary);">é€‰æ‹©ç®€å†å¹¶è¾“å…¥ç›®æ ‡èŒä½ï¼Œç³»ç»Ÿå°†æ ¹æ®æ‚¨çš„ç®€å†ä¸å¤–éƒ¨æ‹›è˜å¹³å°çš„æ•°æ®è¿›è¡ŒåŒ¹é…å’Œè¯„ä¼°</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- è¡Œä¸šç‰¹å®šé¢è¯•é—®é¢˜ -->
                        <div style="margin-top: 32px;">
                            <h3 style="margin-bottom: 24px; font-size: 18px; font-weight: 600;">è¡Œä¸šç‰¹å®šé¢è¯•é—®é¢˜</h3>
                            <div style="background: rgba(24, 144, 255, 0.05); padding: 24px; border-radius: var(--border-radius);">
                                <div class="form-group">
                                    <label class="form-label">é€‰æ‹©è¡Œä¸š</label>
                                    <select class="form-control" id="industrySelect" onchange="loadIndustryQuestions()">
                                        <option value="general">é€šç”¨èŒä½</option>
                                        <option value="tech">æŠ€æœ¯å²—ä½</option>
                                        <option value="management">ç®¡ç†å²—ä½</option>
                                        <option value="sales">é”€å”®å²—ä½</option>
                                        <option value="marketing">å¸‚åœºå²—ä½</option>
                                        <option value="finance">è´¢åŠ¡å²—ä½</option>
                                        <option value="hr">HRå²—ä½</option>
                                    </select>
                                </div>
                                <div id="industryQuestionsList" style="margin-top: 24px;">
                                    <div style="background: white; padding: 20px; border-radius: var(--border-radius);">
                                        <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">é€šç”¨é¢è¯•é—®é¢˜</h4>
                                        <ul style="list-style: none; padding: 0;">
                                            <li style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color);">
                                                <strong>1. è¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚</strong>
                                                <p style="margin-top: 8px; color: var(--text-secondary);">å»ºè®®ä»æ•™è‚²èƒŒæ™¯ã€å·¥ä½œç»éªŒã€æ ¸å¿ƒæŠ€èƒ½å’ŒèŒä¸šç›®æ ‡ç­‰æ–¹é¢è¿›è¡Œä»‹ç»ï¼Œé‡ç‚¹çªå‡ºä¸ç›®æ ‡èŒä½ç›¸å…³çš„å†…å®¹ã€‚</p>
                                            </li>
                                            <li style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color);">
                                                <strong>2. ä¸ºä»€ä¹ˆæƒ³åŠ å…¥æˆ‘ä»¬å…¬å¸ï¼Ÿ</strong>
                                                <p style="margin-top: 8px; color: var(--text-secondary);">å»ºè®®ä»å…¬å¸æ–‡åŒ–ã€ä¸šåŠ¡å‘å±•ã€ä¸ªäººèŒä¸šè§„åˆ’ç­‰æ–¹é¢è¿›è¡Œå›ç­”ï¼Œå±•ç¤ºä½ å¯¹å…¬å¸çš„äº†è§£å’Œè¯šæ„ã€‚</p>
                                            </li>
                                            <li style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color);">
                                                <strong>3. ä½ çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
                                                <p style="margin-top: 8px; color: var(--text-secondary);">ä¼˜åŠ¿è¦ä¸èŒä½è¦æ±‚ç›¸å…³ï¼ŒåŠ£åŠ¿è¦çœŸå®ä½†ä¸å½±å“æ ¸å¿ƒå·¥ä½œèƒ½åŠ›ï¼ŒåŒæ—¶è¦è¯´æ˜å¦‚ä½•æ”¹è¿›ã€‚</p>
                                            </li>
                                            <li style="margin-bottom: 16px;">
                                                <strong>4. ä½ çš„èŒä¸šè§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
                                                <p style="margin-top: 8px; color: var(--text-secondary);">å»ºè®®ç»“åˆå…¬å¸å‘å±•å’Œä¸ªäººæˆé•¿è¿›è¡Œå›ç­”ï¼Œå±•ç¤ºä½ å¯¹æœªæ¥çš„æ¸…æ™°è§„åˆ’å’Œé•¿æœŸå‘å±•æ„æ„¿ã€‚</p>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç®€å†ä¼˜åŒ–é¡µé¢ -->
            <div id="resumeSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“„ ç®€å†ä¼˜åŒ–</h2>
                        <p>AIé©±åŠ¨çš„ç®€å†æ™ºèƒ½ä¼˜åŒ–ç³»ç»Ÿ</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">é€‰æ‹©ç®€å†</label>
                            <select class="form-control" id="resumeSelector" onchange="autoFillJobDescription()">
                                <option value="">è¯·é€‰æ‹©è¦ä¼˜åŒ–çš„ç®€å†</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ç›®æ ‡èŒä½æè¿°</label>
                            <textarea class="form-control" id="jobDescription" placeholder="è¯·è¾“å…¥è¯¦ç»†çš„èŒä½æè¿°ï¼ŒåŒ…æ‹¬å²—ä½èŒè´£ã€ä»»èŒè¦æ±‚ã€æŠ€èƒ½è¦æ±‚ç­‰..."></textarea>
                        </div>
                        
                        <div style="display: flex; gap: 12px; margin: 24px 0;">
                            <button class="btn btn-primary" id="optimizeBtn" onclick="optimizeResume()">
                                å¼€å§‹ä¼˜åŒ–åˆ†æ
                            </button>
                            <button class="btn btn-secondary" onclick="refreshResumes()">
                                åˆ·æ–°ç®€å†åˆ—è¡¨
                            </button>
                            <button class="btn btn-secondary" onclick="clearOptimization()">
                                é‡ç½®
                            </button>
                        </div>
                        
                        <div id="optimizeResult" style="display: none; margin-top: 24px;">
                            <h4 style="margin-bottom: 16px;">ä¼˜åŒ–å»ºè®®</h4>
                            <div id="optimizeContent"></div>
                        </div>
                        
                        <div style="margin-top: 24px;">
                            <div class="placeholder-content">
                                <div class="placeholder-icon">ğŸ¤–</div>
                                <h3>AIç®€å†ä¼˜åŒ–ç³»ç»Ÿ</h3>
                                <p>è¾“å…¥ç›®æ ‡èŒä½æè¿°ï¼Œç³»ç»Ÿå°†ä½¿ç”¨AIåˆ†ææ‚¨çš„ç®€å†ä¸èŒä½è¦æ±‚çš„åŒ¹é…åº¦ï¼Œå¹¶æä¾›é’ˆå¯¹æ€§çš„ä¼˜åŒ–å»ºè®®ã€‚</p>
                                <div class="placeholder-features">
                                    <div class="feature-item">
                                        <span class="feature-icon">ğŸ¯</span>
                                        <span>ç²¾å‡†åŒ¹é…åˆ†æ</span>
                                    </div>
                                    <div class="feature-item">
                                        <span class="feature-icon">ğŸ’¡</span>
                                        <span>æ™ºèƒ½ä¼˜åŒ–å»ºè®®</span>
                                    </div>
                                    <div class="feature-item">
                                        <span class="feature-icon">ğŸ“ˆ</span>
                                        <span>ä¼˜åŒ–æ•ˆæœè¯„ä¼°</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ™ºèƒ½èŒä½æŠ•é€’é¡µé¢ -->
            <div id="deliverySection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>æ™ºèƒ½æŠ•é€’</h2>
                    </div>
                    <div class="card-body">
                        <!-- ç®€å†æ£€æµ‹çŠ¶æ€ -->
                        <div id="resumeCheckStatus" style="margin-bottom: 24px; padding: 16px; border-radius: var(--border-radius); background: rgba(24, 144, 255, 0.05);">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div class="loading"></div>
                                <div>
                                    <div style="font-weight: 500;">æ­£åœ¨æ£€æµ‹ç®€å†çŠ¶æ€...</div>
                                    <div id="resumeCheckMessage" style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">æ£€æŸ¥ç®€å†åº“å’Œä¸Šä¼ çŠ¶æ€</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ç›®æ ‡èŒä½</label>
                            <input type="text" class="form-control" id="targetJob" placeholder="è¯·è¾“å…¥ç›®æ ‡èŒä½åç§°ï¼Œä¾‹å¦‚ï¼šäº§å“ç»ç†ã€å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆç­‰">
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">åŸå¸‚</label>
                            <select class="form-control" id="targetCity">
                                <option value="530">åŒ—äº¬</option>
                                <option value="538">ä¸Šæµ·</option>
                                <option value="539">å¹¿å·</option>
                                <option value="540">æ·±åœ³</option>
                                <option value="585">æ­å·</option>
                                <option value="570">æˆéƒ½</option>
                                <option value="565">æ­¦æ±‰</option>
                                <option value="546">è¥¿å®‰</option>
                                <option value="551">å—äº¬</option>
                                <option value="580">é‡åº†</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">æŠ•é€’å¹³å°</label>
                            <div style="display: flex; flex-wrap: wrap; gap: 12px;">
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" data-platform="zhilian"> æ™ºè”æ‹›è˜
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" data-platform="51job"> å‰ç¨‹æ— å¿§
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" data-platform="boss"> Bossç›´è˜
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" data-platform="lagou"> æ‹‰å‹¾ç½‘
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">ä½¿ç”¨å¹³å°ç®€å†</label>
                            <div style="display: flex; gap: 16px;">
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="radio" name="usePlatformResume" value="yes" checked onchange="toggleResumeSelector()"> æ˜¯
                                </label>
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="radio" name="usePlatformResume" value="no" onchange="toggleResumeSelector()"> å¦
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">é€‰æ‹©ç®€å†</label>
                            <select class="form-control" id="resumeSelectorDelivery" onchange="resumeSelectedForDelivery()">
                                <option value="">è¯·é€‰æ‹©è¦ä½¿ç”¨çš„ç®€å†</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">æŠ•é€’é—´éš” (ä¸ª/åˆ†)</label>
                            <input type="number" class="form-control" id="deliveryInterval" value="5" min="1" max="10" step="1">
                            <small style="color: var(--text-tertiary); margin-top: 4px; display: block;">å»ºè®®è®¾ç½®ä¸º1-6ä¸ª</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">æŠ•é€’æ•°é‡</label>
                            <input type="number" class="form-control" id="deliveryCount" value="5" min="1" max="100" step="1">
                            <small style="color: var(--text-tertiary); margin-top: 4px; display: block;">æ¯ä¸ªå¹³å°æŠ•é€’çš„èŒä½æ•°é‡</small>
                        </div>
                        
                        <div style="display: flex; gap: 12px; margin: 24px 0; flex-wrap: wrap;">
                            <button class="btn btn-secondary" id="startDeliveryBtn" onclick="openWebsite()">
                                æ‰“å¼€ç½‘ç«™
                            </button>
                            <button class="btn btn-primary" id="batchDeliveryBtn" onclick="startBatchDelivery()" disabled>
                                æ‰¹é‡æŠ•é€’
                            </button>
                            <button class="btn btn-secondary" onclick="showEnterpriseBlacklist()">
                                ğŸš« ä¼ä¸šé»‘åå•
                            </button>
                            <button class="btn btn-secondary" onclick="clearDelivery()">
                                é‡ç½®
                            </button>
                        </div>
                        
                        <!-- æ‰¹é‡æŠ•é€’é…ç½® -->
                        <div id="batchDeliveryConfig" style="display: none; margin-top: 24px; padding: 16px; background: rgba(24, 144, 255, 0.05); border-radius: var(--border-radius);">
                            <h4>æ‰¹é‡æŠ•é€’é…ç½®</h4>



                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" id="autoLogin" checked> è‡ªåŠ¨ç™»å½•
                                </label>
                            </div>
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 6px;">
                                    <input type="checkbox" id="saveResults" checked> ä¿å­˜æŠ•é€’ç»“æœ
                                </label>
                            </div>
                        </div>
                        
                        <div id="deliveryResult" style="margin-top: 24px;"></div>
                        
                        <!-- å†…è”æ¡†æ¶åŒºåŸŸ -->
                        <div id="inlineFrameSection" style="display: none; margin-top: 24px;">
                            <!-- TabæŒ‰é’® -->
                            <div id="platformTabs" style="display: flex; gap: 8px; margin-bottom: 16px; border-bottom: 1px solid var(--border-color); padding-bottom: 8px;">
                                <!-- TabæŒ‰é’®å°†åŠ¨æ€ç”Ÿæˆ -->
                            </div>
                            
                            <!-- å†…è”æ¡†æ¶ -->
                            <div style="border: 1px solid var(--border-color); border-radius: var(--border-radius); overflow: hidden;">
                                <iframe id="deliveryFrame" style="width: 100%; height: 600px; border: none;"></iframe>
                            </div>
                        </div>
                        
                        <!-- æŠ•é€’è®°å½• -->
                        <div id="deliveryRecordsSection" style="margin-top: 32px; padding-top: 24px; border-top: 1px solid var(--border-color);">
                            <h3 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">ğŸ“‹ æŠ•é€’è®°å½•</h3>
                            <div id="recordsContent">
                                <div style="text-align: center; padding: 40px;">
                                    <div class="loading"></div>
                                    <p style="margin-top: 16px;">æ­£åœ¨åŠ è½½æŠ•é€’è®°å½•...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ•°æ®åˆ†æé¡µé¢ -->
            <div id="analyticsSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“ˆ æ•°æ®åˆ†æé¢æ¿</h2>
                        <p>æ±‚èŒæ•°æ®æ·±åº¦åˆ†æå’Œå¯è§†åŒ–</p>
                    </div>
                    <div class="card-body">
                        <!-- é¢è¯•ç»Ÿè®¡åˆ†æå’Œè¿›æ­¥è¿½è¸ª -->
                        <div style="margin-top: 32px;">
                            <h3 style="margin-bottom: 24px; font-size: 18px; font-weight: 600;">é¢è¯•ç»Ÿè®¡åˆ†æå’Œè¿›æ­¥è¿½è¸ª</h3>
                            
                            <div id="statisticsSection" style="background: rgba(82, 196, 26, 0.05); padding: 24px; border-radius: var(--border-radius);">
                                <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                                    <div style="background: white; padding: 16px; border-radius: var(--border-radius); text-align: center;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">æ€»é¢è¯•æ¬¡æ•°</div>
                                        <div id="totalInterviews" style="font-size: 24px; font-weight: bold; color: var(--primary-color);">0</div>
                                    </div>
                                    <div style="background: white; padding: 16px; border-radius: var(--border-radius); text-align: center;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">å¹³å‡è¯„åˆ†</div>
                                        <div id="averageScore" style="font-size: 24px; font-weight: bold; color: var(--primary-color);">0</div>
                                    </div>
                                    <div style="background: white; padding: 16px; border-radius: var(--border-radius); text-align: center;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">æ€»ç»ƒä¹ æ—¶é•¿</div>
                                        <div id="totalPracticeTime" style="font-size: 24px; font-weight: bold; color: var(--primary-color);">0åˆ†é’Ÿ</div>
                                    </div>
                                    <div style="background: white; padding: 16px; border-radius: var(--border-radius); text-align: center;">
                                        <div style="font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;">å·²å®Œæˆé—®é¢˜æ•°</div>
                                        <div id="totalQuestions" style="font-size: 24px; font-weight: bold; color: var(--primary-color);">0</div>
                                    </div>
                                </div>
                                
                                <!-- è¿›æ­¥è¶‹åŠ¿ -->
                                <div style="margin-bottom: 24px;">
                                    <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">è¿›æ­¥è¶‹åŠ¿</h4>
                                    <div id="progressTrend" style="background: white; padding: 24px; border-radius: var(--border-radius); min-height: 300px;">
                                        <div style="text-align: center; padding: 40px;">
                                            <div style="font-size: 32px; margin-bottom: 16px;">ğŸ“ˆ</div>
                                            <h4>è¿›æ­¥è¶‹åŠ¿å›¾è¡¨</h4>
                                            <p style="margin-top: 8px; color: var(--text-secondary);">å®Œæˆå¤šæ¬¡é¢è¯•åï¼Œå°†æ˜¾ç¤ºä½ çš„è¿›æ­¥è¶‹åŠ¿</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- èƒ½åŠ›é›·è¾¾å›¾ -->
                                <div>
                                    <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">ä¸ªäººé¢è¯•èƒ½åŠ›é›·è¾¾å›¾</h4>
                                    <div id="abilityRadar" style="background: white; padding: 24px; border-radius: var(--border-radius); min-height: 300px;">
                                        <div style="text-align: center; padding: 40px;">
                                            <div style="font-size: 32px; margin-bottom: 16px;">ğŸ¯</div>
                                            <h4>èƒ½åŠ›é›·è¾¾å›¾</h4>
                                            <p style="margin-top: 8px; color: var(--text-secondary);">å®Œæˆé¢è¯•åï¼Œå°†æ˜¾ç¤ºä½ çš„èƒ½åŠ›åˆ†å¸ƒ</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¼ä¸šé»‘åå•è®¾ç½®é¡µé¢ -->
            <div id="blacklistSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸš« ä¼ä¸šé»‘åå•è®¾ç½®</h2>
                        <p>ç®¡ç†ä¸å¸Œæœ›æŠ•é€’çš„ä¼ä¸šåˆ—è¡¨</p>
                    </div>
                    <div class="card-body">
                        <div class="form-group">
                            <label class="form-label">æ·»åŠ ä¼ä¸šåˆ°é»‘åå•</label>
                            <div style="display: flex; gap: 12px;">
                                <input type="text" class="form-control" id="newBlacklistCompany" placeholder="è¯·è¾“å…¥ä¼ä¸šåç§°">
                                <button class="btn btn-primary" onclick="addBlacklistCompany()">æ·»åŠ </button>
                            </div>
                        </div>
                        
                        <div class="form-group" style="margin-top: 24px;">
                            <label class="form-label">é»‘åå•ä¼ä¸šåˆ—è¡¨</label>
                            <div id="blacklistCompaniesList" style="background: rgba(245, 34, 45, 0.05); padding: 16px; border-radius: var(--border-radius); min-height: 200px;">
                                <div style="text-align: center; color: var(--text-tertiary); padding: 40px;">
                                    é»‘åå•ä¸ºç©ºï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ä¼ä¸š
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 24px; display: flex; gap: 12px;">
                            <button class="btn btn-secondary" onclick="navigateTo('delivery')">è¿”å›æ™ºèƒ½æŠ•é€’</button>
                            <button class="btn btn-secondary" onclick="clearBlacklist()">æ¸…ç©ºé»‘åå•</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- AIé¢è¯•æ•™ç»ƒé¡µé¢ -->
            <div id="interviewSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2 style="display: flex; align-items: center; gap: 12px;">
                            ğŸ¤ AIé¢è¯•æ•™ç»ƒ
                            <span onclick="showInterviewTipsModal()" style="cursor: pointer; display: inline-flex; align-items: center; gap: 2px; font-size: 12px; font-weight: 400; color: var(--primary-color); background: rgba(24, 144, 255, 0.1); padding: 2px 8px; border-radius: 12px; transform: scale(0.8); transform-origin: left center;">
                                ğŸ’¡ é¢è¯•æŠ€å·§
                            </span>
                        </h2>
                        <p>ä¸“ä¸šé¢è¯•è¾…å¯¼ä¸è¯„ä¼°ç³»ç»Ÿ</p>
                    </div>
                    <div class="card-body">

                        
                        <!-- 2. ä¸­é—´éƒ¨åˆ†ï¼šå·¦å³ä¸¤æ å¸ƒå±€ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 32px;">
                            <!-- 2.1 ä¸­é—´å·¦ä¾§ï¼šç›®æ ‡èŒä½æ–‡æœ¬æ¡† + é—®é¢˜ç±»å‹é€‰é¡¹ + ç”Ÿæˆé—®é¢˜æŒ‰é’® + é”™é¢˜å›é¡¾æŒ‰é’® -->
                            <div style="background: rgba(24, 144, 255, 0.02); padding: 24px; border-radius: var(--border-radius); border: 1px solid rgba(24, 144, 255, 0.1); display: flex; flex-direction: column;">
                                <h4 style="margin-bottom: 24px; font-size: 16px; font-weight: 600;">å¸¸è§é—®é¢˜</h4>
                                
                                <div style="display: flex; flex-direction: column; gap: 24px; flex: 1;">
                                    <div class="form-group">
                                        <label class="form-label">ç›®æ ‡èŒä½</label>
                                        <input type="text" class="form-control" id="interviewJob" placeholder="è¯·è¾“å…¥ç›®æ ‡èŒä½åç§°ï¼Œä¾‹å¦‚ï¼šäº§å“ç»ç†ã€å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆç­‰">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="form-label">é—®é¢˜ç±»å‹</label>
                                        <select class="form-control" id="questionType">
                                            <option value="technical">æŠ€æœ¯é—®é¢˜</option>
                                            <option value="behavioral">è¡Œä¸ºé—®é¢˜</option>
                                            <option value="case">æ¡ˆä¾‹é—®é¢˜</option>
                                            <option value="all">ç»¼åˆé—®é¢˜</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div style="display: flex; flex-direction: column; gap: 12px; margin-top: auto;">
                                    <button class="btn btn-primary" onclick="startInterview()">
                                        ç”Ÿæˆé—®é¢˜
                                    </button>
                                    <button class="btn btn-secondary" onclick="reviewWrongQuestions()">
                                        é”™é¢˜å›é¡¾
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 2.2 ä¸­é—´å³ä¾§ï¼šè¾“å…¥é—®é¢˜æ–‡æœ¬æ¡† + åˆ†æé—®é¢˜æŒ‰é’® -->
                            <div style="background: rgba(82, 196, 26, 0.02); padding: 24px; border-radius: var(--border-radius); border: 1px solid rgba(82, 196, 26, 0.1); display: flex; flex-direction: column;">
                                <h4 style="margin-bottom: 24px; font-size: 16px; font-weight: 600;">é—®é¢˜åˆ†æ</h4>
                                
                                <div class="form-group" style="flex: 1;">
                                    <label class="form-label">è¾“å…¥é—®é¢˜</label>
                                    <textarea class="form-control" id="customQuestion" placeholder="è¯·è¾“å…¥æ‚¨æƒ³è¦åˆ†æçš„é¢è¯•é—®é¢˜..." style="min-height: 120px; height: calc(100% - 30px);"></textarea>
                                </div>
                                
                                <div style="display: flex; flex-direction: column; gap: 12px; margin-top: auto;">
                                    <button class="btn btn-primary" onclick="analyzeCustomQuestion()" style="width: 100%;">
                                        åˆ†æé—®é¢˜
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 3. ä¸‹æ–¹ï¼šå‡†å¤‡è®¡åˆ’åŒºåŸŸ -->
                        <div id="preparationPlanSection" style="margin-top: 32px; background: rgba(82, 196, 26, 0.02); padding: 24px; border-radius: var(--border-radius); border: 1px solid rgba(82, 196, 26, 0.1);">
                            <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">é¢è¯•å‡†å¤‡è®¡åˆ’ç”Ÿæˆå™¨</h4>
                            <div style="display: flex; gap: 16px; flex-wrap: wrap;">
                                <div class="form-group" style="flex: 1; min-width: 150px;">
                                    <label class="form-label">ç›®æ ‡èŒä½</label>
                                    <input type="text" class="form-control" id="enterpriseTargetJob" placeholder="è¯·è¾“å…¥ç›®æ ‡èŒä½">
                                </div>
                                <div class="form-group" style="flex: 1; min-width: 150px;">
                                    <label class="form-label">é¢è¯•æ—¥æœŸ</label>
                                    <input type="date" class="form-control" id="enterpriseInterviewDate">
                                </div>
                                <div class="form-group" style="flex: 1; min-width: 120px;">
                                    <label class="form-label">å‡†å¤‡æ—¶é—´ï¼ˆå¤©ï¼‰</label>
                                    <input type="number" class="form-control" id="enterprisePreparationDays" value="7" min="1" max="30">
                                </div>
                                <div class="form-group" style="flex: 0 0 auto; display: flex; align-items: flex-end;">
                                    <button class="btn btn-primary" onclick="generateEnterprisePreparationPlan()" style="white-space: nowrap;">ç”Ÿæˆè®¡åˆ’</button>
                                </div>
                            </div>
                            <div id="enterprisePreparationPlanResult" style="margin-top: 24px; display: none;">
                                <div style="background: white; padding: 20px; border-radius: var(--border-radius);">
                                    <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">ä¸ªäººå®šåˆ¶å‡†å¤‡è®¡åˆ’</h4>
                                    <div id="enterprisePlanContent"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 4. ä¸‹æ–¹ï¼šæ˜¾ç¤ºç»“æœå†…å®¹ -->
                        <div id="interviewResult" style="margin-top: 32px;"></div>
                    </div>
                </div>
            </div>

            <!-- ç®€å†ç®¡ç†é¡µé¢ -->
            <div id="resumeManageSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>ğŸ“ ç®€å†ç®¡ç†</h2>
                        <p>ä¸Šä¼ ã€è§£æå’Œç®¡ç†æ‚¨çš„ç®€å†</p>
                    </div>
                    <div class="card-body">
                        <!-- ç½‘æ ¼å¸ƒå±€ -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 32px;">
                            <!-- å·¦ä¾§ï¼šç®€å†ä¸Šä¼ åŒºåŸŸ -->
                            <div>
                                <h4 style="margin-bottom: 16px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color); display: flex; align-items: center; gap: 12px;">
                                    ğŸ“„ ç®€å†ä¸Šä¼ 
                                    <span class="status status-success" style="font-size: 12px; font-weight: normal;">
                                        ç›®å‰å·²ä¸Šä¼  <span id="resumeCount">0</span> ä»½ç®€å†
                                    </span>
                                </h4>
                                <div class="form-group">
                                    <div id="uploadArea" class="upload-area">
                                        <div class="upload-icon">ğŸ“„</div>
                                        <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </p>
                                        <p style="font-size: 12px; color: var(--text-tertiary);">æ”¯æŒ PDFã€Word æ ¼å¼ï¼Œæœ€å¤§ 10MB</p>
                                        <input type="file" id="fileInput" accept=".pdf,.doc,.docx" style="display: none;" />
                                    </div>
                                </div>

                                <!-- æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º -->
                                <div id="fileInfo" style="display: none; margin: 16px 0; padding: 16px; background: rgba(24, 144, 255, 0.05); border-radius: var(--border-radius); border-left: 4px solid var(--primary-color);">
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px;">
                                        <div>
                                            <div style="font-weight: 500;" id="fileName">æ–‡ä»¶å</div>
                                            <div style="font-size: 12px; color: var(--text-secondary); margin-top: 4px;" id="fileDetails">æ–‡ä»¶è¯¦æƒ…</div>
                                        </div>
                                    </div>
                                    <div style="display: flex; gap: 12px;">
                                        <button class="btn btn-secondary" style="padding: 6px 16px; font-size: 13px;" onclick="previewFile()">
                                            ğŸ‘ï¸ é¢„è§ˆ
                                        </button>
                                        <button class="btn btn-primary" style="padding: 6px 16px; font-size: 13px;" onclick="confirmUpload()">
                                            âœ… ç¡®è®¤ä¸Šä¼ 
                                        </button>
                                        <button class="btn btn-secondary" style="padding: 6px 16px; font-size: 13px;" onclick="clearFile()">
                                            ğŸ—‘ï¸ æ¸…é™¤
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- å³ä¾§ï¼šè§£æç»“æœ -->
                            <div>
                                <h4 style="margin-bottom: 16px; padding-bottom: 8px; border-bottom: 1px solid var(--border-color);">ğŸ“Š è§£æç»“æœ</h4>
                                <div id="parseResult">
                                    <div class="placeholder-content" style="padding: 40px;">
                                        <div class="placeholder-icon">ğŸ“„</div>
                                        <h4>ç®€å†è§£æç³»ç»Ÿ</h4>
                                        <p>ä¸Šä¼ ç®€å†æ–‡ä»¶åï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è§£æç®€å†å†…å®¹å¹¶æå–å…³é”®ä¿¡æ¯ã€‚</p>
                                    </div>
                                </div>

                                <!-- è§£æç»“æœå†…å®¹ -->
                                <div id="resultContent" style="display: none;">
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; flex-wrap: wrap; gap: 12px;">
                                        <div>
                                            <h5 style="margin-bottom: 8px;">åŸºæœ¬ä¿¡æ¯</h5>
                                            <div style="font-size: 13px; color: var(--text-secondary);">
                                                <span id="resumeName">ç®€å†åç§°</span> | 
                                                <span id="resumeContact">è”ç³»æ–¹å¼</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 8px;">
                                            <div class="status status-success">
                                                è§£æå®Œæˆ
                                            </div>
                                        </div>
                                    </div>

                                    <div class="result-grid" style="margin-bottom: 20px;">
                                        <div class="metric-card">
                                            <div class="metric-value" id="qualityScore">0%</div>
                                            <div class="metric-label">è§£æè´¨é‡</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-value" id="infoCount">0</div>
                                            <div class="metric-label">ä¿¡æ¯æ•°é‡</div>
                                        </div>
                                        <div class="metric-card">
                                            <div class="metric-value" id="skillCount">0</div>
                                            <div class="metric-label">æŠ€èƒ½æ•°é‡</div>
                                        </div>
                                    </div>

                                    <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius); border-left: 4px solid var(--primary-color);">
                                        <h6 style="margin-bottom: 10px;">æ•™è‚²èƒŒæ™¯</h6>
                                        <div id="resumeEducation" style="font-size: 13px; line-height: 1.5;">æœªè¯†åˆ«</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç®€å†åˆ—è¡¨ -->
                        <div style="margin-top: 32px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                <h4 style="padding-bottom: 8px; border-bottom: 1px solid var(--border-color); flex: 1;">ğŸ“ ç®€å†åº“</h4>
                                <div style="display: flex; gap: 12px;">
                                    <span style="color: var(--text-secondary); font-size: 13px;">
                                        å…± <span id="totalResumes">0</span> ä»½ç®€å†
                                    </span>
                                </div>
                            </div>
                            <div id="resumeList" style="margin-top: 16px;">
                                <div style="text-align: center; padding: 60px;">
                                    <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                                    <h4>æš‚æ— ç®€å†</h4>
                                    <p style="margin-top: 8px; color: var(--text-secondary);">æ‚¨è¿˜æ²¡æœ‰ä¸Šä¼ ä»»ä½•ç®€å†ï¼Œå¼€å§‹ä¸Šä¼ ç®€å†å§ï¼</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç³»ç»Ÿè®¾ç½®é¡µé¢ -->
            <div id="settingsSection" class="page-section" style="display: none;">
                <div class="card">
                    <div class="card-header">
                        <h2>âš™ï¸ ç³»ç»Ÿè®¾ç½®</h2>
                        <p>ä¸ªæ€§åŒ–é…ç½®å’Œç³»ç»Ÿç®¡ç†</p>
                    </div>
                    <div class="card-body">
                        <div class="placeholder-content">
                            <div class="placeholder-icon">ğŸ”§</div>
                            <h3>ç³»ç»Ÿè®¾ç½®åŠŸèƒ½å¼€å‘ä¸­</h3>
                            <p>æˆ‘ä»¬æ­£åœ¨å®Œå–„ç³»ç»Ÿè®¾ç½®åŠŸèƒ½ï¼Œè®©æ‚¨èƒ½å¤Ÿä¸ªæ€§åŒ–é…ç½®å¹³å°çš„å„ç§å‚æ•°å’Œé€‰é¡¹ã€‚</p>
                            <div class="placeholder-features">
                                <div class="feature-item">
                                    <span class="feature-icon">ğŸ‘¤</span>
                                    <span>ä¸ªäººèµ„æ–™ç®¡ç†</span>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">ğŸ””</span>
                                    <span>é€šçŸ¥è®¾ç½®</span>
                                </div>
                                <div class="feature-item">
                                    <span class="feature-icon">ğŸ”’</span>
                                    <span>éšç§å’Œå®‰å…¨</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // ä¼ä¸šçº§JavaScripté€»è¾‘
        const API_BASE = window.location.origin;
        let currentResumeData = null;

        // é˜²æ­¢é‡å¤åˆå§‹åŒ–çš„æ ‡å¿—
        let isInitialized = false;
        
        // æŠ•é€’è®°å½•å­˜å‚¨
        let deliveryRecords = [];
        
        // ç®€å†æ•°æ®å­˜å‚¨
        let resumeData = [];
        
        // ç®€å†åˆ—è¡¨åˆ†é¡µå˜é‡
        let currentResumePage = 1;
        const resumesPerPage = 10;
        
        // æ¨¡æ‹ŸæŠ•é€’è®°å½•æ•°æ®
        function generateMockDeliveryRecords() {
            const platforms = ['æ™ºè”æ‹›è˜', 'å‰ç¨‹æ— å¿§', 'Bossç›´è˜', 'æ‹‰å‹¾ç½‘'];
            const companies = ['é˜¿é‡Œå·´å·´', 'è…¾è®¯', 'å­—èŠ‚è·³åŠ¨', 'ç™¾åº¦', 'ç¾å›¢', 'äº¬ä¸œ', 'æ‹¼å¤šå¤š', 'å°ç±³'];
            const positions = ['å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'åç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'äº§å“ç»ç†', 'UIè®¾è®¡å¸ˆ', 'æ•°æ®åˆ†æå¸ˆ', 'è¿è¥ä¸“å‘˜', 'é”€å”®ç»ç†'];
            const addresses = ['åŒ—äº¬å¸‚æµ·æ·€åŒº', 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº', 'å¹¿å·å¸‚å¤©æ²³åŒº', 'æ·±åœ³å¸‚å—å±±åŒº', 'æ­å·å¸‚è¥¿æ¹–åŒº'];
            const results = ['æˆåŠŸ', 'å¤±è´¥', 'å¾…å¤„ç†'];
            
            // ç”Ÿæˆ10æ¡æ¨¡æ‹Ÿè®°å½•
            for (let i = 0; i < 10; i++) {
                const date = new Date();
                date.setDate(date.getDate() - Math.floor(Math.random() * 30));
                date.setHours(Math.floor(Math.random() * 24));
                date.setMinutes(Math.floor(Math.random() * 60));
                
                // ä¸ºæ¯ä¸ªå…¬å¸ç”Ÿæˆå¯¹åº”çš„æ‹›è˜ä¿¡æ¯ç½‘ç»œåœ°å€
                const company = companies[Math.floor(Math.random() * companies.length)];
                const platform = platforms[Math.floor(Math.random() * platforms.length)];
                let deliveryWebsite = '';
                
                // ç”Ÿæˆéšæœºçš„æ‹›è˜ä¿¡æ¯ID
                const jobId = Math.floor(Math.random() * 9000000000) + 1000000000; // 10ä½éšæœºæ•°
                
                // æ ¹æ®å¹³å°ç”Ÿæˆå¯¹åº”çš„æ‹›è˜ä¿¡æ¯ç½‘ç»œåœ°å€
                switch(platform) {
                    case 'æ™ºè”æ‹›è˜':
                        deliveryWebsite = `https://www.zhaopin.com/jobdetail/${jobId}.htm`;
                        break;
                    case 'å‰ç¨‹æ— å¿§':
                        deliveryWebsite = `https://jobs.51job.com/beijing/${jobId}.html`;
                        break;
                    case 'Bossç›´è˜':
                        deliveryWebsite = `https://www.zhipin.com/job_detail/${jobId}.html`;
                        break;
                    case 'æ‹‰å‹¾ç½‘':
                        deliveryWebsite = `https://www.lagou.com/jobs/${jobId}.html`;
                        break;
                    default:
                        deliveryWebsite = `https://www.example.com/job/${jobId}`;
                }
                
                deliveryRecords.push({
                    id: `record-${Date.now()}-${i}`,
                    platform: platform,
                    company: company,
                    deliveryWebsite: deliveryWebsite,
                    position: positions[Math.floor(Math.random() * positions.length)],
                    address: addresses[Math.floor(Math.random() * addresses.length)],
                    timestamp: date.toISOString(),
                    result: results[Math.floor(Math.random() * results.length)]
                });
            }
            
            // æŒ‰æ—¶é—´å€’åºæ’åº
            deliveryRecords.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        }
        
        // åˆå§‹åŒ–
        function initializeApp() {
            if (isInitialized) {
                console.log('åº”ç”¨å·²ç»åˆå§‹åŒ–ï¼Œè·³è¿‡é‡å¤åˆå§‹åŒ–');
                return;
            }
            
            console.log('DOMåŠ è½½å®Œæˆï¼Œåˆå§‹åŒ–é¡µé¢...');
            
            // è®¾ç½®æœ€å¤§ç›‘å¬å™¨æ•°é‡ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼è­¦å‘Š
            if (typeof process !== 'undefined' && process.setMaxListeners) {
                process.setMaxListeners(100);
            }
            
            initializeDragDrop();
            checkSystemStatus();
            loadModelConfigStatus();
            
            // åˆå§‹åŒ–ä¾§è¾¹æ ç‚¹å‡»äº‹ä»¶ï¼ˆä½¿ç”¨æ ‡è®°é˜²æ­¢é‡å¤ç»‘å®šï¼‰
            document.querySelectorAll('.sidebar-item').forEach((item, index) => {
                // æ£€æŸ¥æ˜¯å¦å·²ç»ç»‘å®šè¿‡äº‹ä»¶
                if (item._hasClickListener) {
                    console.log('ä¾§è¾¹æ é¡¹å·²ç»‘å®šäº‹ä»¶ï¼Œè·³è¿‡');
                    return;
                }
                item._hasClickListener = true;
                
                item.addEventListener('click', function() {
                        // ç§»é™¤æ‰€æœ‰activeç±»
                        document.querySelectorAll('.sidebar-item').forEach(s => {
                            s.classList.remove('active');
                        });
                        // æ·»åŠ å½“å‰activeç±»
                        this.classList.add('active');
                        
                        // æ ¹æ®èœå•é¡¹æ–‡æœ¬å†…å®¹å¯¼èˆªåˆ°ä¸åŒé¡µé¢
                        // æå–æ–‡æœ¬å†…å®¹ï¼Œæ’é™¤å›¾æ ‡
                        const textNodes = Array.from(this.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim());
                        const menuText = textNodes.length > 0 ? textNodes[0].textContent.trim() : '';
                        let targetPage = '';
                        
                        console.log('èœå•é¡¹æ–‡æœ¬:', menuText);
                        
                        switch(menuText) {
                            case 'é¦–é¡µ':
                                targetPage = 'home';
                                break;
                            case 'ç®€å†ç®¡ç†':
                                targetPage = 'resumeManage';
                                break;
                            case 'ç®€å†ä¼˜åŒ–':
                                targetPage = 'resume';
                                break;
                            case 'æ™ºèƒ½æŠ•é€’':
                                targetPage = 'delivery';
                                break;
                            case 'èŒä½åŒ¹é…':
                                targetPage = 'jobs';
                                break;
                            case 'é¢è¯•æ•™ç»ƒ':
                                targetPage = 'interview';
                                break;
                            case 'è§†é¢‘é¢è¯•':
                                // ç›´æ¥å¯¼èˆªåˆ°è§†é¢‘é¢è¯•é¡µé¢
                                navigateToVideoInterview();
                                return;
                            case 'æ•°æ®åˆ†æ':
                                targetPage = 'analytics';
                                break;
                            case 'æ¨¡å‹é…ç½®':
                                targetPage = 'config';
                                break;
                            case 'ç³»ç»Ÿè®¾ç½®':
                                targetPage = 'settings';
                                break;
                        }
                        
                        console.log('ä¾§è¾¹æ ç‚¹å‡»:', menuText, '->', targetPage);
                        
                        if (targetPage) {
                            // æ›´æ–°URL hashä»¥è§¦å‘é¡µé¢åˆ‡æ¢
                            if (targetPage === 'config') {
                                // æ¨¡å‹é…ç½®é¡µé¢è·³è½¬åˆ°æ–°é¡µé¢
                                window.location.href = 'model-config.html';
                            } else {
                                window.location.hash = targetPage;
                            }
                        }
                    });
                });
            
            // ç”Ÿæˆæ¨¡æ‹ŸæŠ•é€’è®°å½•æ•°æ®
            generateMockDeliveryRecords();
            
            isInitialized = true;
            console.log('é¡µé¢åˆå§‹åŒ–å®Œæˆï¼');
            console.log('ç”Ÿæˆäº†', deliveryRecords.length, 'æ¡æ¨¡æ‹ŸæŠ•é€’è®°å½•');

        }

        // æ–‡ä»¶æ‹–æ‹½å¤„ç†
        function initializeDragDrop() {
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');

            // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
            if (!uploadArea || !fileInput) {
                console.log('ä¸Šä¼ åŒºåŸŸå…ƒç´ ä¸å­˜åœ¨ï¼Œè·³è¿‡æ‹–æ‹½åˆå§‹åŒ–');
                return;
            }

            // æ£€æŸ¥å…ƒç´ æ˜¯å¦å·²ç»æœ‰äº‹ä»¶ç›‘å¬å™¨
            const uploadAreaHasListeners = uploadArea._hasInitializedDragDrop;
            if (uploadAreaHasListeners) {
                console.log('ä¸Šä¼ åŒºåŸŸå·²ç»åˆå§‹åŒ–æ‹–æ‹½äº‹ä»¶ï¼Œè·³è¿‡é‡å¤åˆå§‹åŒ–');
                return;
            }

            // æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨ï¼Œç‚¹å‡»ä¸Šä¼ åŒºåŸŸæ—¶è§¦å‘æ–‡ä»¶é€‰æ‹©
            uploadArea.addEventListener('click', () => {
                fileInput.click();
            });

            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', () => {
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleFileSelect(files[0]);
                }
            });

            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleFileSelect(e.target.files[0]);
                }
            });

            // æ ‡è®°ä¸ºå·²åˆå§‹åŒ–
            uploadArea._hasInitializedDragDrop = true;
        }

        // æ–‡ä»¶é€‰æ‹©å¤„ç†
        function handleFileSelect(file) {
            // éªŒè¯æ–‡ä»¶
            const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
            const maxSize = 10 * 1024 * 1024; // 10MB

            if (!allowedTypes.includes(file.type) && !file.name.toLowerCase().match(/\.(pdf|doc|docx)$/)) {
                showNotification('è¯·é€‰æ‹©PDFæˆ–Wordæ ¼å¼çš„æ–‡ä»¶', 'error');
                return;
            }

            if (file.size > maxSize) {
                showNotification('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10MB', 'error');
                return;
            }

            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            const fileInfo = document.getElementById('fileInfo');
            const fileName = document.getElementById('fileName');
            const fileDetails = document.getElementById('fileDetails');
            
            fileName.textContent = file.name;
            fileDetails.textContent = `å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)}MB | ç±»å‹: ${file.type.includes('pdf') ? 'PDF' : 'Word'}`;
            fileInfo.style.display = 'block';

            // å¼€å§‹è§£æ
            parseResumeFile(file);
        }

        // è§£æç®€å†æ–‡ä»¶
        async function parseResumeFile(file) {
            const resultDiv = document.getElementById('parseResult');
            resultDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; gap: 8px;"><span class="loading"></span>æ­£åœ¨è§£æç®€å†æ–‡ä»¶...</div>';

            try {
                // è¯»å–æ–‡ä»¶å†…å®¹
                const fileContent = await readFileAsBase64(file);
                
                console.log('å¼€å§‹ä¸Šä¼ æ–‡ä»¶:', file.name, file.type, file.size);
                
                const response = await fetch(`${API_BASE}/api/resume/upload`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type,
                        fileContent: fileContent
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                console.log('åç«¯è¿”å›ç»“æœ:', result);
                
                if (result.success) {
                    currentResumeData = result.data;
                    displayParseResult(result.data);
                    showNotification('ç®€å†è§£æå®Œæˆ', 'success');
                    
                    // å°†ç®€å†æ·»åŠ åˆ°ç®€å†æ•°æ®æ•°ç»„
                    const resumeItem = {
                        id: Date.now().toString(),
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type,
                        uploadDate: new Date().toISOString(),
                        parseQuality: result.data.parseQuality.score,
                        parsedData: result.data.parsedData
                    };
                    
                    resumeData.push(resumeItem);
                    
                    // æ›´æ–°ç®€å†åˆ—è¡¨æ˜¾ç¤º
                    renderResumeList();
                } else {
                    throw new Error(result.error || 'è§£æå¤±è´¥');
                }

            } catch (error) {
                console.error('è§£æå¤±è´¥:', error);
                resultDiv.innerHTML = `<div style="color: var(--error-color);">è§£æå¤±è´¥: ${error.message}</div>`;
                showNotification('è§£æå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // æ¸²æŸ“ç®€å†åˆ—è¡¨
        function renderResumeList() {
            const resumeListDiv = document.getElementById('resumeList');
            if (!resumeListDiv) return;
            
            if (resumeData.length === 0) {
                resumeListDiv.innerHTML = `
                    <div style="text-align: center; padding: 60px;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                        <h4>æš‚æ— ç®€å†</h4>
                        <p style="margin-top: 8px; color: var(--text-secondary);">æ‚¨è¿˜æ²¡æœ‰ä¸Šä¼ ä»»ä½•ç®€å†ï¼Œå¼€å§‹ä¸Šä¼ ç®€å†å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            // è®¡ç®—åˆ†é¡µ
            const totalPages = Math.ceil(resumeData.length / resumesPerPage);
            const startIndex = (currentResumePage - 1) * resumesPerPage;
            const endIndex = startIndex + resumesPerPage;
            const paginatedResumes = resumeData.slice(startIndex, endIndex);
            
            let html = `
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>æ–‡ä»¶å</th>
                                <th>æ–‡ä»¶å¤§å°</th>
                                <th>æ–‡ä»¶ç±»å‹</th>
                                <th>ä¸Šä¼ æ—¶é—´</th>
                                <th>è§£æè´¨é‡</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            paginatedResumes.forEach(resume => {
                const formattedDate = new Date(resume.uploadDate).toLocaleString('zh-CN');
                const fileSizeMB = (resume.fileSize / 1024 / 1024).toFixed(2);
                const fileType = resume.fileType.includes('pdf') ? 'PDF' : 'Word';
                
                html += `
                    <tr>
                        <td>${resume.fileName}</td>
                        <td>${fileSizeMB} MB</td>
                        <td>${fileType}</td>
                        <td>${formattedDate}</td>
                        <td>
                            <span class="status ${resume.parseQuality >= 80 ? 'status-success' : resume.parseQuality >= 50 ? 'status-warning' : 'status-error'}">
                                ${resume.parseQuality}%
                            </span>
                        </td>
                        <td>
                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px; margin-right: 4px;" onclick="viewResumeDetail('${resume.id}')">
                                æŸ¥çœ‹è¯¦æƒ…
                            </button>
                            <button class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" onclick="deleteResume('${resume.id}')">
                                åˆ é™¤
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
            `;
            
            // å§‹ç»ˆæ˜¾ç¤ºåˆ†é¡µå¯¼èˆª
            html += `
                <div class="pagination">
                    <div class="page-item ${currentResumePage === 1 ? 'disabled' : ''}" onclick="goToResumePage(${currentResumePage - 1})">&lt;</div>
            `;
            
            // æ˜¾ç¤ºé¡µç 
            for (let i = 1; i <= totalPages; i++) {
                html += `
                    <div class="page-item ${currentResumePage === i ? 'active' : ''}" onclick="goToResumePage(${i})"><a style="text-decoration: none; color: inherit;">${i}</a></div>
                `;
            }
            
            html += `
                    <div class="page-item ${currentResumePage === totalPages ? 'disabled' : ''}" onclick="goToResumePage(${currentResumePage + 1})">&gt;</div>
                </div>
            `;
            
            resumeListDiv.innerHTML = html;
        }
        
        // è·³è½¬åˆ°æŒ‡å®šç®€å†é¡µç 
        function goToResumePage(page) {
            const totalPages = Math.ceil(resumeData.length / resumesPerPage);
            if (page >= 1 && page <= totalPages) {
                currentResumePage = page;
                renderResumeList();
            }
        }
        
        // æŸ¥çœ‹ç®€å†è¯¦æƒ…
        let currentResumeModal = null;
        
        function viewResumeDetail(resumeId) {
            const resume = resumeData.find(r => r.id === resumeId);
            if (!resume) {
                showNotification('ç®€å†ä¸å­˜åœ¨', 'error');
                return;
            }
            
            // å…³é—­ä¹‹å‰çš„å¼¹çª—
            if (currentResumeModal) {
                currentResumeModal.remove();
            }
            
            // ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
            document.body.style.overflow = 'hidden';
            
            // åˆ›å»ºè¯¦ç»†çš„æ¨¡æ€æ¡†æ¥æ˜¾ç¤ºç®€å†å®Œæ•´ä¿¡æ¯
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                overflow-y: auto;
            `;
            
            // ç‚¹å‡»èƒŒæ™¯å…³é—­
            modal.onclick = function(e) {
                if (e.target === modal) {
                    closeResumeModal();
                }
            };
            
            currentResumeModal = modal;
            
            const modalContent = document.createElement('div');
            modalContent.style.cssText = `
                background: white;
                border-radius: 8px;
                padding: 32px;
                max-width: 800px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                position: relative;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            `;
            
            const closeButton = document.createElement('button');
            closeButton.textContent = 'âœ•';
            closeButton.style.cssText = `
                position: absolute;
                top: 16px;
                right: 20px;
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: var(--text-secondary);
                z-index: 10;
            `;
            closeButton.onclick = function() {
                closeResumeModal();
            };
            
            const modalTitle = document.createElement('h3');
            modalTitle.textContent = `ç®€å†è¯¦æƒ…: ${resume.fileName}`;
            modalTitle.style.cssText = `
                margin-bottom: 24px;
                padding-bottom: 12px;
                border-bottom: 2px solid var(--primary-color);
                color: var(--text-primary);
            `;
            
            // æ„å»ºç®€å†è¯¦æƒ…å†…å®¹
            let detailContent = '';
            
            // æ–‡ä»¶ä¿¡æ¯
            detailContent += `
                <div style="margin-bottom: 24px; padding: 16px; background: rgba(24, 144, 255, 0.05); border-radius: var(--border-radius);">
                    <h4 style="margin-bottom: 12px; color: var(--text-primary);">æ–‡ä»¶ä¿¡æ¯</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                        <div><strong>æ–‡ä»¶å:</strong> ${resume.fileName || 'æœªçŸ¥'}</div>
                        <div><strong>æ–‡ä»¶å¤§å°:</strong> ${(resume.fileSize / 1024 / 1024).toFixed(2)}MB</div>
                        <div><strong>æ–‡ä»¶ç±»å‹:</strong> ${resume.fileType || 'æœªçŸ¥'}</div>
                        <div><strong>è§£æè´¨é‡:</strong> ${resume.parseQuality || 'æœªçŸ¥'}%</div>
                        <div><strong>ä¸Šä¼ æ—¶é—´:</strong> ${resume.uploadDate ? new Date(resume.uploadDate).toLocaleString('zh-CN') : 'æœªçŸ¥'}</div>
                    </div>
                </div>
            `;
            
            // åŸºæœ¬ä¿¡æ¯
            if (resume.parsedData) {
                const parsedData = resume.parsedData;
                
                // åŸºæœ¬ä¿¡æ¯
                if (parsedData.name || parsedData.phone || parsedData.email) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">åŸºæœ¬ä¿¡æ¯</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                                    ${parsedData.name ? `<div><strong>å§“å:</strong> ${parsedData.name}</div>` : ''}
                                    ${parsedData.phone ? `<div><strong>ç”µè¯:</strong> ${parsedData.phone}</div>` : ''}
                                    ${parsedData.email ? `<div><strong>é‚®ç®±:</strong> ${parsedData.email}</div>` : ''}
                                    ${parsedData.address ? `<div><strong>åœ°å€:</strong> ${parsedData.address}</div>` : ''}
                                    ${parsedData.gender ? `<div><strong>æ€§åˆ«:</strong> ${parsedData.gender}</div>` : ''}
                                    ${parsedData.birthdate ? `<div><strong>å‡ºç”Ÿæ—¥æœŸ:</strong> ${parsedData.birthdate}</div>` : ''}
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                // æ•™è‚²èƒŒæ™¯
                if (parsedData.education && Array.isArray(parsedData.education) && parsedData.education.length > 0) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">æ•™è‚²èƒŒæ™¯</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                    `;
                    
                    parsedData.education.forEach((edu, index) => {
                        detailContent += `
                            <div style="margin-bottom: 16px; padding-bottom: 16px; ${index < parsedData.education.length - 1 ? 'border-bottom: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: 600; margin-bottom: 8px;">${edu.institution || 'æœªçŸ¥å­¦æ ¡'}</div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 8px;">
                                    ${edu.major ? `<div><strong>ä¸“ä¸š:</strong> ${edu.major}</div>` : ''}
                                    ${edu.degree ? `<div><strong>å­¦ä½:</strong> ${edu.degree}</div>` : ''}
                                    ${edu.duration ? `<div><strong>æ—¶é—´:</strong> ${edu.duration}</div>` : ''}
                                    ${edu.gpa ? `<div><strong>GPA:</strong> ${edu.gpa}</div>` : ''}
                                </div>
                            </div>
                        `;
                    });
                    
                    detailContent += `
                            </div>
                        </div>
                    `;
                }
                
                // å·¥ä½œç»éªŒ
                if (parsedData.workExperience && Array.isArray(parsedData.workExperience) && parsedData.workExperience.length > 0) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">å·¥ä½œç»éªŒ</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                    `;
                    
                    parsedData.workExperience.forEach((work, index) => {
                        detailContent += `
                            <div style="margin-bottom: 16px; padding-bottom: 16px; ${index < parsedData.workExperience.length - 1 ? 'border-bottom: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: 600; margin-bottom: 4px;">${work.company || 'æœªçŸ¥å…¬å¸'}</div>
                                <div style="font-weight: 500; color: var(--text-secondary); margin-bottom: 8px;">${work.position || 'æœªçŸ¥èŒä½'}</div>
                                ${work.duration ? `<div style="margin-bottom: 8px; color: var(--text-secondary);"><strong>æ—¶é—´:</strong> ${work.duration}</div>` : ''}
                                ${work.description ? `<div style="margin-bottom: 8px;"><strong>èŒè´£:</strong> ${work.description}</div>` : ''}
                                ${work.achievements ? `<div><strong>æˆå°±:</strong> ${work.achievements}</div>` : ''}
                            </div>
                        `;
                    });
                    
                    detailContent += `
                            </div>
                        </div>
                    `;
                }
                
                // é¡¹ç›®ç»éªŒ
                if (parsedData.projects && Array.isArray(parsedData.projects) && parsedData.projects.length > 0) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">é¡¹ç›®ç»éªŒ</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                    `;
                    
                    parsedData.projects.forEach((project, index) => {
                        detailContent += `
                            <div style="margin-bottom: 16px; padding-bottom: 16px; ${index < parsedData.projects.length - 1 ? 'border-bottom: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: 600; margin-bottom: 4px;">${project.name || 'æœªçŸ¥é¡¹ç›®'}</div>
                                ${project.role ? `<div style="margin-bottom: 8px; color: var(--text-secondary);"><strong>è§’è‰²:</strong> ${project.role}</div>` : ''}
                                ${project.duration ? `<div style="margin-bottom: 8px; color: var(--text-secondary);"><strong>æ—¶é—´:</strong> ${project.duration}</div>` : ''}
                                ${project.description ? `<div style="margin-bottom: 8px;"><strong>æè¿°:</strong> ${project.description}</div>` : ''}
                                ${project.technologies ? `<div style="margin-bottom: 8px;"><strong>æŠ€æœ¯æ ˆ:</strong> ${project.technologies}</div>` : ''}
                                ${project.achievements ? `<div><strong>æˆå°±:</strong> ${project.achievements}</div>` : ''}
                            </div>
                        `;
                    });
                    
                    detailContent += `
                            </div>
                        </div>
                    `;
                }
                
                // æŠ€èƒ½
                if (parsedData.skills && Array.isArray(parsedData.skills) && parsedData.skills.length > 0) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">æŠ€èƒ½</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                    `;
                    
                    parsedData.skills.forEach(skill => {
                        detailContent += `
                                    <span style="padding: 4px 12px; background: rgba(24, 144, 255, 0.1); border-radius: 16px; font-size: 13px; color: var(--primary-color);">${skill}</span>
                                `;
                    });
                    
                    detailContent += `
                                </div>
                            </div>
                        </div>
                    `;
                }
                
                // è¯ä¹¦
                if (parsedData.certifications && Array.isArray(parsedData.certifications) && parsedData.certifications.length > 0) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">è¯ä¹¦</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                    `;
                    
                    parsedData.certifications.forEach((cert, index) => {
                        detailContent += `
                            <div style="margin-bottom: 8px; ${index < parsedData.certifications.length - 1 ? 'padding-bottom: 8px; border-bottom: 1px solid var(--border-color);' : ''}">
                                <div style="font-weight: 500;">${cert.name || 'æœªçŸ¥è¯ä¹¦'}</div>
                                ${cert.issuer ? `<div style="color: var(--text-secondary); font-size: 13px;">${cert.issuer} ${cert.date ? `(${cert.date})` : ''}</div>` : ''}
                            </div>
                        `;
                    });
                    
                    detailContent += `
                            </div>
                        </div>
                    `;
                }
                
                // è‡ªæˆ‘è¯„ä»·
                if (parsedData.summary) {
                    detailContent += `
                        <div style="margin-bottom: 24px;">
                            <h4 style="margin-bottom: 12px; color: var(--text-primary); border-left: 4px solid var(--primary-color); padding-left: 12px;">è‡ªæˆ‘è¯„ä»·</h4>
                            <div style="padding: 16px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                                ${parsedData.summary}
                            </div>
                        </div>
                    `;
                }
            } else {
                // å¦‚æœæ²¡æœ‰è§£ææ•°æ®
                detailContent += `
                    <div style="margin-bottom: 24px; padding: 16px; background: rgba(245, 34, 45, 0.05); border-radius: var(--border-radius);">
                        <h4 style="margin-bottom: 8px; color: var(--text-primary);">è§£æä¿¡æ¯</h4>
                        <p>è¯¥ç®€å†å°šæœªè§£æï¼Œæ— æ³•æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚</p>
                    </div>
                `;
            }
            
            // æ“ä½œæŒ‰é’®
            detailContent += `
                <div style="margin-top: 24px; display: flex; gap: 12px; justify-content: flex-end;">
                    <button class="btn btn-secondary" onclick="event.stopPropagation(); closeResumeModal();">å…³é—­</button>
                    <button class="btn btn-primary" onclick="event.stopPropagation(); optimizeSelectedResume('${resume.id}')">ä¼˜åŒ–æ­¤ç®€å†</button>
                </div>
            `;
            
            const detailDiv = document.createElement('div');
            detailDiv.innerHTML = detailContent;
            
            modalContent.appendChild(closeButton);
            modalContent.appendChild(modalTitle);
            modalContent.appendChild(detailDiv);
            modal.appendChild(modalContent);
            document.body.appendChild(modal);
        }
        
        // å…³é—­ç®€å†è¯¦æƒ…å¼¹çª—
        function closeResumeModal() {
            if (currentResumeModal) {
                currentResumeModal.remove();
                currentResumeModal = null;
            }
            // æ¢å¤èƒŒæ™¯æ»šåŠ¨
            document.body.style.overflow = '';
        }
        
        // ä¼˜åŒ–é€‰ä¸­çš„ç®€å†
        function optimizeSelectedResume(resumeId) {
            // å…ˆå…³é—­ç®€å†è¯¦æƒ…å¼¹çª—
            closeResumeModal();
            
            // å¯¼èˆªåˆ°ç®€å†ä¼˜åŒ–é¡µé¢
            navigateTo('resume');
            
            // å»¶è¿Ÿä¸€ä¸‹ï¼Œç¡®ä¿é¡µé¢å·²ç»åŠ è½½
            setTimeout(() => {
                // åˆ·æ–°ç®€å†åˆ—è¡¨ï¼ˆä¸æ˜¾ç¤ºé€šçŸ¥ï¼‰
                refreshResumes(false).then(() => {
                    // é€‰æ‹©æŒ‡å®šçš„ç®€å†
                    const resumeSelector = document.getElementById('resumeSelector');
                    if (resumeSelector) {
                        resumeSelector.value = resumeId;
                        // è‡ªåŠ¨å¡«å……èŒä½æè¿°
                        autoFillJobDescription();
                    }
                });
            }, 500);
        }
        
        // åˆ é™¤ç®€å†
        function deleteResume(resumeId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªç®€å†å—ï¼Ÿ')) {
                resumeData = resumeData.filter(r => r.id !== resumeId);
                // æ£€æŸ¥å½“å‰é¡µæ˜¯å¦è¿˜æœ‰æ•°æ®
                const totalPages = Math.ceil(resumeData.length / resumesPerPage);
                if (currentResumePage > totalPages && totalPages > 0) {
                    currentResumePage = totalPages;
                }
                // æ›´æ–°ç®€å†æ•°é‡æ˜¾ç¤º
                updateResumeCount();
                renderResumeList();
                showNotification('ç®€å†å·²åˆ é™¤', 'success');
            }
        }
        
        // é¢„è§ˆæ–‡ä»¶
        function previewFile() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files || fileInput.files.length === 0) {
                showNotification('è¯·å…ˆé€‰æ‹©æ–‡ä»¶', 'warning');
                return;
            }
            
            const file = fileInput.files[0];
            const fileName = file.name;
            const fileType = file.type;
            
            console.log('é¢„è§ˆæ–‡ä»¶:', fileName, fileType);
            
            // æ ¹æ®æ–‡ä»¶ç±»å‹æ˜¾ç¤ºä¸åŒçš„é¢„è§ˆ
            if (fileType.includes('pdf') || fileName.toLowerCase().endsWith('.pdf')) {
                // PDFæ–‡ä»¶é¢„è§ˆ
                const reader = new FileReader();
                reader.onload = function(e) {
                    const pdfData = e.target.result;
                    
                    // åˆ›å»ºé¢„è§ˆæ¨¡æ€æ¡†
                    const modal = document.createElement('div');
                    modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.9);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 9999;
                    `;
                    
                    const modalContent = document.createElement('div');
                    modalContent.style.cssText = `
                        background: white;
                        border-radius: 8px;
                        padding: 0;
                        max-width: 95%;
                        max-height: 95%;
                        overflow: hidden;
                        position: relative;
                        min-width: 600px;
                        min-height: 600px;
                    `;
                    
                    const closeButton = document.createElement('button');
                    closeButton.textContent = 'âœ•';
                    closeButton.style.cssText = `
                        position: absolute;
                        top: 12px;
                        right: 16px;
                        background: rgba(255, 255, 255, 0.9);
                        border: 1px solid var(--border-color);
                        border-radius: 50%;
                        width: 32px;
                        height: 32px;
                        font-size: 18px;
                        cursor: pointer;
                        color: var(--text-primary);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 10;
                        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    `;
                    closeButton.onclick = function() {
                        modal.remove();
                    };
                    
                    const previewHeader = document.createElement('div');
                    previewHeader.style.cssText = `
                        background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
                        color: white;
                        padding: 16px 24px;
                        display: flex;
                        align-items: center;
                        justify-content: space-between;
                        position: relative;
                        z-index: 5;
                    `;
                    
                    const previewTitle = document.createElement('h4');
                    previewTitle.textContent = `PDFæ–‡ä»¶é¢„è§ˆ: ${fileName}`;
                    previewTitle.style.cssText = `
                        margin: 0;
                        font-size: 16px;
                        font-weight: 600;
                    `;
                    
                    const fileInfo = document.createElement('div');
                    fileInfo.style.cssText = `
                        font-size: 13px;
                        opacity: 0.9;
                    `;
                    fileInfo.textContent = `æ–‡ä»¶å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB`;
                    
                    previewHeader.appendChild(previewTitle);
                    previewHeader.appendChild(fileInfo);
                    
                    const pdfContainer = document.createElement('div');
                    pdfContainer.style.cssText = `
                        width: 100%;
                        height: calc(100% - 60px);
                        overflow: auto;
                    `;
                    
                    const pdfIframe = document.createElement('iframe');
                    pdfIframe.src = pdfData;
                    pdfIframe.style.cssText = `
                        width: 100%;
                        height: 1000px;
                        border: none;
                    `;
                    pdfIframe.title = `PDFé¢„è§ˆ: ${fileName}`;
                    
                    pdfContainer.appendChild(pdfIframe);
                    modalContent.appendChild(closeButton);
                    modalContent.appendChild(previewHeader);
                    modalContent.appendChild(pdfContainer);
                    modal.appendChild(modalContent);
                    document.body.appendChild(modal);
                };
                reader.readAsDataURL(file);
            } else if (fileType.includes('word') || fileName.toLowerCase().endsWith('.docx') || fileName.toLowerCase().endsWith('.doc')) {
                // Wordæ–‡ä»¶é¢„è§ˆ
                const reader = new FileReader();
                reader.onload = function(e) {
                    const wordData = e.target.result;
                    
                    // åˆ›å»ºé¢„è§ˆæ¨¡æ€æ¡†
                    const modal = document.createElement('div');
                    modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 9999;
                    `;
                    
                    const modalContent = document.createElement('div');
                    modalContent.style.cssText = `
                        background: white;
                        border-radius: 8px;
                        padding: 24px;
                        max-width: 600px;
                        max-height: 80%;
                        overflow: auto;
                        position: relative;
                    `;
                    
                    const closeButton = document.createElement('button');
                    closeButton.textContent = 'âœ•';
                    closeButton.style.cssText = `
                        position: absolute;
                        top: 12px;
                        right: 16px;
                        background: none;
                        border: none;
                        font-size: 24px;
                        cursor: pointer;
                        color: var(--text-secondary);
                    `;
                    closeButton.onclick = function() {
                        modal.remove();
                    };
                    
                    const previewTitle = document.createElement('h4');
                    previewTitle.textContent = `æ–‡ä»¶é¢„è§ˆ: ${fileName}`;
                    previewTitle.style.cssText = `
                        margin-bottom: 20px;
                        padding-bottom: 8px;
                        border-bottom: 1px solid var(--border-color);
                    `;
                    
                    const previewContent = document.createElement('div');
                    previewContent.style.cssText = `
                        text-align: center;
                        padding: 40px;
                    `;
                    
                    previewContent.innerHTML = `
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“„</div>
                        <h5>Wordæ–‡ä»¶é¢„è§ˆ</h5>
                        <p style="color: var(--text-secondary); margin: 16px 0;">æ–‡ä»¶å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                        <p style="color: var(--text-secondary);">Wordæ–‡ä»¶é¢„è§ˆéœ€è¦ç‰¹æ®Šå¤„ç†</p>
                        <p style="color: var(--text-secondary); margin-top: 8px;">ç³»ç»Ÿå·²è§£æå¹¶æå–äº†å…³é”®ä¿¡æ¯</p>
                        <div style="margin-top: 24px;">
                            <button class="btn btn-primary" onclick="confirmUpload()">ç¡®è®¤ä¸Šä¼ å¹¶æŸ¥çœ‹è§£æç»“æœ</button>
                        </div>
                    `;
                    
                    modalContent.appendChild(closeButton);
                    modalContent.appendChild(previewTitle);
                    modalContent.appendChild(previewContent);
                    modal.appendChild(modalContent);
                    document.body.appendChild(modal);
                };
                reader.readAsDataURL(file);
            } else {
                // å…¶ä»–æ–‡ä»¶ç±»å‹é¢„è§ˆ
                const reader = new FileReader();
                reader.onload = function(e) {
                    const fileData = e.target.result;
                    
                    // åˆ›å»ºé¢„è§ˆæ¨¡æ€æ¡†
                    const modal = document.createElement('div');
                    modal.style.cssText = `
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background: rgba(0, 0, 0, 0.8);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        z-index: 9999;
                    `;
                    
                    const modalContent = document.createElement('div');
                    modalContent.style.cssText = `
                        background: white;
                        border-radius: 8px;
                        padding: 24px;
                        max-width: 500px;
                        max-height: 80%;
                        overflow: auto;
                        position: relative;
                    `;
                    
                    const closeButton = document.createElement('button');
                    closeButton.textContent = 'âœ•';
                    closeButton.style.cssText = `
                        position: absolute;
                        top: 12px;
                        right: 16px;
                        background: none;
                        border: none;
                        font-size: 24px;
                        cursor: pointer;
                        color: var(--text-secondary);
                    `;
                    closeButton.onclick = function() {
                        modal.remove();
                    };
                    
                    const previewTitle = document.createElement('h4');
                    previewTitle.textContent = `æ–‡ä»¶ä¿¡æ¯: ${fileName}`;
                    previewTitle.style.cssText = `
                        margin-bottom: 20px;
                        padding-bottom: 8px;
                        border-bottom: 1px solid var(--border-color);
                    `;
                    
                    const previewContent = document.createElement('div');
                    previewContent.style.cssText = `
                        text-align: center;
                        padding: 40px;
                    `;
                    
                    previewContent.innerHTML = `
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“„</div>
                        <h5>æ–‡ä»¶ä¿¡æ¯</h5>
                        <p style="color: var(--text-secondary); margin: 16px 0;">æ–‡ä»¶ç±»å‹: ${fileType || 'æœªçŸ¥'}</p>
                        <p style="color: var(--text-secondary); margin: 8px 0;">æ–‡ä»¶å¤§å°: ${(file.size / 1024 / 1024).toFixed(2)} MB</p>
                        <p style="color: var(--text-secondary); margin-top: 16px;">æ­¤æ–‡ä»¶ç±»å‹ä¸æ”¯æŒé¢„è§ˆ</p>
                        <div style="margin-top: 24px;">
                            <button class="btn btn-primary" onclick="confirmUpload()">ç¡®è®¤ä¸Šä¼ </button>
                        </div>
                    `;
                    
                    modalContent.appendChild(closeButton);
                    modalContent.appendChild(previewTitle);
                    modalContent.appendChild(previewContent);
                    modal.appendChild(modalContent);
                    document.body.appendChild(modal);
                };
                reader.readAsDataURL(file);
            }
        }
        
        // ç¡®è®¤ä¸Šä¼ 
        async function confirmUpload() {
            const fileInput = document.getElementById('fileInput');
            if (!fileInput.files || fileInput.files.length === 0) {
                showNotification('è¯·å…ˆé€‰æ‹©æ–‡ä»¶', 'warning');
                return;
            }
            
            const file = fileInput.files[0];
            const fileInfo = document.getElementById('fileInfo');
            
            // æ˜¾ç¤ºä¸Šä¼ ä¸­çŠ¶æ€
            const buttons = fileInfo.querySelectorAll('button');
            buttons.forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
            });
            
            try {
                // è¯»å–æ–‡ä»¶å†…å®¹
                const fileContent = await readFileAsBase64(file);
                
                console.log('ç¡®è®¤ä¸Šä¼ æ–‡ä»¶:', file.name, file.type, file.size);
                
                const response = await fetch(`${API_BASE}/api/resume/upload`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type,
                        fileContent: fileContent,
                        confirmUpload: true // æ ‡è®°ä¸ºç¡®è®¤ä¸Šä¼ 
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                console.log('åç«¯è¿”å›ç»“æœ:', result);
                
                if (result.success) {
                    currentResumeData = result.data;
                    displayParseResult(result.data);
                    showNotification('ç®€å†ä¸Šä¼ æˆåŠŸå¹¶ä¿å­˜åˆ°æ•°æ®åº“', 'success');
                    
                    // å°†ç®€å†æ·»åŠ åˆ°ç®€å†æ•°æ®æ•°ç»„
                    const resumeItem = {
                        id: Date.now().toString(),
                        fileName: file.name,
                        fileSize: file.size,
                        fileType: file.type,
                        uploadDate: new Date().toISOString(),
                        parseQuality: result.data.parseQuality.score,
                        parsedData: result.data.parsedData
                    };
                    
                    resumeData.push(resumeItem);
                    updateResumeCount();
                    
                    // æ¸²æŸ“ç®€å†åˆ—è¡¨
                    renderResumeList();
                } else {
                    throw new Error(result.error || 'ä¸Šä¼ å¤±è´¥');
                }

            } catch (error) {
                console.error('ä¸Šä¼ å¤±è´¥:', error);
                showNotification('ä¸Šä¼ å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                buttons.forEach(btn => {
                    btn.disabled = false;
                    btn.style.opacity = '1';
                });
            }
        }
        
        // æ˜¾ç¤ºè§£æç»“æœ
        function displayParseResult(data) {
            console.log('è§£æç»“æœæ•°æ®:', data); // è°ƒè¯•æ—¥å¿—
            const resultDiv = document.getElementById('parseResult');
            const resultContent = document.getElementById('resultContent');
            const { parsedData, parseQuality, fileInfo } = data;

            // æ¸…ç©ºresultContentä¸­çš„ç°æœ‰å†…å®¹ï¼Œé¿å…é‡å¤æ˜¾ç¤º
            if (resultContent) {
                // ä¿ç•™å‰ä¸¤ä¸ªå­å…ƒç´ ï¼ˆåŸºæœ¬ä¿¡æ¯å’ŒæŒ‡æ ‡å¡ç‰‡ï¼‰ï¼Œæ¸…ç©ºå…¶ä»–å†…å®¹
                const children = Array.from(resultContent.children);
                for (let i = 2; i < children.length; i++) {
                    resultContent.removeChild(children[i]);
                }
            }

            // æ›´æ–°æŒ‡æ ‡
            const qualityScoreElement = document.getElementById('qualityScore');
            if (qualityScoreElement) {
                qualityScoreElement.textContent = `${parseQuality.score}%`;
            }
            
            // ä¿®å¤ä¿¡æ¯è®¡æ•°é€»è¾‘
            const educationCount = Array.isArray(parsedData.education) ? parsedData.education.length : 0;
            const workCount = Array.isArray(parsedData.workExperience) ? parsedData.workExperience.length : 0;
            const skillCount = Array.isArray(parsedData.skills) ? parsedData.skills.length : 0;
            
            const infoCountElement = document.getElementById('infoCount');
            if (infoCountElement) {
                infoCountElement.textContent = educationCount + workCount + skillCount;
            }
            
            const skillCountElement = document.getElementById('skillCount');
            if (skillCountElement) {
                skillCountElement.textContent = skillCount;
            }

            // æ›´æ–°åŸºæœ¬ä¿¡æ¯ - æ·»åŠ æ›´æ™ºèƒ½çš„æ˜¾ç¤ºé€»è¾‘
            let nameText = 'æœªè¯†åˆ«';
            if (parsedData.name && parsedData.name !== 'å¾…ç¡®è®¤') {
                nameText = parsedData.name;
            } else if (fileInfo && fileInfo.fileName) {
                // å¦‚æœæ— æ³•è¯†åˆ«å§“åï¼Œä½¿ç”¨æ–‡ä»¶åä½œä¸ºæ ‡è¯†
                const fileName = fileInfo.fileName.replace('.pdf', '').replace('.doc', '').replace('.docx', '');
                nameText = `ç®€å†: ${fileName}`;
            }
            const resumeNameElement = document.getElementById('resumeName');
            if (resumeNameElement) {
                resumeNameElement.textContent = nameText;
            }
            
            // è”ç³»æ–¹å¼æ˜¾ç¤º
            let contactText = 'æœªè¯†åˆ«';
            if (parsedData.email || parsedData.phone) {
                contactText = `${parsedData.email || 'é‚®ç®±æœªè¯†åˆ«'} | ${parsedData.phone || 'ç”µè¯æœªè¯†åˆ«'}`;
            }
            const resumeContactElement = document.getElementById('resumeContact');
            if (resumeContactElement) {
                resumeContactElement.textContent = contactText;
            }
            
            // æ•™è‚²ä¿¡æ¯æ˜¾ç¤º
            let educationText = 'æœªè¯†åˆ«';
            if (Array.isArray(parsedData.education) && parsedData.education.length > 0) {
                educationText = parsedData.education.map(edu => {
                    if (typeof edu === 'string') return edu;
                    return edu.institution || edu.school || 'æœªçŸ¥å­¦æ ¡';
                }).join('ã€');
            } else if (parsedData.rawText && parsedData.rawText.length > 0) {
                // å¦‚æœæ— æ³•æå–å…·ä½“æ•™è‚²ä¿¡æ¯ï¼Œæ˜¾ç¤ºéƒ¨åˆ†åŸå§‹æ–‡æœ¬
                educationText = parsedData.rawText.substring(0, 100) + '...';
            }
            const resumeEducationElement = document.getElementById('resumeEducation');
            if (resumeEducationElement) {
                resumeEducationElement.textContent = educationText;
            }

            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            if (fileInfo) {
                const fileInfoElement = document.createElement('div');
                fileInfoElement.innerHTML = `
                    <div style="margin-top: 16px; padding: 12px; background: rgba(24, 144, 255, 0.05); border-radius: var(--border-radius);">
                        <strong>æ–‡ä»¶ä¿¡æ¯:</strong><br>
                        æ ¼å¼: ${fileInfo.format} | é¡µæ•°: ${fileInfo.pages} | å¤§å°: ${(fileInfo.size / 1024).toFixed(1)}KB
                    </div>
                `;
                resultContent.appendChild(fileInfoElement);
            }

            // æ˜¾ç¤ºæ•°æ®åº“å­˜å‚¨çŠ¶æ€
            if (data.databaseId) {
                const dbInfoElement = document.createElement('div');
                let dbStatusText = '';
                let dbStatusClass = '';
                
                if (data.databaseStatus === 'stored') {
                    dbStatusText = `âœ… å·²å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œç®€å†ID: ${data.databaseId}`;
                    dbStatusClass = 'rgba(82, 196, 26, 0.05)';
                } else if (data.databaseStatus === 'failed') {
                    dbStatusText = `âš ï¸ æ•°æ®åº“å­˜å‚¨å¤±è´¥: ${data.databaseError || 'æœªçŸ¥é”™è¯¯'}`;
                    dbStatusClass = 'rgba(245, 34, 45, 0.05)';
                } else {
                    dbStatusText = `â“ æ•°æ®åº“çŠ¶æ€æœªçŸ¥`;
                    dbStatusClass = 'rgba(250, 173, 20, 0.05)';
                }
                
                dbInfoElement.innerHTML = `
                    <div style="margin-top: 8px; padding: 8px; background: ${dbStatusClass}; border-radius: var(--border-radius); font-size: 12px;">
                        ${dbStatusText}
                    </div>
                `;
                resultContent.appendChild(dbInfoElement);
            }
            
            // æ˜¾ç¤ºAIæ¨¡å‹ä¿¡æ¯
            if (data.modelName) {
                const modelInfoElement = document.createElement('div');
                modelInfoElement.innerHTML = `
                    <div style="margin-top: 8px; padding: 8px; background: rgba(24, 144, 255, 0.05); border-radius: var(--border-radius); font-size: 12px;">
                        ğŸ¤– ä½¿ç”¨æ¨¡å‹: ${data.modelName} | ç±»å‹: ${data.modelType} | æˆæœ¬: ${data.cost}
                    </div>
                `;
                resultContent.appendChild(modelInfoElement);
            }

            // æ˜¾ç¤ºç»“æœå†…å®¹
            resultContent.style.display = 'block';
            resultDiv.style.display = 'none';
        }

        // åˆ·æ–°ç®€å†åˆ—è¡¨
        async function refreshResumes(showNotify = true) {
            const resumeSelector = document.getElementById('resumeSelector');
            if (!resumeSelector) return;
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                resumeSelector.innerHTML = '<option value="">åŠ è½½ä¸­...</option>';
                
                // ä»APIè·å–ç®€å†åˆ—è¡¨
                const response = await fetch(`${API_BASE}/api/resume/list`, {
                    method: 'GET'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    // æ›´æ–°æœ¬åœ°ç®€å†æ•°æ®
                    resumeData = result.data || [];
                    
                    // å¡«å……ç®€å†é€‰æ‹©ä¸‹æ‹‰æ¡†
                    populateResumeSelector();
                    
                    // åªåœ¨æ‰‹åŠ¨åˆ·æ–°æ—¶æ˜¾ç¤ºé€šçŸ¥
                    if (showNotify) {
                        showNotification('ç®€å†åˆ—è¡¨å·²æ›´æ–°', 'success');
                    }
                } else {
                    throw new Error(result.error || 'è·å–ç®€å†åˆ—è¡¨å¤±è´¥');
                }
            } catch (error) {
                console.error('åˆ·æ–°ç®€å†åˆ—è¡¨å¤±è´¥:', error);
                showNotification('åˆ·æ–°ç®€å†åˆ—è¡¨å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                resumeSelector.innerHTML = '<option value="">è¯·é€‰æ‹©è¦ä¼˜åŒ–çš„ç®€å†</option>';
            }
        }
        
        // å¡«å……ç®€å†é€‰æ‹©ä¸‹æ‹‰æ¡†
        function populateResumeSelector() {
            const resumeSelector = document.getElementById('resumeSelector');
            if (!resumeSelector) return;
            
            let options = '<option value="">è¯·é€‰æ‹©è¦ä¼˜åŒ–çš„ç®€å†</option>';
            
            resumeData.forEach(resume => {
                options += `
                    <option value="${resume.id}">
                        ${resume.fileName} (${(resume.fileSize / 1024 / 1024).toFixed(2)}MB)
                    </option>
                `;
            });
            
            resumeSelector.innerHTML = options;
        }
        
        // AIç®€å†ä¼˜åŒ–
        async function optimizeResume() {
            const resumeSelector = document.getElementById('resumeSelector');
            const selectedResumeId = resumeSelector.value;
            const jobDescription = document.getElementById('jobDescription').value.trim();
            const optimizeBtn = document.getElementById('optimizeBtn');
            const optimizeResult = document.getElementById('optimizeResult');

            if (!selectedResumeId) {
                showNotification('è¯·é€‰æ‹©è¦ä¼˜åŒ–çš„ç®€å†', 'warning');
                return;
            }

            if (!jobDescription) {
                showNotification('è¯·è¾“å…¥ç›®æ ‡èŒä½æè¿°', 'warning');
                return;
            }

            let selectedResume;
            try {
                // ç¡®ä¿resumeDataæ˜¯æ•°ç»„
                if (!Array.isArray(resumeData)) {
                    showNotification('ç®€å†æ•°æ®æ ¼å¼é”™è¯¯', 'error');
                    return;
                }
                
                selectedResume = resumeData.find(r => r && r.id === selectedResumeId);
                
                if (!selectedResume) {
                    showNotification('é€‰æ‹©çš„ç®€å†ä¸å­˜åœ¨', 'error');
                    return;
                }

                if (!selectedResume.parsedData) {
                    showNotification('é€‰æ‹©çš„ç®€å†æ²¡æœ‰è§£ææ•°æ®', 'error');
                    return;
                }
            } catch (error) {
                console.error('è·å–ç®€å†æ•°æ®å¤±è´¥:', error);
                showNotification('è·å–ç®€å†æ•°æ®å¤±è´¥ï¼Œè¯·åˆ·æ–°åé‡è¯•', 'error');
                return;
            }

            optimizeBtn.disabled = true;
            optimizeBtn.innerHTML = '<span class="loading"></span>åˆ†æä¸­...';

            optimizeResult.style.display = 'block';
            document.getElementById('optimizeContent').innerHTML = '<div style="text-align: center;"><span class="loading"></span> AIæ­£åœ¨åˆ†æç®€å†å†…å®¹å¹¶ç”Ÿæˆå…·ä½“æ•´æ”¹æªæ–½...</div>';

            try {
                // æ„å»ºè¯¦ç»†çš„ç®€å†æ–‡æœ¬ï¼ŒåŒ…å«æ‰€æœ‰å¯ç”¨ä¿¡æ¯
                let resumeText = '';
                
                // ç¡®ä¿selectedResumeå’ŒparsedDataå­˜åœ¨
                if (!selectedResume || !selectedResume.parsedData) {
                    showNotification('ç®€å†æ•°æ®ä¸å®Œæ•´', 'error');
                    return;
                }
                
                // æ„å»ºç»“æ„åŒ–çš„ç®€å†æ–‡æœ¬ï¼ŒåŒ…å«æ‰€æœ‰è¯¦ç»†ä¿¡æ¯
                try {
                    resumeText = `# ç®€å†åˆ†æ\n\n`;
                    resumeText += `## åŸºæœ¬ä¿¡æ¯\n`;
                    resumeText += `å§“å: ${selectedResume.parsedData.name || 'æœªçŸ¥'}\n`;
                    resumeText += `ç”µè¯: ${selectedResume.parsedData.phone || 'æœªçŸ¥'}\n`;
                    resumeText += `é‚®ç®±: ${selectedResume.parsedData.email || 'æœªçŸ¥'}\n\n`;
                    
                    if (selectedResume.parsedData.education && Array.isArray(selectedResume.parsedData.education) && selectedResume.parsedData.education.length > 0) {
                        resumeText += `## æ•™è‚²èƒŒæ™¯\n`;
                        selectedResume.parsedData.education.forEach((edu, index) => {
                            if (edu) {
                                resumeText += `${index + 1}. ${edu.institution || 'æœªçŸ¥å­¦æ ¡'} - ${edu.major || 'æœªçŸ¥ä¸“ä¸š'} (${edu.degree || 'æœªçŸ¥å­¦å†'})\n`;
                                if (edu.duration) {
                                    resumeText += `   æ—¶é—´: ${edu.duration}\n`;
                                }
                            }
                        });
                        resumeText += `\n`;
                    }
                    
                    if (selectedResume.parsedData.workExperience && Array.isArray(selectedResume.parsedData.workExperience) && selectedResume.parsedData.workExperience.length > 0) {
                        resumeText += `## å·¥ä½œç»éªŒ\n`;
                        selectedResume.parsedData.workExperience.forEach((work, index) => {
                            if (work) {
                                resumeText += `${index + 1}. ${work.company || 'æœªçŸ¥å…¬å¸'} - ${work.position || 'æœªçŸ¥èŒä½'}\n`;
                                if (work.duration) {
                                    resumeText += `   æ—¶é—´: ${work.duration}\n`;
                                }
                                if (work.description) {
                                    resumeText += `   èŒè´£: ${work.description}\n`;
                                }
                            }
                        });
                        resumeText += `\n`;
                    }
                    
                    if (selectedResume.parsedData.skills && Array.isArray(selectedResume.parsedData.skills) && selectedResume.parsedData.skills.length > 0) {
                        resumeText += `## æŠ€èƒ½\n`;
                        resumeText += selectedResume.parsedData.skills.join('ã€') + '\n\n';
                    }
                    
                    if (selectedResume.parsedData.projects && Array.isArray(selectedResume.parsedData.projects) && selectedResume.parsedData.projects.length > 0) {
                        resumeText += `## é¡¹ç›®ç»éªŒ\n`;
                        selectedResume.parsedData.projects.forEach((project, index) => {
                            if (project) {
                                resumeText += `${index + 1}. ${project.name || 'æœªçŸ¥é¡¹ç›®'}\n`;
                                if (project.role) {
                                    resumeText += `   è§’è‰²: ${project.role}\n`;
                                }
                                if (project.description) {
                                    resumeText += `   æè¿°: ${project.description}\n`;
                                }
                            }
                        });
                        resumeText += `\n`;
                    }
                    
                    // æ·»åŠ æ–‡ä»¶ä¿¡æ¯
                    resumeText += `## æ–‡ä»¶ä¿¡æ¯\n`;
                    resumeText += `æ–‡ä»¶å: ${selectedResume.fileName || 'æœªçŸ¥'}\n`;
                    resumeText += `æ–‡ä»¶å¤§å°: ${(selectedResume.fileSize / 1024 / 1024).toFixed(2)}MB\n`;
                    resumeText += `æ–‡ä»¶ç±»å‹: ${selectedResume.fileType || 'æœªçŸ¥'}\n`;
                    resumeText += `è§£æè´¨é‡: ${selectedResume.parseQuality || 'æœªçŸ¥'}%\n`;
                } catch (buildError) {
                    console.error('æ„å»ºç®€å†æ–‡æœ¬å¤±è´¥:', buildError);
                    // ä½¿ç”¨é»˜è®¤æ–‡æœ¬ä½œä¸ºåå¤‡
                    resumeText = `ç®€å†: ${selectedResume.fileName || 'æœªçŸ¥'}\n\nè¯¥ç®€å†åŒ…å«åŸºæœ¬ä¸ªäººä¿¡æ¯ã€æ•™è‚²èƒŒæ™¯ã€å·¥ä½œç»éªŒå’ŒæŠ€èƒ½ä¿¡æ¯ã€‚`;
                }
                
                // ç¡®ä¿ç®€å†æ–‡æœ¬ä¸ä¸ºç©º
                if (!resumeText || resumeText.trim() === '') {
                    showNotification('ç®€å†æ–‡æœ¬ä¸ºç©ºï¼Œæ— æ³•è¿›è¡Œä¼˜åŒ–', 'error');
                    return;
                }
                
                // è°ƒè¯•ä¿¡æ¯
                console.log('å‘é€ä¼˜åŒ–è¯·æ±‚:', {
                    resumeText: resumeText.substring(0, 100) + '...',
                    jobDescription: jobDescription.substring(0, 100) + '...',
                    url: `${API_BASE}/api/optimize/resume`
                });
                
                const response = await fetch(`${API_BASE}/api/optimize/resume`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        resumeText: resumeText,
                        jobDescription: jobDescription,
                        requestType: 'detailedæ•´æ”¹æªæ–½' // æ˜ç¡®è¦æ±‚è¯¦ç»†çš„æ•´æ”¹æªæ–½
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.success) {
                    displayOptimizationResult(result.data);
                    showNotification('ä¼˜åŒ–åˆ†æå®Œæˆï¼Œå·²ç”Ÿæˆå…·ä½“æ•´æ”¹æªæ–½', 'success');
                } else {
                    throw new Error(result.error || 'ä¼˜åŒ–å¤±è´¥');
                }

            } catch (error) {
                console.error('ä¼˜åŒ–å¤±è´¥:', error);
                document.getElementById('optimizeContent').innerHTML = 
                    `<div style="color: var(--error-color);">ä¼˜åŒ–å¤±è´¥: ${error.message}</div>`;
                showNotification('ä¼˜åŒ–åˆ†æå¤±è´¥', 'error');
            } finally {
                optimizeBtn.disabled = false;
                optimizeBtn.innerHTML = 'å¼€å§‹ä¼˜åŒ–åˆ†æ';
            }
        }

        // æ˜¾ç¤ºä¼˜åŒ–ç»“æœ
        function displayOptimizationResult(data) {
            const content = document.getElementById('optimizeContent');
            
            let html = `
                <div class="result-grid" style="margin-bottom: 16px;">
                    <div class="metric-card">
                        <div class="metric-value">${data.keywordMatchRate}%</div>
                        <div class="metric-label">å…³é”®è¯åŒ¹é…åº¦</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">${data.missingKeywords.length}</div>
                        <div class="metric-label">ç¼ºå¤±å…³é”®è¯</div>
                    </div>
                    ${data.detailedAnalysis ? `
                        <div class="metric-card">
                            <div class="metric-value">${data.detailedAnalysis.resumeKeywordsCount}</div>
                            <div class="metric-label">ç®€å†å…³é”®è¯</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${data.detailedAnalysis.jobKeywordsCount}</div>
                            <div class="metric-label">èŒä½å…³é”®è¯</div>
                        </div>
                    ` : ''}
                </div>

                <div style="margin-bottom: 24px;">
                    <h5>ä¼˜åŒ–å»ºè®®</h5>
                    <div style="background: rgba(250, 173, 20, 0.1); padding: 16px; border-radius: var(--border-radius);">
                        ${data.suggestions.map(s => `
                            <div style="margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid rgba(250, 173, 20, 0.2);">
                                <div style="font-weight: 600; margin-bottom: 8px;">${s.content}</div>
                                ${s.reason ? `<div style="color: var(--text-secondary); margin-bottom: 8px;">${s.reason}</div>` : ''}
                                ${s.å…·ä½“ä¿¡æ¯ ? `
                                    <div style="margin: 8px 0;">
                                        <strong>å…·ä½“ä¿¡æ¯:</strong> ${s.å…·ä½“ä¿¡æ¯}
                                    </div>
                                ` : ''}
                                ${s.ä¼˜åŒ–å†…å®¹ ? `
                                    <div style="margin: 8px 0;">
                                        <strong>ä¼˜åŒ–å†…å®¹:</strong>
                                        <pre style="background: white; padding: 12px; border-radius: 4px; font-family: inherit; font-size: 13px; white-space: pre-wrap; margin: 8px 0;">${s.ä¼˜åŒ–å†…å®¹}</pre>
                                    </div>
                                ` : ''}
                                ${s.æ•´æ”¹æ€è·¯ ? `
                                    <div style="margin: 8px 0;">
                                        <strong>æ•´æ”¹æ€è·¯:</strong>
                                        <pre style="background: white; padding: 12px; border-radius: 4px; font-family: inherit; font-size: 13px; white-space: pre-wrap; margin: 8px 0;">${s.æ•´æ”¹æ€è·¯}</pre>
                                    </div>
                                ` : ''}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // å¦‚æœæœ‰è¯¦ç»†åˆ†æï¼Œæ·»åŠ è¯¦ç»†åˆ†æéƒ¨åˆ†
            if (data.detailedAnalysis) {
                html += `
                    <div style="margin-bottom: 24px;">
                        <h5>è¯¦ç»†åˆ†æ</h5>
                        <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius);">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px;">
                                <div><strong>ç®€å†é•¿åº¦:</strong> ${data.detailedAnalysis.resumeLength} å­—ç¬¦</div>
                                <div><strong>èŒä½æè¿°é•¿åº¦:</strong> ${data.detailedAnalysis.jobDescriptionLength} å­—ç¬¦</div>
                                <div><strong>ç®€å†å…³é”®è¯:</strong> ${data.detailedAnalysis.resumeKeywordsCount} ä¸ª</div>
                                <div><strong>èŒä½å…³é”®è¯:</strong> ${data.detailedAnalysis.jobKeywordsCount} ä¸ª</div>
                                <div><strong>åŒ¹é…å…³é”®è¯:</strong> ${data.detailedAnalysis.matchedKeywordsCount} ä¸ª</div>
                                <div><strong>ç¼ºå¤±å…³é”®è¯:</strong> ${data.detailedAnalysis.missingKeywordsCount} ä¸ª</div>
                            </div>
                            
                            ${data.detailedAnalysis.strengthAreas && data.detailedAnalysis.strengthAreas.length > 0 ? `
                                <div style="margin-bottom: 12px;">
                                    <strong>ä¼˜åŠ¿é¢†åŸŸ:</strong>
                                    <div style="margin-top: 8px; display: flex; flex-wrap: wrap; gap: 8px;">
                                        ${data.detailedAnalysis.strengthAreas.map(area => `<span style="padding: 4px 12px; background: rgba(82, 196, 26, 0.1); border-radius: 16px; font-size: 13px; color: var(--success-color);">${area}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${data.detailedAnalysis.improvementAreas && data.detailedAnalysis.improvementAreas.length > 0 ? `
                                <div style="margin-bottom: 12px;">
                                    <strong>æ”¹è¿›é¢†åŸŸ:</strong>
                                    <div style="margin-top: 8px; display: flex; flex-wrap: wrap; gap: 8px;">
                                        ${data.detailedAnalysis.improvementAreas.map(area => `<span style="padding: 4px 12px; background: rgba(245, 34, 45, 0.1); border-radius: 16px; font-size: 13px; color: var(--error-color);">${area}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                            
                            ${data.detailedAnalysis.recommendedSkills && data.detailedAnalysis.recommendedSkills.length > 0 ? `
                                <div>
                                    <strong>æ¨èæŠ€èƒ½:</strong>
                                    <div style="margin-top: 8px; display: flex; flex-wrap: wrap; gap: 8px;">
                                        ${data.detailedAnalysis.recommendedSkills.map(skill => `<span style="padding: 4px 12px; background: rgba(250, 173, 20, 0.1); border-radius: 16px; font-size: 13px; color: var(--warning-color);">${skill}</span>`).join('')}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }
            
            content.innerHTML = html;
        }

        // ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
        async function checkSystemStatus() {
            try {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000); // 5ç§’è¶…æ—¶
                
                const response = await fetch(`${API_BASE}/api/status`, {
                    signal: controller.signal,
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    cache: 'no-cache'
                });
                
                clearTimeout(timeoutId);
                
                if (!response.ok) {
                    console.warn('APIçŠ¶æ€æ£€æŸ¥å“åº”å¼‚å¸¸:', response.status, response.statusText);
                } else {
                    const data = await response.json();
                    console.log('APIçŠ¶æ€æ£€æŸ¥æˆåŠŸ:', data);
                }
            } catch (error) {
                // å¿½ç•¥è¯·æ±‚è¢«ä¸­æ­¢çš„é”™è¯¯ï¼ˆé¡µé¢åˆ‡æ¢æ—¶æ­£å¸¸è¡Œä¸ºï¼‰
                const errorMsg = error.message || '';
                if (error.name === 'AbortError' || error.name === 'TimeoutError' || errorMsg.indexOf('abort') !== -1) {
                    console.log('APIçŠ¶æ€æ£€æŸ¥è¶…æ—¶æˆ–è¢«ä¸­æ­¢');
                    return;
                }
                
                // å¯¹äºç½‘ç»œé”™è¯¯ï¼Œå¯ä»¥å°è¯•é‡è¯•
                if (error.name === 'TypeError' && errorMsg.includes('fetch')) {
                    console.warn('ç½‘ç»œé”™è¯¯ï¼ŒAPIæœåŠ¡å¯èƒ½æœªå¯åŠ¨:', error.message);
                    // å¯ä»¥æ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„æ¶ˆæ¯è€Œä¸æ˜¯é”™è¯¯æ—¥å¿—
                    return;
                }
                
                console.warn('ç³»ç»ŸçŠ¶æ€æ£€æŸ¥å¤±è´¥:', error.message);
            }
        }

        // åŠ è½½æ¨¡å‹é…ç½®çŠ¶æ€
        async function loadModelConfigStatus() {
            try {
                const response = await fetch(`${API_BASE}/api/config/status`);
                const data = await response.json();
                
                if (data.success) {
                    const statusElement = document.getElementById('modelConfigStatus');
                    
                    // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
                    if (!statusElement) {
                        console.log('æ¨¡å‹é…ç½®çŠ¶æ€å…ƒç´ ä¸å­˜åœ¨ï¼Œè·³è¿‡çŠ¶æ€æ›´æ–°');
                        return;
                    }
                    
                    const system = data.system;
                    
                    let statusHtml = '';
                    
                    if (system.healthRate === 0) {
                        statusHtml = `
                            <div style="color: #e74c3c;">
                                âŒ æ‰€æœ‰é›†ç¾¤æœªé…ç½®
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">
                                é›†ç¾¤æ€»æ•°: ${system.totalClusters} | å¥åº·é›†ç¾¤: ${system.healthyClusters}
                            </div>
                        `;
                    } else if (system.healthRate < 50) {
                        statusHtml = `
                            <div style="color: #f39c12;">
                                âš ï¸ éƒ¨åˆ†é›†ç¾¤å·²é…ç½® (${system.healthRate}%)
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">
                                é›†ç¾¤æ€»æ•°: ${system.totalClusters} | å¥åº·é›†ç¾¤: ${system.healthyClusters}
                            </div>
                        `;
                    } else {
                        statusHtml = `
                            <div style="color: #27ae60;">
                                âœ… é…ç½®çŠ¶æ€è‰¯å¥½ (${system.healthRate}%)
                            </div>
                            <div style="font-size: 12px; margin-top: 5px;">
                                é›†ç¾¤æ€»æ•°: ${system.totalClusters} | å¥åº·é›†ç¾¤: ${system.healthyClusters}
                            </div>
                        `;
                    }
                    
                    statusElement.innerHTML = statusHtml;
                } else {
                    const statusElement = document.getElementById('modelConfigStatus');
                    
                    // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
                    if (statusElement) {
                        statusElement.innerHTML = `
                            <div style="color: #e74c3c;">âŒ é…ç½®çŠ¶æ€åŠ è½½å¤±è´¥</div>
                        `;
                    }
                }
            } catch (error) {
                const statusElement = document.getElementById('modelConfigStatus');
                
                // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨
                if (statusElement) {
                    statusElement.innerHTML = `
                        <div style="color: #e74c3c;">âŒ ç½‘ç»œè¿æ¥é”™è¯¯</div>
                    `;
                }
            }
        }



        // æ¸…é™¤æ–‡ä»¶
        function clearFile() {
            document.getElementById('fileInput').value = '';
            document.getElementById('fileInfo').style.display = 'none';
            document.getElementById('parseResult').style.display = 'block';
            document.getElementById('resultContent').style.display = 'none';
            currentResumeData = null;
        }

        // æ¸…é™¤ä¼˜åŒ–
        function clearOptimization() {
            document.getElementById('jobDescription').value = '';
            document.getElementById('optimizeResult').style.display = 'none';
        }
        
        // æ ¹æ®é€‰æ‹©çš„ç®€å†è‡ªåŠ¨å¡«å……ç›®æ ‡èŒä½æè¿°
        function autoFillJobDescription() {
            const resumeSelector = document.getElementById('resumeSelector');
            const selectedResumeId = resumeSelector.value;
            const jobDescription = document.getElementById('jobDescription');
            
            if (!selectedResumeId) {
                jobDescription.value = '';
                return;
            }
            
            try {
                // ç¡®ä¿resumeDataæ˜¯æ•°ç»„
                if (!Array.isArray(resumeData)) {
                    return;
                }
                
                const selectedResume = resumeData.find(r => r && r.id === selectedResumeId);
                
                if (!selectedResume) {
                    return;
                }
                
                // æ ¹æ®ç®€å†å†…å®¹ç”Ÿæˆå¯¹åº”çš„ç›®æ ‡èŒä½æè¿°
                let generatedJobDescription = '';
                
                if (selectedResume.parsedData) {
                    const parsedData = selectedResume.parsedData;
                    
                    // æå–ä¸»è¦æŠ€èƒ½
                    const skills = parsedData.skills || [];
                    
                    // æå–å·¥ä½œç»éªŒ
                    const workExperience = parsedData.workExperience || [];
                    
                    // æå–æ•™è‚²èƒŒæ™¯
                    const education = parsedData.education || [];
                    
                    // æ ¹æ®æŠ€èƒ½å’Œå·¥ä½œç»éªŒç”ŸæˆèŒä½æè¿°
                    if (skills.length > 0) {
                        // ç¡®å®šèŒä½ç±»å‹
                        let jobTitle = 'è½¯ä»¶å·¥ç¨‹å¸ˆ';
                        let jobDescriptionContent = '';
                        
                        // æ ¹æ®æŠ€èƒ½åˆ¤æ–­èŒä½ç±»å‹
                        if (skills.some(skill => skill.includes('å‰ç«¯') || skill.includes('JavaScript') || skill.includes('React') || skill.includes('Vue') || skill.includes('HTML') || skill.includes('CSS'))) {
                            jobTitle = 'å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£å…¬å¸ç½‘ç«™å’ŒWebåº”ç”¨çš„å‰ç«¯å¼€å‘å’Œç»´æŠ¤
2. ä¸åç«¯å¼€å‘äººå‘˜åä½œï¼Œå®ç°æ•°æ®äº¤äº’å’Œé¡µé¢å±•ç¤º
3. ä¼˜åŒ–ç”¨æˆ·ç•Œé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
4. å‚ä¸å‰ç«¯æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œè®¡ç®—æœºç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸Šå‰ç«¯å¼€å‘ç»éªŒ' : 'å…·æœ‰å‰ç«¯å¼€å‘ç»éªŒ'}ï¼Œç†Ÿæ‚‰ç°ä»£å‰ç«¯å¼€å‘æŠ€æœ¯
3. ç†Ÿç»ƒæŒæ¡${skills.filter(skill => skill.includes('JavaScript') || skill.includes('React') || skill.includes('Vue') || skill.includes('HTML') || skill.includes('CSS') || skill.includes('TypeScript')).join('ã€')}ç­‰å‰ç«¯æŠ€æœ¯
4. äº†è§£å‰ç«¯å·¥ç¨‹åŒ–å·¥å…·ï¼Œå¦‚Webpackã€Gitç­‰
5. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
6. æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒè€…ä¼˜å…ˆ`;
                        } else if (skills.some(skill => skill.includes('åç«¯') || skill.includes('Java') || skill.includes('Python') || skill.includes('Node.js') || skill.includes('Spring') || skill.includes('MySQL') || skill.includes('Redis'))) {
                            jobTitle = 'åç«¯å¼€å‘å·¥ç¨‹å¸ˆ';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£å…¬å¸åç«¯ç³»ç»Ÿçš„è®¾è®¡ã€å¼€å‘å’Œç»´æŠ¤
2. ä¸å‰ç«¯å¼€å‘äººå‘˜åä½œï¼Œæä¾›APIæ¥å£
3. ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ
4. å‚ä¸æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œè®¡ç®—æœºç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸Šåç«¯å¼€å‘ç»éªŒ' : 'å…·æœ‰åç«¯å¼€å‘ç»éªŒ'}ï¼Œç†Ÿæ‚‰ç°ä»£åç«¯å¼€å‘æŠ€æœ¯
3. ç†Ÿç»ƒæŒæ¡${skills.filter(skill => skill.includes('Java') || skill.includes('Python') || skill.includes('Node.js') || skill.includes('Spring') || skill.includes('MySQL') || skill.includes('Redis')).join('ã€')}ç­‰åç«¯æŠ€æœ¯
4. äº†è§£åˆ†å¸ƒå¼ç³»ç»Ÿã€å¾®æœåŠ¡æ¶æ„ç­‰æ¦‚å¿µ
5. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
6. æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒè€…ä¼˜å…ˆ`;
                        } else if (skills.some(skill => skill.includes('äº§å“') || skill.includes('è®¾è®¡') || skill.includes('ç”¨æˆ·') || skill.includes('éœ€æ±‚') || skill.includes('ç®¡ç†'))) {
                            jobTitle = 'äº§å“ç»ç†';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£äº§å“çš„è§„åˆ’ã€è®¾è®¡å’Œè¿­ä»£
2. ä¸ç”¨æˆ·å’Œä¸šåŠ¡æ–¹æ²Ÿé€šï¼Œæ”¶é›†å’Œåˆ†æéœ€æ±‚
3. ç¼–å†™äº§å“éœ€æ±‚æ–‡æ¡£ï¼Œè®¾è®¡äº§å“åŸå‹
4. ä¸å¼€å‘å’Œè®¾è®¡å›¢é˜Ÿåä½œï¼Œæ¨åŠ¨äº§å“è½åœ°
5. è·Ÿè¸ªäº§å“ä¸Šçº¿åçš„è¡¨ç°ï¼ŒæŒç»­ä¼˜åŒ–

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œè®¡ç®—æœºã€è®¾è®¡æˆ–ç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸Šäº§å“ç»ç†ç»éªŒ' : 'å…·æœ‰äº§å“ç»ç†ç»éªŒ'}ï¼Œç†Ÿæ‚‰äº§å“å¼€å‘æµç¨‹
3. ç†Ÿç»ƒæŒæ¡${skills.filter(skill => skill.includes('äº§å“') || skill.includes('è®¾è®¡') || skill.includes('ç”¨æˆ·') || skill.includes('éœ€æ±‚') || skill.includes('ç®¡ç†')).join('ã€')}ç­‰æŠ€èƒ½
4. äº†è§£ç”¨æˆ·ç ”ç©¶ã€æ•°æ®åˆ†æç­‰æ–¹æ³•
5. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
6. æœ‰æˆåŠŸäº§å“ç»éªŒè€…ä¼˜å…ˆ`;
                        } else if (skills.some(skill => skill.includes('UI') || skill.includes('è®¾è®¡') || skill.includes('Figma') || skill.includes('Photoshop') || skill.includes('Illustrator'))) {
                            jobTitle = 'UIè®¾è®¡å¸ˆ';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£äº§å“çš„UIè®¾è®¡å’Œè§†è§‰é£æ ¼å®šä¹‰
2. ä¸äº§å“å’Œå¼€å‘å›¢é˜Ÿåä½œï¼Œç†è§£äº§å“éœ€æ±‚
3. è®¾è®¡ç”¨æˆ·ç•Œé¢ï¼ŒåŒ…æ‹¬é¡µé¢å¸ƒå±€ã€äº¤äº’æµç¨‹ç­‰
4. åˆ¶ä½œè®¾è®¡åŸå‹å’Œè§„èŒƒæ–‡æ¡£
5. å‚ä¸è®¾è®¡è¯„å®¡å’Œç”¨æˆ·æµ‹è¯•

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œè®¾è®¡æˆ–ç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸ŠUIè®¾è®¡ç»éªŒ' : 'å…·æœ‰UIè®¾è®¡ç»éªŒ'}ï¼Œç†Ÿæ‚‰ç°ä»£è®¾è®¡å·¥å…·å’Œæ–¹æ³•
3. ç†Ÿç»ƒæŒæ¡${skills.filter(skill => skill.includes('UI') || skill.includes('è®¾è®¡') || skill.includes('Figma') || skill.includes('Photoshop') || skill.includes('Illustrator')).join('ã€')}ç­‰è®¾è®¡å·¥å…·
4. äº†è§£ç”¨æˆ·ä½“éªŒè®¾è®¡åŸåˆ™
5. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
6. æœ‰æˆåŠŸè®¾è®¡æ¡ˆä¾‹è€…ä¼˜å…ˆ`;
                        } else if (skills.some(skill => skill.includes('æ•°æ®') || skill.includes('åˆ†æ') || skill.includes('Python') || skill.includes('SQL') || skill.includes('æœºå™¨å­¦ä¹ '))) {
                            jobTitle = 'æ•°æ®åˆ†æå¸ˆ';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£å…¬å¸ä¸šåŠ¡æ•°æ®çš„æ”¶é›†ã€æ¸…æ´—å’Œåˆ†æ
2. ä¸ä¸šåŠ¡æ–¹æ²Ÿé€šï¼Œç†è§£åˆ†æéœ€æ±‚
3. è®¾è®¡å’Œæ‰§è¡Œæ•°æ®åˆ†ææ–¹æ¡ˆï¼Œç”Ÿæˆåˆ†ææŠ¥å‘Š
4. å‘ç°ä¸šåŠ¡é—®é¢˜å’Œæœºä¼šï¼Œæä¾›æ•°æ®é©±åŠ¨çš„å»ºè®®
5. å‚ä¸æ•°æ®äº§å“çš„è®¾è®¡å’Œå¼€å‘

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œç»Ÿè®¡å­¦ã€æ•°å­¦ã€è®¡ç®—æœºæˆ–ç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸Šæ•°æ®åˆ†æç»éªŒ' : 'å…·æœ‰æ•°æ®åˆ†æç»éªŒ'}ï¼Œç†Ÿæ‚‰æ•°æ®åˆ†ææ–¹æ³•å’Œå·¥å…·
3. ç†Ÿç»ƒæŒæ¡${skills.filter(skill => skill.includes('æ•°æ®') || skill.includes('åˆ†æ') || skill.includes('Python') || skill.includes('SQL') || skill.includes('æœºå™¨å­¦ä¹ ')).join('ã€')}ç­‰æŠ€èƒ½
4. äº†è§£æ•°æ®å¯è§†åŒ–å·¥å…·å’ŒæŠ€æœ¯
5. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
6. æœ‰å¤§å‹æ•°æ®é›†åˆ†æç»éªŒè€…ä¼˜å…ˆ`;
                        } else {
                            // é»˜è®¤èŒä½æè¿°
                            jobTitle = 'è½¯ä»¶å·¥ç¨‹å¸ˆ';
                            jobDescriptionContent = `å²—ä½èŒè´£ï¼š
1. è´Ÿè´£å…¬å¸ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤
2. ä¸å›¢é˜Ÿæˆå‘˜åä½œï¼Œå®Œæˆå¼€å‘ä»»åŠ¡
3. ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ
4. å‚ä¸æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡

ä»»èŒè¦æ±‚ï¼š
1. ${education.length > 0 ? education[0].institution + ' ' + education[0].major + ' ' + education[0].degree : 'æœ¬ç§‘åŠä»¥ä¸Šå­¦å†'}ï¼Œè®¡ç®—æœºç›¸å…³ä¸“ä¸š
2. ${workExperience.length > 0 ? workExperience.length + 'å¹´ä»¥ä¸Šå¼€å‘ç»éªŒ' : 'å…·æœ‰å¼€å‘ç»éªŒ'}ï¼Œç†Ÿæ‚‰ç°ä»£å¼€å‘æŠ€æœ¯
3. ç†Ÿç»ƒæŒæ¡${skills.slice(0, 5).join('ã€')}ç­‰æŠ€èƒ½
4. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥
5. æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒè€…ä¼˜å…ˆ`;
                        }
                        
                        generatedJobDescription = `# ${jobTitle}\n\n${jobDescriptionContent}`;
                    } else {
                        // å¦‚æœæ²¡æœ‰æŠ€èƒ½ä¿¡æ¯ï¼Œç”Ÿæˆé»˜è®¤èŒä½æè¿°
                        generatedJobDescription = `# è½¯ä»¶å·¥ç¨‹å¸ˆ\n\nå²—ä½èŒè´£ï¼š\n1. è´Ÿè´£å…¬å¸ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤\n2. ä¸å›¢é˜Ÿæˆå‘˜åä½œï¼Œå®Œæˆå¼€å‘ä»»åŠ¡\n3. ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ\n4. å‚ä¸æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡\n\nä»»èŒè¦æ±‚ï¼š\n1. æœ¬ç§‘åŠä»¥ä¸Šå­¦å†ï¼Œè®¡ç®—æœºç›¸å…³ä¸“ä¸š\n2. å…·æœ‰å¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰ç°ä»£å¼€å‘æŠ€æœ¯\n3. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥\n4. æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒè€…ä¼˜å…ˆ`;
                    }
                } else {
                    // å¦‚æœæ²¡æœ‰è§£ææ•°æ®ï¼Œç”Ÿæˆé»˜è®¤èŒä½æè¿°
                    generatedJobDescription = `# è½¯ä»¶å·¥ç¨‹å¸ˆ\n\nå²—ä½èŒè´£ï¼š\n1. è´Ÿè´£å…¬å¸ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤\n2. ä¸å›¢é˜Ÿæˆå‘˜åä½œï¼Œå®Œæˆå¼€å‘ä»»åŠ¡\n3. ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½ï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šè¿è¡Œ\n4. å‚ä¸æŠ€æœ¯é€‰å‹å’Œæ¶æ„è®¾è®¡\n\nä»»èŒè¦æ±‚ï¼š\n1. æœ¬ç§‘åŠä»¥ä¸Šå­¦å†ï¼Œè®¡ç®—æœºç›¸å…³ä¸“ä¸š\n2. å…·æœ‰å¼€å‘ç»éªŒï¼Œç†Ÿæ‚‰ç°ä»£å¼€å‘æŠ€æœ¯\n3. å…·æœ‰è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥\n4. æœ‰å¤§å‹é¡¹ç›®å¼€å‘ç»éªŒè€…ä¼˜å…ˆ`;
                }
                
                // å¡«å……ç›®æ ‡èŒä½æè¿°
                jobDescription.value = generatedJobDescription;
                
            } catch (error) {
                console.error('è‡ªåŠ¨å¡«å……èŒä½æè¿°å¤±è´¥:', error);
            }
        }

        // è¯»å–æ–‡ä»¶ä¸ºBase64
        function readFileAsBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => {
                    // ç§»é™¤data URLå‰ç¼€ï¼Œåªä¿ç•™Base64å†…å®¹
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // å¯¼èˆªåŠŸèƒ½
        function navigateTo(page, event) {
            console.log('å¯¼èˆªåˆ°:', page);
            
            // ç¡®ä¿eventå¯¹è±¡å­˜åœ¨å¹¶é˜»æ­¢é»˜è®¤è¡Œä¸º
            if (event) {
                event.preventDefault();
            }
            
            // æ›´æ–°ä¾§è¾¹æ activeçŠ¶æ€
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // æ ¹æ®é¡µé¢åç§°æ‰¾åˆ°å¯¹åº”çš„ä¾§è¾¹æ é¡¹å¹¶æ¿€æ´»
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            const pageNames = {
                'home': 'é¦–é¡µ',
                'resume': 'ç®€å†ä¼˜åŒ–',
                'resumeManage': 'ç®€å†ç®¡ç†',
                'jobs': 'èŒä½åŒ¹é…',
                'delivery': 'æ™ºèƒ½æŠ•é€’',
                'records': 'æ™ºèƒ½æŠ•é€’',
                'interview': 'é¢è¯•æ•™ç»ƒ',
                'analytics': 'æ•°æ®åˆ†æ',
                'settings': 'ç³»ç»Ÿè®¾ç½®'
            };
            
            const targetName = pageNames[page];
            if (targetName) {
                sidebarItems.forEach(item => {
                    const textNodes = Array.from(item.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim());
                    const menuText = textNodes.length > 0 ? textNodes[0].textContent.trim() : '';
                    if (menuText === targetName) {
                        item.classList.add('active');
                    }
                });
            }
            
            // æ›´æ–°URL hash
            if (page !== 'home') {
                window.location.hash = page;
            } else {
                window.location.hash = '';
            }
            
            // æ ¹æ®é¡µé¢æ˜¾ç¤ºä¸åŒå†…å®¹
            switch(page) {
                case 'home':
                    showHomePage();
                    break;
                case 'resume':
                    showResumePage();
                    break;
                case 'resumeManage':
                    showResumeManagePage();
                    break;
                case 'jobs':
                    showJobsPage();
                    break;
                case 'delivery':
                    showDeliveryPage();
                    break;
                case 'records':
                    showRecordsPage();
                    break;
                case 'interview':
                    showInterviewPage();
                    break;
                case 'analytics':
                    showAnalyticsPage();
                    break;
                case 'config':
                    // æ¨¡å‹é…ç½®é¡µé¢ä¼šè·³è½¬åˆ°æ–°é¡µé¢
                    break;
                case 'settings':
                    showSettingsPage();
                    break;
            }
        }

        function showResumePage() {
            console.log('æ˜¾ç¤ºç®€å†ä¼˜åŒ–é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºç®€å†ä¼˜åŒ–é¡µé¢
            const resumeSection = document.getElementById('resumeSection');
            if (resumeSection) {
                resumeSection.style.display = 'block';
                // è‡ªåŠ¨åŠ è½½ç®€å†åˆ—è¡¨ï¼ˆä¸æ˜¾ç¤ºé€šçŸ¥ï¼‰
                refreshResumes(false);
            }
        }

        function showJobsPage() {
            console.log('æ˜¾ç¤ºèŒä½åŒ¹é…é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºèŒä½åŒ¹é…é¡µé¢
            const jobsSection = document.getElementById('jobsSection');
            if (jobsSection) {
                jobsSection.style.display = 'block';
            }
            
            // åŠ è½½ç®€å†æ•°æ®å¹¶å¡«å……é€‰æ‹©å™¨
            loadResumesForAnalysis();
        }
        
        // åŠ è½½ç®€å†æ•°æ®ç”¨äºåˆ†æ
        async function loadResumesForAnalysis() {
            const resumeSelector = document.getElementById('resumeForAnalysis');
            if (!resumeSelector) return;
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                resumeSelector.innerHTML = '<option value="">åŠ è½½ä¸­...</option>';
                
                // ä»APIè·å–ç®€å†åˆ—è¡¨
                const response = await fetch(`${API_BASE}/api/resume/list`, {
                    method: 'GET'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    // æ›´æ–°æœ¬åœ°ç®€å†æ•°æ®
                    resumeData = result.data || [];
                    
                    // å¡«å……ç®€å†é€‰æ‹©ä¸‹æ‹‰æ¡†
                    populateResumeSelectorForAnalysis();
                } else {
                    throw new Error(result.error || 'è·å–ç®€å†åˆ—è¡¨å¤±è´¥');
                }
            } catch (error) {
                console.error('åŠ è½½ç®€å†åˆ—è¡¨å¤±è´¥:', error);
                resumeSelector.innerHTML = '<option value="">æš‚æ— ç®€å†æ•°æ®</option>';
            }
        }
        
        // å¡«å……èŒä½åŒ¹é…é¡µé¢çš„ç®€å†é€‰æ‹©å™¨
        function populateResumeSelectorForAnalysis() {
            const resumeSelector = document.getElementById('resumeForAnalysis');
            if (!resumeSelector) return;
            
            let options = '<option value="">è¯·é€‰æ‹©è¦åˆ†æçš„ç®€å†</option>';
            
            resumeData.forEach(resume => {
                options += `
                    <option value="${resume.id}">
                        ${resume.fileName} (${(resume.fileSize / 1024 / 1024).toFixed(2)}MB)
                    </option>
                `;
            });
            
            resumeSelector.innerHTML = options;
        }
        
        // åˆ†æç®€å†ä¸èŒä½åŒ¹é…åº¦
        async function analyzeResumeMatch() {
            const resumeSelector = document.getElementById('resumeForAnalysis');
            const jobInput = document.getElementById('jobForAnalysis');
            const analysisResult = document.getElementById('analysisResult');
            
            if (!resumeSelector.value) {
                showNotification('è¯·é€‰æ‹©è¦åˆ†æçš„ç®€å†', 'warning');
                return;
            }
            
            if (!jobInput.value.trim()) {
                showNotification('è¯·è¾“å…¥ç›®æ ‡èŒä½', 'warning');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            analysisResult.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 32px; margin-bottom: 16px;">â³</div>
                    <h4>æ­£åœ¨åˆ†æä¸­...</h4>
                    <p style="margin-top: 8px; color: var(--text-secondary);">ç³»ç»Ÿæ­£åœ¨æ ¹æ®æ‚¨çš„ç®€å†ä¸å¤–éƒ¨æ‹›è˜å¹³å°çš„æ•°æ®è¿›è¡ŒåŒ¹é…å’Œè¯„ä¼°</p>
                </div>
            `;
            
            // æ¨¡æ‹Ÿåˆ†æè¿‡ç¨‹
            setTimeout(() => {
                const matchScore = Math.floor(Math.random() * 30) + 70; // 70-99çš„éšæœºåˆ†æ•°
                const jobTitle = jobInput.value.trim();
                
                analysisResult.innerHTML = `
                    <div style="background: white; padding: 24px; border-radius: var(--border-radius);">
                        <h4 style="margin-bottom: 24px; font-size: 18px; font-weight: 600;">åŒ¹é…åº¦åˆ†æç»“æœ</h4>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                            <div style="background: rgba(82, 196, 26, 0.1); padding: 20px; border-radius: var(--border-radius); text-align: center;">
                                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">ç»¼åˆåŒ¹é…åº¦</div>
                                <div style="font-size: 36px; font-weight: bold; color: var(--success-color);">${matchScore}%</div>
                            </div>
                            <div style="background: rgba(24, 144, 255, 0.1); padding: 20px; border-radius: var(--border-radius); text-align: center;">
                                <div style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">ç›®æ ‡èŒä½</div>
                                <div style="font-size: 18px; font-weight: bold; color: var(--primary-color);">${jobTitle}</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <h5 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">æŠ€èƒ½åŒ¹é…åˆ†æ</h5>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <span>ä¸“ä¸šæŠ€èƒ½</span>
                                        <span style="color: var(--success-color);">${Math.floor(Math.random() * 20) + 80}%</span>
                                    </div>
                                    <div style="background: #e8e8e8; border-radius: 4px; height: 8px;">
                                        <div style="background: var(--success-color); height: 100%; border-radius: 4px; width: ${Math.floor(Math.random() * 20) + 80}%;"></div>
                                    </div>
                                </div>
                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <span>å·¥ä½œç»éªŒ</span>
                                        <span style="color: var(--primary-color);">${Math.floor(Math.random() * 20) + 75}%</span>
                                    </div>
                                    <div style="background: #e8e8e8; border-radius: 4px; height: 8px;">
                                        <div style="background: var(--primary-color); height: 100%; border-radius: 4px; width: ${Math.floor(Math.random() * 20) + 75}%;"></div>
                                    </div>
                                </div>
                                <div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                        <span>å­¦å†èƒŒæ™¯</span>
                                        <span style="color: var(--primary-color);">${Math.floor(Math.random() * 20) + 70}%</span>
                                    </div>
                                    <div style="background: #e8e8e8; border-radius: 4px; height: 8px;">
                                        <div style="background: var(--primary-color); height: 100%; border-radius: 4px; width: ${Math.floor(Math.random() * 20) + 70}%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <h5 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">æ”¹è¿›å»ºè®®</h5>
                            <ul style="list-style: none; padding: 0; line-height: 1.8;">
                                <li style="margin-bottom: 8px;">â€¢ å»ºè®®åœ¨ç®€å†ä¸­çªå‡ºä¸${jobTitle}ç›¸å…³çš„é¡¹ç›®ç»éªŒ</li>
                                <li style="margin-bottom: 8px;">â€¢ å¯ä»¥è¡¥å……æ›´å¤šè¯¥èŒä½æ‰€éœ€çš„æŠ€èƒ½å…³é”®è¯</li>
                                <li style="margin-bottom: 8px;">â€¢ å»ºè®®é‡åŒ–å·¥ä½œæˆæœï¼Œç”¨æ•°æ®å±•ç¤ºèƒ½åŠ›</li>
                                <li style="margin-bottom: 8px;">â€¢ å¯ä»¥é’ˆå¯¹ç›®æ ‡èŒä½è°ƒæ•´ç®€å†ç»“æ„</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h5 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">å¯èƒ½çš„é¢è¯•é—®é¢˜é¢„æµ‹</h5>
                            <ul style="list-style: none; padding: 0; line-height: 1.8;">
                                <li style="margin-bottom: 8px;">â€¢ è¯·ä»‹ç»ä¸€ä¸‹æ‚¨åœ¨${jobTitle}ç›¸å…³é¢†åŸŸçš„å·¥ä½œç»éªŒ</li>
                                <li style="margin-bottom: 8px;">â€¢ æ‚¨è®¤ä¸º${jobTitle}æœ€é‡è¦çš„æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ</li>
                                <li style="margin-bottom: 8px;">â€¢ è¯·æè¿°ä¸€ä¸ªæ‚¨æˆåŠŸå®Œæˆçš„ç›¸å…³é¡¹ç›®</li>
                            </ul>
                        </div>
                    </div>
                `;
            }, 2000);
        }
        
        // åŠ è½½è¡Œä¸šç‰¹å®šé¢è¯•é—®é¢˜
        function loadIndustryQuestions() {
            const industrySelect = document.getElementById('industrySelect');
            const questionsList = document.getElementById('industryQuestionsList');
            
            if (!industrySelect || !questionsList) return;
            
            const industry = industrySelect.value;
            
            // ä¸åŒè¡Œä¸šçš„é¢è¯•é—®é¢˜æ•°æ®
            const questionsData = {
                general: {
                    title: 'é€šç”¨é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'è¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±ã€‚',
                            tip: 'å»ºè®®ä»æ•™è‚²èƒŒæ™¯ã€å·¥ä½œç»éªŒã€æ ¸å¿ƒæŠ€èƒ½å’ŒèŒä¸šç›®æ ‡ç­‰æ–¹é¢è¿›è¡Œä»‹ç»ï¼Œé‡ç‚¹çªå‡ºä¸ç›®æ ‡èŒä½ç›¸å…³çš„å†…å®¹ã€‚'
                        },
                        {
                            question: 'ä¸ºä»€ä¹ˆæƒ³åŠ å…¥æˆ‘ä»¬å…¬å¸ï¼Ÿ',
                            tip: 'å»ºè®®ä»å…¬å¸æ–‡åŒ–ã€ä¸šåŠ¡å‘å±•ã€ä¸ªäººèŒä¸šè§„åˆ’ç­‰æ–¹é¢è¿›è¡Œå›ç­”ï¼Œå±•ç¤ºä½ å¯¹å…¬å¸çš„äº†è§£å’Œè¯šæ„ã€‚'
                        },
                        {
                            question: 'ä½ çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿æ˜¯ä»€ä¹ˆï¼Ÿ',
                            tip: 'ä¼˜åŠ¿è¦ä¸èŒä½è¦æ±‚ç›¸å…³ï¼ŒåŠ£åŠ¿è¦çœŸå®ä½†ä¸å½±å“æ ¸å¿ƒå·¥ä½œèƒ½åŠ›ï¼ŒåŒæ—¶è¦è¯´æ˜å¦‚ä½•æ”¹è¿›ã€‚'
                        },
                        {
                            question: 'ä½ çš„èŒä¸šè§„åˆ’æ˜¯ä»€ä¹ˆï¼Ÿ',
                            tip: 'å»ºè®®ç»“åˆå…¬å¸å‘å±•å’Œä¸ªäººæˆé•¿è¿›è¡Œå›ç­”ï¼Œå±•ç¤ºä½ å¯¹æœªæ¥çš„æ¸…æ™°è§„åˆ’å’Œé•¿æœŸå‘å±•æ„æ„¿ã€‚'
                        }
                    ]
                },
                tech: {
                    title: 'æŠ€æœ¯å²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'è¯·ä»‹ç»ä¸€ä¸ªä½ å‚ä¸è¿‡çš„æŠ€æœ¯é¡¹ç›®ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼ˆæƒ…å¢ƒã€ä»»åŠ¡ã€è¡ŒåŠ¨ã€ç»“æœï¼‰æ¥ç»„ç»‡å›ç­”ï¼Œçªå‡ºä½ çš„æŠ€æœ¯è´¡çŒ®å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•ä¿æŒæŠ€æœ¯èƒ½åŠ›çš„æ›´æ–°ï¼Ÿ',
                            tip: 'æåŠä½ å…³æ³¨çš„æŠ€æœ¯åšå®¢ã€å¼€æºé¡¹ç›®ã€æŠ€æœ¯ç¤¾åŒºå‚ä¸ç­‰ï¼Œå±•ç¤ºä½ çš„å­¦ä¹ çƒ­æƒ…å’Œæ–¹æ³•ã€‚'
                        },
                        {
                            question: 'æè¿°ä¸€æ¬¡ä½ è§£å†³å¤æ‚æŠ€æœ¯é—®é¢˜çš„ç»å†ã€‚',
                            tip: 'è¯¦ç»†è¯´æ˜é—®é¢˜èƒŒæ™¯ã€åˆ†æè¿‡ç¨‹ã€è§£å†³æ–¹æ¡ˆå’Œæœ€ç»ˆæ•ˆæœï¼Œä½“ç°ä½ çš„æŠ€æœ¯æ€ç»´å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'ä½ ç†Ÿæ‚‰å“ªäº›ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶ï¼Ÿ',
                            tip: 'æ ¹æ®èŒä½è¦æ±‚é‡ç‚¹ä»‹ç»ç›¸å…³æŠ€æœ¯æ ˆï¼Œå¹¶æä¾›å®é™…é¡¹ç›®ç»éªŒä½œä¸ºæ”¯æ’‘ã€‚'
                        }
                    ]
                },
                management: {
                    title: 'ç®¡ç†å²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'ä½ å¦‚ä½•ç®¡ç†å›¢é˜Ÿï¼Ÿ',
                            tip: 'ä»ç›®æ ‡è®¾å®šã€ä»»åŠ¡åˆ†é…ã€å›¢é˜Ÿæ¿€åŠ±ã€ç»©æ•ˆç®¡ç†ç­‰æ–¹é¢è¿›è¡Œå›ç­”ï¼Œå±•ç¤ºä½ çš„ç®¡ç†ç†å¿µå’Œæ–¹æ³•ã€‚'
                        },
                        {
                            question: 'å¦‚ä½•å¤„ç†å›¢é˜Ÿå†²çªï¼Ÿ',
                            tip: 'ä¸¾ä¾‹è¯´æ˜ä½ å¤„ç†è¿‡çš„å…·ä½“å†²çªæ¡ˆä¾‹ï¼Œå¼ºè°ƒæ²Ÿé€šã€åè°ƒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•æ¿€åŠ±å›¢é˜Ÿæˆå‘˜ï¼Ÿ',
                            tip: 'ç»“åˆç‰©è´¨æ¿€åŠ±å’Œç²¾ç¥æ¿€åŠ±ï¼Œè¯´æ˜ä½ å¦‚ä½•æ ¹æ®ä¸åŒæˆå‘˜çš„ç‰¹ç‚¹é‡‡å–ä¸åŒçš„æ¿€åŠ±æ–¹å¼ã€‚'
                        },
                        {
                            question: 'è¯·æè¿°ä¸€æ¬¡ä½ å¸¦é¢†å›¢é˜Ÿå®ŒæˆæŒ‘æˆ˜æ€§ç›®æ ‡çš„ç»å†ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼Œçªå‡ºä½ çš„é¢†å¯¼åŠ›ã€å†³ç­–èƒ½åŠ›å’Œå›¢é˜Ÿåä½œèƒ½åŠ›ã€‚'
                        }
                    ]
                },
                sales: {
                    title: 'é”€å”®å²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'ä½ å¦‚ä½•å¼€å‘æ–°å®¢æˆ·ï¼Ÿ',
                            tip: 'è¯´æ˜ä½ çš„å®¢æˆ·å¼€å‘æ¸ é“ã€æ–¹æ³•å’ŒæŠ€å·§ï¼Œå±•ç¤ºä½ çš„å¸‚åœºå¼€æ‹“èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'å¦‚ä½•å¤„ç†å®¢æˆ·å¼‚è®®ï¼Ÿ',
                            tip: 'ä¸¾ä¾‹è¯´æ˜ä½ å¤„ç†å®¢æˆ·å¼‚è®®çš„å…·ä½“æ–¹æ³•ï¼Œå¼ºè°ƒå€¾å¬ã€ç†è§£å’Œè§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•å®Œæˆé”€å”®ç›®æ ‡ï¼Ÿ',
                            tip: 'ä»ç›®æ ‡åˆ†è§£ã€è®¡åˆ’åˆ¶å®šã€æ‰§è¡Œè·Ÿè¸ªã€ç»“æœå¤ç›˜ç­‰æ–¹é¢è¿›è¡Œå›ç­”ã€‚'
                        },
                        {
                            question: 'è¯·åˆ†äº«ä¸€æ¬¡æˆåŠŸçš„é”€å”®æ¡ˆä¾‹ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼Œè¯¦ç»†æè¿°å®¢æˆ·èƒŒæ™¯ã€é”€å”®è¿‡ç¨‹ã€å…³é”®å†³ç­–ç‚¹å’Œæœ€ç»ˆç»“æœã€‚'
                        }
                    ]
                },
                marketing: {
                    title: 'å¸‚åœºå²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'ä½ å¦‚ä½•åˆ¶å®šå¸‚åœºæ¨å¹¿ç­–ç•¥ï¼Ÿ',
                            tip: 'ä»å¸‚åœºåˆ†æã€ç›®æ ‡è®¾å®šã€ç­–ç•¥åˆ¶å®šã€æ‰§è¡Œè®¡åˆ’ã€æ•ˆæœè¯„ä¼°ç­‰æ–¹é¢è¿›è¡Œå›ç­”ã€‚'
                        },
                        {
                            question: 'å¦‚ä½•è¯„ä¼°è¥é”€æ´»åŠ¨çš„æ•ˆæœï¼Ÿ',
                            tip: 'æåŠå…³é”®æŒ‡æ ‡å¦‚ROIã€è½¬åŒ–ç‡ã€å“ç‰Œæ›å…‰åº¦ç­‰ï¼Œå±•ç¤ºä½ çš„æ•°æ®åˆ†æèƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•è¿›è¡Œç«å“åˆ†æï¼Ÿ',
                            tip: 'è¯´æ˜ä½ çš„åˆ†ææ¡†æ¶ã€æ•°æ®æ¥æºå’Œå®é™…åº”ç”¨ï¼Œå±•ç¤ºä½ çš„å¸‚åœºæ´å¯Ÿèƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'è¯·ä»‹ç»ä¸€ä¸ªä½ ç­–åˆ’çš„æˆåŠŸè¥é”€æ´»åŠ¨ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼Œçªå‡ºä½ çš„åˆ›æ„èƒ½åŠ›ã€æ‰§è¡Œèƒ½åŠ›å’Œç»“æœå¯¼å‘æ€ç»´ã€‚'
                        }
                    ]
                },
                finance: {
                    title: 'è´¢åŠ¡å²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'ä½ å¦‚ä½•è¿›è¡Œè´¢åŠ¡åˆ†æï¼Ÿ',
                            tip: 'è¯´æ˜ä½ çš„åˆ†ææ–¹æ³•ã€ä½¿ç”¨çš„è´¢åŠ¡æŒ‡æ ‡å’Œå·¥å…·ï¼Œå±•ç¤ºä½ çš„ä¸“ä¸šèƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'å¦‚ä½•ç¡®ä¿è´¢åŠ¡æ•°æ®çš„å‡†ç¡®æ€§ï¼Ÿ',
                            tip: 'ä»æ•°æ®æ”¶é›†ã€æ ¸å¯¹ã€å®¡è®¡ç­‰ç¯èŠ‚è¯´æ˜ä½ çš„è´¨é‡æ§åˆ¶æ–¹æ³•ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•è¿›è¡Œé¢„ç®—ç®¡ç†ï¼Ÿ',
                            tip: 'ä»é¢„ç®—ç¼–åˆ¶ã€æ‰§è¡Œç›‘æ§ã€å·®å¼‚åˆ†æç­‰æ–¹é¢è¿›è¡Œå›ç­”ã€‚'
                        },
                        {
                            question: 'è¯·æè¿°ä¸€æ¬¡ä½ å‘ç°å¹¶è§£å†³è´¢åŠ¡é—®é¢˜çš„ç»å†ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼Œçªå‡ºä½ çš„ä¸“ä¸šåˆ¤æ–­å’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚'
                        }
                    ]
                },
                hr: {
                    title: 'HRå²—ä½é¢è¯•é—®é¢˜',
                    questions: [
                        {
                            question: 'ä½ å¦‚ä½•è¿›è¡Œäººæ‰æ‹›è˜ï¼Ÿ',
                            tip: 'ä»éœ€æ±‚åˆ†æã€æ¸ é“é€‰æ‹©ã€ç®€å†ç­›é€‰ã€é¢è¯•è¯„ä¼°ç­‰æ–¹é¢è¿›è¡Œå›ç­”ã€‚'
                        },
                        {
                            question: 'å¦‚ä½•è®¾è®¡åŸ¹è®­ä½“ç³»ï¼Ÿ',
                            tip: 'è¯´æ˜ä½ çš„åŸ¹è®­éœ€æ±‚åˆ†æã€è¯¾ç¨‹è®¾è®¡ã€æ•ˆæœè¯„ä¼°ç­‰æ–¹æ³•ã€‚'
                        },
                        {
                            question: 'ä½ å¦‚ä½•å¤„ç†å‘˜å·¥å…³ç³»é—®é¢˜ï¼Ÿ',
                            tip: 'ä¸¾ä¾‹è¯´æ˜ä½ å¤„ç†è¿‡çš„å…·ä½“æ¡ˆä¾‹ï¼Œå¼ºè°ƒæ²Ÿé€šã€åè°ƒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ã€‚'
                        },
                        {
                            question: 'è¯·ä»‹ç»ä¸€æ¬¡ä½ æˆåŠŸæ¨åŠ¨çš„HRé¡¹ç›®ã€‚',
                            tip: 'ä½¿ç”¨STARæ³•åˆ™ï¼Œçªå‡ºä½ çš„é¡¹ç›®ç®¡ç†èƒ½åŠ›å’Œç»“æœå¯¼å‘æ€ç»´ã€‚'
                        }
                    ]
                }
            };
            
            const data = questionsData[industry] || questionsData.general;
            
            let html = `
                <div style="background: white; padding: 20px; border-radius: var(--border-radius);">
                    <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">${data.title}</h4>
                    <ul style="list-style: none; padding: 0;">
            `;
            
            data.questions.forEach((q, index) => {
                html += `
                    <li style="margin-bottom: 16px; padding-bottom: 16px; ${index < data.questions.length - 1 ? 'border-bottom: 1px solid var(--border-color);' : ''}">
                        <strong>${index + 1}. ${q.question}</strong>
                        <p style="margin-top: 8px; color: var(--text-secondary);">${q.tip}</p>
                    </li>
                `;
            });
            
            html += `
                    </ul>
                </div>
            `;
            
            questionsList.innerHTML = html;
        }

        function showAnalyticsPage() {
            console.log('æ˜¾ç¤ºæ•°æ®åˆ†æé¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºæ•°æ®åˆ†æé¡µé¢
            const analyticsSection = document.getElementById('analyticsSection');
            if (analyticsSection) {
                analyticsSection.style.display = 'block';
            }
        }

        function showSettingsPage() {
            console.log('æ˜¾ç¤ºç³»ç»Ÿè®¾ç½®é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºç³»ç»Ÿè®¾ç½®é¡µé¢
            const settingsSection = document.getElementById('settingsSection');
            if (settingsSection) {
                settingsSection.style.display = 'block';
            }
            
            showNotification('ç³»ç»Ÿè®¾ç½®åŠŸèƒ½å¼€å‘ä¸­...', 'warning');
        }

        function showResumeManagePage() {
            console.log('æ˜¾ç¤ºç®€å†ç®¡ç†é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºç®€å†ç®¡ç†é¡µé¢
            const resumeManageSection = document.getElementById('resumeManageSection');
            if (resumeManageSection) {
                resumeManageSection.style.display = 'block';
                
                // ä»APIè·å–ç®€å†æ•°æ®
                fetchResumeData();
            }
            
            showNotification('ç®€å†ç®¡ç†é¡µé¢å·²æ‰“å¼€', 'info');
        }
        
        // ä»APIè·å–ç®€å†æ•°æ®
        async function fetchResumeData() {
            const resumeListDiv = document.getElementById('resumeList');
            if (resumeListDiv) {
                resumeListDiv.innerHTML = '<div style="display: flex; align-items: center; justify-content: center; gap: 8px;"><span class="loading"></span>æ­£åœ¨åŠ è½½ç®€å†æ•°æ®...</div>';
            }
            
            try {
                const response = await fetch(`${API_BASE}/api/resume/list`, {
                    method: 'GET'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    // æ›´æ–°æœ¬åœ°ç®€å†æ•°æ®
                    resumeData = result.data || [];
                    // æ›´æ–°ç®€å†æ•°é‡æ˜¾ç¤º
                    updateResumeCount();
                    // æ¸²æŸ“ç®€å†åˆ—è¡¨
                    renderResumeList();
                } else {
                    console.error('è·å–ç®€å†æ•°æ®å¤±è´¥:', result.error);
                    resumeListDiv.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--error-color);"><div style="font-size: 48px; margin-bottom: 16px;">âŒ</div><h4>è·å–ç®€å†æ•°æ®å¤±è´¥</h4><p style="margin-top: 8px;">è¯·ç¨åé‡è¯•</p></div>';
                }
            } catch (error) {
                console.error('è·å–ç®€å†æ•°æ®å¤±è´¥:', error);
                if (resumeListDiv) {
                    resumeListDiv.innerHTML = '<div style="text-align: center; padding: 40px; color: var(--error-color);"><div style="font-size: 48px; margin-bottom: 16px;">âŒ</div><h4>ç½‘ç»œé”™è¯¯</h4><p style="margin-top: 8px;">æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥</p></div>';
                }
            }
        }
        
        // æ›´æ–°ç®€å†æ•°é‡æ˜¾ç¤º
        function updateResumeCount() {
            const resumeCountElement = document.getElementById('resumeCount');
            const totalResumesElement = document.getElementById('totalResumes');
            if (resumeCountElement) {
                resumeCountElement.textContent = resumeData.length;
            }
            if (totalResumesElement) {
                totalResumesElement.textContent = resumeData.length;
            }
        }

        function showDeliveryPage() {
            console.log('æ˜¾ç¤ºæ™ºèƒ½èŒä½æŠ•é€’é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºæ™ºèƒ½èŒä½æŠ•é€’é¡µé¢
            const deliverySection = document.getElementById('deliverySection');
            if (deliverySection) {
                deliverySection.style.display = 'block';
            }
            
            // æ£€æŸ¥ç®€å†çŠ¶æ€
            onDeliveryPageLoad();
            
            // åˆå§‹åŒ–ç®€å†é€‰æ‹©å™¨
            initializeResumeSelector();
            // åˆ‡æ¢ç®€å†é€‰æ‹©å™¨çŠ¶æ€
            toggleResumeSelector();
            
            // åŠ è½½æŠ•é€’è®°å½•
            renderDeliveryRecordsTable();
        }
        
        // æ˜¾ç¤ºæŠ•é€’è®°å½•é¡µé¢
        function showRecordsPage() {
            console.log('æ˜¾ç¤ºæŠ•é€’è®°å½•é¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºæŠ•é€’è®°å½•é¡µé¢
            const recordsSection = document.getElementById('recordsSection');
            if (recordsSection) {
                recordsSection.style.display = 'block';
                
                // æ¸²æŸ“æŠ•é€’è®°å½•è¡¨æ ¼
                renderDeliveryRecordsTable();
            }
        }

        function showInterviewPage() {
            console.log('æ˜¾ç¤ºAIé¢è¯•æ•™ç»ƒé¡µé¢');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºAIé¢è¯•æ•™ç»ƒé¡µé¢
            const interviewSection = document.getElementById('interviewSection');
            if (interviewSection) {
                interviewSection.style.display = 'block';
            }
            
            showNotification('AIé¢è¯•æ•™ç»ƒç³»ç»Ÿå·²æ‰“å¼€', 'info');
        }

        // æ£€æµ‹ç®€å†çŠ¶æ€
        async function checkResumeStatus() {
            const statusDiv = document.getElementById('resumeCheckStatus');
            const messageDiv = document.getElementById('resumeCheckMessage');
            
            try {
                // æ£€æŸ¥ç®€å†åº“çŠ¶æ€
                const response = await fetch(`${API_BASE}/api/resume/check`, {
                    method: 'GET'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    const { hasResumes, hasUploaded } = result.data;
                    
                    if (hasResumes && hasUploaded) {
                        statusDiv.style.background = 'rgba(82, 196, 26, 0.05)';
                        statusDiv.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="color: var(--success-color); font-size: 20px;">âœ…</div>
                                <div>
                                    <div style="font-weight: 500;">ç®€å†çŠ¶æ€æ­£å¸¸</div>
                                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">ç®€å†åº“ä¸­æœ‰${result.data.resumeCount}ä»½ç®€å†ï¼Œå·²ä¸Šä¼ æœ€æ–°ç®€å†</div>
                                </div>
                            </div>
                        `;
                        document.getElementById('startDeliveryBtn').disabled = false;
                    } else if (hasResumes) {
                        statusDiv.style.background = 'rgba(250, 173, 20, 0.05)';
                        statusDiv.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="color: var(--warning-color); font-size: 20px;">âš ï¸</div>
                                <div>
                                    <div style="font-weight: 500;">éœ€è¦ä¸Šä¼ ç®€å†</div>
                                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">ç®€å†åº“ä¸­æœ‰ç®€å†ï¼Œä½†éœ€è¦ä¸Šä¼ æœ€æ–°ç‰ˆæœ¬</div>
                                </div>
                            </div>
                        `;
                        document.getElementById('startDeliveryBtn').disabled = true;
                    } else {
                        statusDiv.style.background = 'rgba(245, 34, 45, 0.05)';
                        statusDiv.innerHTML = `
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="color: var(--error-color); font-size: 20px;">âŒ</div>
                                <div>
                                    <div style="font-weight: 500;">æ— å¯ç”¨ç®€å†</div>
                                    <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">ç®€å†åº“ä¸ºç©ºï¼Œè¯·å…ˆä¸Šä¼ ç®€å†</div>
                                </div>
                            </div>
                        `;
                        document.getElementById('startDeliveryBtn').disabled = true;
                    }
                } else {
                    statusDiv.style.background = 'rgba(245, 34, 45, 0.05)';
                    statusDiv.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="color: var(--error-color); font-size: 20px;">âŒ</div>
                            <div>
                                <div style="font-weight: 500;">æ£€æµ‹å¤±è´¥</div>
                                <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">${result.error || 'æ— æ³•æ£€æµ‹ç®€å†çŠ¶æ€'}</div>
                            </div>
                        </div>
                    `;
                    document.getElementById('startDeliveryBtn').disabled = true;
                }
            } catch (error) {
                console.error('ç®€å†æ£€æµ‹å¤±è´¥:', error);
                statusDiv.style.background = 'rgba(245, 34, 45, 0.05)';
                statusDiv.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <div style="color: var(--error-color); font-size: 20px;">âŒ</div>
                        <div>
                            <div style="font-weight: 500;">æ£€æµ‹å¤±è´¥</div>
                            <div style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">${error.message}</div>
                        </div>
                    </div>
                `;
                document.getElementById('startDeliveryBtn').disabled = true;
            }
        }

        // æ‰“å¼€ç½‘ç«™
        function openWebsite() {
            // è·å–é€‰ä¸­çš„å¹³å°
            const selectedPlatforms = [];
            document.querySelectorAll('input[type="checkbox"]:checked[data-platform]').forEach(checkbox => {
                selectedPlatforms.push(checkbox.dataset.platform);
            });
            
            if (selectedPlatforms.length === 0) {
                showNotification('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæŠ•é€’å¹³å°', 'warning');
                return;
            }
            
            const deliveryResult = document.getElementById('deliveryResult');
            const inlineFrameSection = document.getElementById('inlineFrameSection');
            const platformTabs = document.getElementById('platformTabs');
            const deliveryFrame = document.getElementById('deliveryFrame');
            
            deliveryResult.innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading"></div><p style="margin-top: 16px;">æ­£åœ¨æ‰“å¼€ç½‘ç«™...</p></div>';
            
            try {
                // æ˜¾ç¤ºæ‰“å¼€ç½‘ç«™ç»“æœ
                deliveryResult.innerHTML = `
                    <div class="result-grid">
                        <div class="metric-card">
                            <div class="metric-value">${selectedPlatforms.length}</div>
                            <div class="metric-label">å¹³å°æ•°é‡</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>å¹³å°çŠ¶æ€</h5>
                        <div style="background: rgba(82, 196, 26, 0.1); padding: 16px; border-radius: var(--border-radius);">
                            ${selectedPlatforms.map(platform => {
                                const platformNames = {
                                    zhilian: 'æ™ºè”æ‹›è˜',
                                    '51job': 'å‰ç¨‹æ— å¿§',
                                    boss: 'Bossç›´è˜',
                                    lagou: 'æ‹‰å‹¾ç½‘'
                                };
                                return `<div>âœ… ${platformNames[platform]}: å‡†å¤‡å°±ç»ª</div>`;
                            }).join('')}
                        </div>
                    </div>
                `;
                
                // ç”ŸæˆTabæŒ‰é’®
                platformTabs.innerHTML = '';
                selectedPlatforms.forEach((platform, index) => {
                    const platformNames = {
                        zhilian: 'æ™ºè”æ‹›è˜',
                        '51job': 'å‰ç¨‹æ— å¿§',
                        boss: 'Bossç›´è˜',
                        lagou: 'æ‹‰å‹¾ç½‘'
                    };
                    
                    const tab = document.createElement('div');
                    tab.className = `page-item ${index === 0 ? 'active' : ''}`;
                    tab.style.cursor = 'pointer';
                    tab.textContent = platformNames[platform];
                    tab.onclick = () => {
                        // åˆ‡æ¢Tab
                        document.querySelectorAll('#platformTabs .page-item').forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        
                        // æ›´æ–°å†…è”æ¡†æ¶URLï¼Œä¸ä¼ å…¥å‚æ•°
                        let frameUrl = '';
                        switch(platform) {
                            case 'zhilian':
                                frameUrl = `https://sou.zhaopin.com/`;
                                break;
                            case '51job':
                                frameUrl = `https://search.51job.com/`;
                                break;
                            case 'boss':
                                frameUrl = `https://www.zhipin.com/web/geek/job`;
                                break;
                            case 'lagou':
                                frameUrl = `https://www.lagou.com/jobs/list`;
                                break;
                            default:
                                frameUrl = `https://www.zhaopin.com/`;
                        }
                        
                        deliveryFrame.src = frameUrl;
                    };
                    platformTabs.appendChild(tab);
                });
                
                // è®¾ç½®é»˜è®¤å¹³å°URLï¼Œä¸ä¼ å…¥å‚æ•°
                let frameUrl = '';
                const defaultPlatform = selectedPlatforms[0];
                switch(defaultPlatform) {
                    case 'zhilian':
                        frameUrl = `https://sou.zhaopin.com/`;
                        break;
                    case '51job':
                        frameUrl = `https://search.51job.com/`;
                        break;
                    case 'boss':
                        frameUrl = `https://www.zhipin.com/web/geek/job`;
                        break;
                    case 'lagou':
                        frameUrl = `https://www.lagou.com/jobs/list`;
                        break;
                    default:
                        frameUrl = `https://www.zhaopin.com/`;
                }
                
                deliveryFrame.src = frameUrl;
                
                // æ˜¾ç¤ºå†…è”æ¡†æ¶åŒºåŸŸ
                inlineFrameSection.style.display = 'block';
                
                // å¯ç”¨æ‰¹é‡æŠ•é€’æŒ‰é’®
                document.getElementById('batchDeliveryBtn').disabled = false;
                
                showNotification('ç½‘ç«™å·²æ‰“å¼€', 'success');
            } catch (error) {
                console.error('æ‰“å¼€ç½‘ç«™å¤±è´¥:', error);
                deliveryResult.innerHTML = `<div style="text-align: center; color: var(--error-color); padding: 40px;"><div style="font-size: 48px; margin-bottom: 16px;">âŒ</div><h4>æ‰“å¼€ç½‘ç«™å¤±è´¥</h4><p style="margin-top: 8px;">${error.message}</p></div>`;
                showNotification('æ‰“å¼€ç½‘ç«™å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // é‡ç½®æŠ•é€’è®¾ç½®
        function clearDelivery() {
            document.getElementById('targetJob').value = '';
            document.getElementById('targetCity').value = '530'; // é‡ç½®ä¸ºåŒ—äº¬
            document.getElementById('deliveryInterval').value = '5'; // é‡ç½®æŠ•é€’é—´éš”ä¸º5ä¸ª/åˆ†
            document.getElementById('deliveryCount').value = '5'; // é‡ç½®æŠ•é€’æ•°é‡ä¸º5ä¸ª
            document.getElementById('deliveryResult').innerHTML = '';
            
            // éšè—å†…è”æ¡†æ¶åŒºåŸŸ
            document.getElementById('inlineFrameSection').style.display = 'none';
            
            // ç¦ç”¨æ‰¹é‡æŠ•é€’æŒ‰é’®
            document.getElementById('batchDeliveryBtn').disabled = true;
            
            showNotification('æŠ•é€’è®¾ç½®å·²é‡ç½®', 'info');
        }

        // å½“åˆ‡æ¢åˆ°æ™ºèƒ½æŠ•é€’é¡µé¢æ—¶æ£€æŸ¥ç®€å†çŠ¶æ€
        function onDeliveryPageLoad() {
            checkResumeStatus();
        }

        // ä¼ä¸šé»‘åå•ç®¡ç†
        let enterpriseBlacklist = [];
        
        // åˆ†é¡µå˜é‡
        let currentPage = 1;
        const itemsPerPage = 10;
        
        // æ˜¾ç¤ºä¼ä¸šé»‘åå•é¡µé¢
        function showEnterpriseBlacklist() {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºé»‘åå•é¡µé¢
            document.getElementById('blacklistSection').style.display = 'block';
            
            // æ¸²æŸ“é»‘åå•åˆ—è¡¨
            renderBlacklistCompanies();
            
            console.log('æ˜¾ç¤ºä¼ä¸šé»‘åå•é¡µé¢');
        }
        
        // æ·»åŠ ä¼ä¸šåˆ°é»‘åå•
        function addBlacklistCompany() {
            const companyInput = document.getElementById('newBlacklistCompany');
            const companyName = companyInput.value.trim();
            
            if (!companyName) {
                showNotification('è¯·è¾“å…¥ä¼ä¸šåç§°', 'warning');
                return;
            }
            
            if (enterpriseBlacklist.includes(companyName)) {
                showNotification('è¯¥ä¼ä¸šå·²åœ¨é»‘åå•ä¸­', 'warning');
                return;
            }
            
            enterpriseBlacklist.push(companyName);
            companyInput.value = '';
            
            // é‡æ–°æ¸²æŸ“é»‘åå•åˆ—è¡¨
            renderBlacklistCompanies();
            
            showNotification(`å·²å°†"${companyName}"æ·»åŠ åˆ°é»‘åå•`, 'success');
        }
        
        // ä»é»‘åå•ä¸­ç§»é™¤ä¼ä¸š
        function removeBlacklistCompany(companyName) {
            enterpriseBlacklist = enterpriseBlacklist.filter(company => company !== companyName);
            
            // é‡æ–°æ¸²æŸ“é»‘åå•åˆ—è¡¨
            renderBlacklistCompanies();
            
            showNotification(`å·²ä»é»‘åå•ä¸­ç§»é™¤"${companyName}"`, 'success');
        }
        
        // æ¸…ç©ºé»‘åå•
        function clearBlacklist() {
            if (enterpriseBlacklist.length === 0) {
                showNotification('é»‘åå•ä¸ºç©º', 'info');
                return;
            }
            
            if (confirm('ç¡®å®šè¦æ¸…ç©ºä¼ä¸šé»‘åå•å—ï¼Ÿ')) {
                enterpriseBlacklist = [];
                
                // é‡æ–°æ¸²æŸ“é»‘åå•åˆ—è¡¨
                renderBlacklistCompanies();
                
                showNotification('ä¼ä¸šé»‘åå•å·²æ¸…ç©º', 'success');
            }
        }
        
        // æ¸²æŸ“é»‘åå•ä¼ä¸šåˆ—è¡¨
        function renderBlacklistCompanies() {
            const blacklistContainer = document.getElementById('blacklistCompaniesList');
            
            if (enterpriseBlacklist.length === 0) {
                blacklistContainer.innerHTML = `
                    <div style="text-align: center; color: var(--text-tertiary); padding: 40px;">
                        é»‘åå•ä¸ºç©ºï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ä¼ä¸š
                    </div>
                `;
                return;
            }
            
            blacklistContainer.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    ${enterpriseBlacklist.map(company => `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: white; border-radius: var(--border-radius); border: 1px solid var(--border-color);">
                            <span>${company}</span>
                            <button onclick="removeBlacklistCompany('${company}')" class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;">
                                ç§»é™¤
                            </button>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // æ£€æŸ¥ä¼ä¸šæ˜¯å¦åœ¨é»‘åå•ä¸­
        function isCompanyBlacklisted(companyName) {
            return enterpriseBlacklist.some(blacklistedCompany => 
                companyName.includes(blacklistedCompany) || blacklistedCompany.includes(companyName)
            );
        }
        
        // å¼€å§‹æ¨¡æ‹Ÿé¢è¯•
        function startInterview() {
            const interviewJob = document.getElementById('interviewJob').value.trim();
            const questionType = document.getElementById('questionType').value;
            
            if (!interviewJob) {
                showNotification('è¯·è¾“å…¥ç›®æ ‡èŒä½', 'warning');
                return;
            }
            
            const interviewResult = document.getElementById('interviewResult');
            interviewResult.innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading"></div><p style="margin-top: 16px;">æ­£åœ¨ç”Ÿæˆé¢è¯•é—®é¢˜...</p></div>';
            
            // æ¨¡æ‹Ÿé¢è¯•é—®é¢˜ç”Ÿæˆè¿‡ç¨‹
            setTimeout(() => {
                // æ ¹æ®é—®é¢˜ç±»å‹ç”Ÿæˆä¸åŒçš„é¢è¯•é—®é¢˜ï¼ˆéšæœºé€‰æ‹©ï¼‰
                let questions = [];
                
                // æŠ€æœ¯é—®é¢˜åº“
                const technicalQuestions = [
                    `è¯·è§£é‡Šä¸€ä¸‹ä½ å¯¹${interviewJob}æ‰€éœ€æŠ€æœ¯æ ˆçš„ç†è§£`,
                    'æè¿°ä¸€ä¸ªä½ è§£å†³è¿‡çš„æŠ€æœ¯éš¾é¢˜',
                    'ä½ å¦‚ä½•å­¦ä¹ æ–°æŠ€æœ¯ï¼Ÿ',
                    'è¯·æè¿°ä¸€ä¸ªä½ å‚ä¸çš„å¤§å‹é¡¹ç›®',
                    'ä½ å¦‚ä½•å¤„ç†ä»£ç è´¨é‡å’Œå¼€å‘é€Ÿåº¦çš„å¹³è¡¡ï¼Ÿ',
                    'ä½ è®¤ä¸ºè‰¯å¥½çš„ä»£ç è§„èŒƒæœ‰å“ªäº›é‡è¦æ€§ï¼Ÿ',
                    'å¦‚ä½•ä¼˜åŒ–ä¸€ä¸ªæ€§èƒ½ç“¶é¢ˆï¼Ÿ',
                    'ä½ å¯¹æ•æ·å¼€å‘æœ‰ä»€ä¹ˆç†è§£ï¼Ÿ',
                    'å¦‚ä½•è¿›è¡Œæœ‰æ•ˆçš„ä»£ç å®¡æŸ¥ï¼Ÿ',
                    'ä½ å¦‚ä½•å¤„ç†æŠ€æœ¯å€ºåŠ¡ï¼Ÿ'
                ];
                
                // è¡Œä¸ºé—®é¢˜åº“
                const behavioralQuestions = [
                    'æè¿°ä¸€ä¸ªä½ åœ¨å›¢é˜Ÿä¸­é‡åˆ°çš„æŒ‘æˆ˜',
                    'ä½ å¦‚ä½•å¤„ç†å·¥ä½œå‹åŠ›ï¼Ÿ',
                    'ä½ å¦‚ä½•ä¸ä¸åŒèƒŒæ™¯çš„åŒäº‹åˆä½œï¼Ÿ',
                    'æè¿°ä¸€ä¸ªä½ éœ€è¦å¿«é€Ÿé€‚åº”å˜åŒ–çš„åœºæ™¯',
                    'ä½ å¦‚ä½•å¤„ç†å·¥ä½œä¸­çš„å†²çªï¼Ÿ',
                    'æè¿°ä¸€ä¸ªä½ ä¸»åŠ¨æ‰¿æ‹…è´£ä»»çš„ä¾‹å­',
                    'ä½ å¦‚ä½•è®¾å®šå’Œå®ç°èŒä¸šç›®æ ‡ï¼Ÿ',
                    'æè¿°ä¸€ä¸ªä½ å¤±è´¥çš„ç»å†ä»¥åŠä½ ä»ä¸­å­¦åˆ°äº†ä»€ä¹ˆ',
                    'ä½ å¦‚ä½•å¤„ç†åé¦ˆå’Œæ‰¹è¯„ï¼Ÿ',
                    'æè¿°ä¸€ä¸ªä½ éœ€è¦è¯´æœä»–äººçš„åœºæ™¯'
                ];
                
                // æ¡ˆä¾‹é—®é¢˜åº“
                const caseQuestions = [
                    'å¦‚æœæˆ‘ä»¬è¦è¿›å…¥ä¸€ä¸ªæ–°å¸‚åœºï¼Œä½ ä¼šå¦‚ä½•åˆ†æï¼Ÿ',
                    'å¦‚ä½•æé«˜æˆ‘ä»¬äº§å“çš„ç”¨æˆ·ç•™å­˜ç‡ï¼Ÿ',
                    'å¦‚ä½•åˆ¶å®šä¸€ä¸ªæ–°äº§å“çš„å®šä»·ç­–ç•¥ï¼Ÿ',
                    'å¦‚ä½•åº”å¯¹ç«äº‰å¯¹æ‰‹çš„æŒ‘æˆ˜ï¼Ÿ',
                    'å¦‚ä½•ä¼˜åŒ–æˆ‘ä»¬çš„è¿è¥æµç¨‹ï¼Ÿ',
                    'å¦‚ä½•å¤„ç†äº§å“åŠŸèƒ½ä¸èµ„æºé™åˆ¶çš„å¹³è¡¡ï¼Ÿ',
                    'å¦‚ä½•è¯„ä¼°ä¸€ä¸ªæ–°åŠŸèƒ½çš„ä»·å€¼ï¼Ÿ',
                    'å¦‚ä½•åˆ¶å®šä¸€ä¸ªäº§å“çš„å¢é•¿ç­–ç•¥ï¼Ÿ',
                    'å¦‚ä½•å¤„ç†ç”¨æˆ·åé¦ˆå’Œäº§å“ roadmap çš„ä¼˜å…ˆçº§ï¼Ÿ',
                    'å¦‚ä½•åº”å¯¹å¸‚åœºå˜åŒ–å’ŒæŠ€æœ¯è¶‹åŠ¿ï¼Ÿ'
                ];
                
                // éšæœºé€‰æ‹©é—®é¢˜
                function getRandomQuestions(questionBank, count) {
                    const shuffled = [...questionBank].sort(() => 0.5 - Math.random());
                    return shuffled.slice(0, count);
                }
                
                if (questionType === 'technical' || questionType === 'all') {
                    questions = questions.concat(getRandomQuestions(technicalQuestions, 5));
                }
                
                if (questionType === 'behavioral' || questionType === 'all') {
                    questions = questions.concat(getRandomQuestions(behavioralQuestions, 5));
                }
                
                if (questionType === 'case' || questionType === 'all') {
                    questions = questions.concat(getRandomQuestions(caseQuestions, 5));
                }
                
                // å¦‚æœæ˜¯allç±»å‹ï¼Œåªå–éƒ¨åˆ†é—®é¢˜é¿å…è¿‡å¤š
                if (questionType === 'all') {
                    questions = getRandomQuestions(questions, 8);
                }
                
                interviewResult.innerHTML = `
                    <div style="margin-top: 24px;">
                        <h5>é¢è¯•é—®é¢˜</h5>
                        <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius);">
                            ${questions.map((q, i) => `<div style="margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid rgba(24, 144, 255, 0.1);">
                                <strong>${i + 1}. ${q}</strong>
                                <div style="margin-top: 12px;">
                                    <textarea class="form-control" id="answer-${i}" placeholder="è¯·è¾“å…¥æ‚¨çš„å›ç­”..." style="margin-bottom: 12px;"></textarea>
                                    <div style="display: flex; gap: 12px;">
                                        <button class="btn btn-primary" style="padding: 4px 16px; font-size: 12px;" onclick="submitAnswer(${i}, '${encodeURIComponent(q)}')">æäº¤å›ç­”</button>
                                        <button class="btn btn-secondary" style="padding: 4px 16px; font-size: 12px;" onclick="markAsWrongQuestion('${encodeURIComponent(q)}')">æ ‡è®°é”™é¢˜</button>
                                    </div>
                                    <div id="feedback-${i}" style="margin-top: 12px;"></div>
                                </div>
                            </div>`).join('')}
                        </div>
                    </div>
                `;
                
                showNotification('é¢è¯•é—®é¢˜ç”Ÿæˆå®Œæˆ', 'success');
            }, 2000);
        }
        
        // æ ‡è®°é”™é¢˜
        function markAsWrongQuestion(question) {
            const decodedQuestion = decodeURIComponent(question);
            
            try {
                // ä»æœ¬åœ°å­˜å‚¨è·å–é”™é¢˜åˆ—è¡¨
                let wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
                
                // æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨
                if (!wrongQuestions.some(q => q.question === decodedQuestion)) {
                    wrongQuestions.push({
                        question: decodedQuestion,
                        timestamp: new Date().toISOString()
                    });
                    
                    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                    localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
                    showNotification('å·²æ ‡è®°ä¸ºé”™é¢˜', 'success');
                } else {
                    showNotification('è¯¥é—®é¢˜å·²åœ¨é”™é¢˜åˆ—è¡¨ä¸­', 'info');
                }
            } catch (e) {
                console.error('localStorageæ“ä½œå¤±è´¥:', e);
                showNotification('ä¿å­˜é”™é¢˜å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å­˜å‚¨è®¾ç½®', 'error');
            }
        }
        
        // é”™é¢˜å›é¡¾
        function reviewWrongQuestions() {
            const interviewResult = document.getElementById('interviewResult');
            
            try {
                // ä»æœ¬åœ°å­˜å‚¨è·å–é”™é¢˜åˆ—è¡¨
                let wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
                
                if (wrongQuestions.length === 0) {
                    interviewResult.innerHTML = `
                        <div style="text-align: center; padding: 60px;">
                            <div style="font-size: 48px; margin-bottom: 16px;">âœ…</div>
                            <h3>æš‚æ— é”™é¢˜</h3>
                            <p style="margin: 16px 0;">æ‚¨çš„é”™é¢˜åˆ—è¡¨ä¸ºç©ºï¼Œè¯·åœ¨é¢è¯•è¿‡ç¨‹ä¸­æ ‡è®°é”™é¢˜</p>
                        </div>
                    `;
                    return;
                }
            
            interviewResult.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 16px;">ğŸ“ é”™é¢˜å›é¡¾</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 24px;">å…± ${wrongQuestions.length} é“é”™é¢˜</p>
                </div>
                
                <div style="background: rgba(245, 34, 45, 0.05); padding: 24px; border-radius: var(--border-radius);">
                    ${wrongQuestions.map((item, i) => `<div style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid rgba(245, 34, 45, 0.1);">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                            <strong style="font-size: 14px;">${i + 1}. ${item.question}</strong>
                            <span style="font-size: 12px; color: var(--text-tertiary);">${new Date(item.timestamp).toLocaleString('zh-CN')}</span>
                        </div>
                        <div style="margin-top: 8px;">
                            <button class="btn btn-secondary" style="padding: 4px 12px; font-size: 12px; margin-right: 8px;" onclick="removeWrongQuestion(${i})">ç§»é™¤</button>
                            <button class="btn btn-secondary" style="padding: 4px 12px; font-size: 12px;" onclick="practiceQuestion('${encodeURIComponent(item.question)}')">ç»ƒä¹ </button>
                        </div>
                    </div>`).join('')}
                </div>
                
                <div style="margin-top: 24px; display: flex; gap: 12px;">
                    <button class="btn btn-secondary" onclick="clearWrongQuestions()">æ¸…ç©ºé”™é¢˜</button>
                </div>
            `;
            } catch (e) {
                console.error('è¯»å–é”™é¢˜åˆ—è¡¨å¤±è´¥:', e);
                interviewResult.innerHTML = `
                    <div style="text-align: center; padding: 60px;">
                        <div style="font-size: 48px; margin-bottom: 16px;">âŒ</div>
                        <h3>è¯»å–å¤±è´¥</h3>
                        <p style="margin: 16px 0;">æ— æ³•è¯»å–é”™é¢˜åˆ—è¡¨ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨å­˜å‚¨è®¾ç½®</p>
                    </div>
                `;
            }
        }
        
        // ç§»é™¤é”™é¢˜
        function removeWrongQuestion(index) {
            try {
                let wrongQuestions = JSON.parse(localStorage.getItem('wrongQuestions') || '[]');
                wrongQuestions.splice(index, 1);
                localStorage.setItem('wrongQuestions', JSON.stringify(wrongQuestions));
                showNotification('å·²ç§»é™¤é”™é¢˜', 'success');
                reviewWrongQuestions();
            } catch (e) {
                console.error('ç§»é™¤é”™é¢˜å¤±è´¥:', e);
                showNotification('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }
        
        // æ¸…ç©ºé”™é¢˜
        function clearWrongQuestions() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰é”™é¢˜å—ï¼Ÿ')) {
                try {
                    localStorage.removeItem('wrongQuestions');
                    showNotification('å·²æ¸…ç©ºé”™é¢˜åˆ—è¡¨', 'success');
                    reviewWrongQuestions();
                } catch (e) {
                    console.error('æ¸…ç©ºé”™é¢˜å¤±è´¥:', e);
                    showNotification('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                }
            }
        }
        
        // ç»ƒä¹ é”™é¢˜
        function practiceQuestion(question) {
            const decodedQuestion = decodeURIComponent(question);
            showNotification('å¼€å§‹ç»ƒä¹ è¯¥é—®é¢˜', 'info');
            // è¿™é‡Œå¯ä»¥å®ç°æ›´è¯¦ç»†çš„ç»ƒä¹ é€»è¾‘
        }
        
        // ç”Ÿæˆä¼ä¸šç«¯å‡†å¤‡è®¡åˆ’
        function generateEnterprisePreparationPlan() {
            const targetJob = document.getElementById('enterpriseTargetJob').value;
            const interviewDate = document.getElementById('enterpriseInterviewDate').value;
            const preparationDays = parseInt(document.getElementById('enterprisePreparationDays').value);
            
            if (!targetJob || !interviewDate) {
                showNotification('è¯·é€‰æ‹©ç›®æ ‡èŒä½å’Œé¢è¯•æ—¥æœŸ', 'warning');
                return;
            }
            
            const startDate = new Date();
            const endDate = new Date(interviewDate);
            
            // ç”Ÿæˆè®¡åˆ’
            const plan = createEnterprisePreparationPlan(targetJob, startDate, endDate, preparationDays);
            
            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            const planData = {
                plan: plan,
                targetJob: targetJob,
                startDate: startDate.toISOString(),
                endDate: endDate.toISOString(),
                preparationDays: preparationDays,
                savedAt: new Date().toISOString()
            };
            localStorage.setItem('preparationPlanData', JSON.stringify(planData));
            
            // æ¸²æŸ“è®¡åˆ’
            renderEnterprisePreparationPlan(plan, targetJob, startDate, endDate);
            
            showNotification('é¢è¯•å‡†å¤‡è®¡åˆ’å·²ç”Ÿæˆ', 'success');
        }
        
        // åˆ›å»ºå‡†å¤‡è®¡åˆ’
        function createEnterprisePreparationPlan(jobType, startDate, endDate, days) {
            const tasks = [];
            const dailyHours = 4;
            
            for (let i = 0; i < days; i++) {
                const taskDate = new Date(startDate);
                taskDate.setDate(taskDate.getDate() + i);
                
                const dayNum = i + 1;
                let morningTask = '';
                let afternoonTask = '';
                
                if (dayNum <= 2) {
                    morningTask = 'äº†è§£' + jobType + 'å²—ä½è¦æ±‚å’Œè¡Œä¸šåŠ¨æ€';
                    afternoonTask = 'å¤ä¹ ä¸“ä¸šåŸºç¡€çŸ¥è¯†';
                } else if (dayNum <= 4) {
                    morningTask = 'å‡†å¤‡å¸¸è§é¢è¯•é—®é¢˜ç­”æ¡ˆ';
                    afternoonTask = 'è¿›è¡Œæ¨¡æ‹Ÿé¢è¯•ç»ƒä¹ ';
                } else if (dayNum <= 6) {
                    morningTask = 'æ·±å…¥ç ”ç©¶ç›®æ ‡å…¬å¸èƒŒæ™¯';
                    afternoonTask = 'å‡†å¤‡é¡¹ç›®ç»éªŒä»‹ç»';
                } else {
                    morningTask = 'å¤ä¹ è–„å¼±ç¯èŠ‚';
                    afternoonTask = 'è¿›è¡Œæœ€ç»ˆæ¨¡æ‹Ÿé¢è¯•';
                }
                
                tasks.push({
                    date: taskDate,
                    dayNum: dayNum,
                    morningTask: morningTask,
                    afternoonTask: afternoonTask,
                    completed: false
                });
            }
            
            return {
                jobType: jobType,
                startDate: startDate,
                endDate: endDate,
                totalDays: days,
                dailyHours: dailyHours,
                tasks: tasks
            };
        }
        
        // æ¸²æŸ“å‡†å¤‡è®¡åˆ’ï¼ˆç”˜ç‰¹å›¾æ ·å¼ï¼‰
        function renderEnterprisePreparationPlan(plan, targetJob, startDate, endDate) {
            const resultDiv = document.getElementById('enterprisePreparationPlanResult');
            const contentDiv = document.getElementById('enterprisePlanContent');
            
            const taskTypes = [
                { key: 'research', label: 'è¡Œä¸šç ”ç©¶', color: '#1890ff' },
                { key: 'knowledge', label: 'çŸ¥è¯†å¤ä¹ ', color: '#52c41a' },
                { key: 'practice', label: 'æ¨¡æ‹Ÿç»ƒä¹ ', color: '#722ed1' },
                { key: 'company', label: 'å…¬å¸è°ƒç ”', color: '#fa8c16' },
                { key: 'project', label: 'é¡¹ç›®å‡†å¤‡', color: '#eb2f96' },
                { key: 'review', label: 'æœ€ç»ˆå¤ä¹ ', color: '#13c2c2' }
            ];
            
            let html = `
                <div style="margin-bottom: 20px; padding: 16px; background: rgba(82, 196, 26, 0.05); border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 12px;">
                        <span><strong>ç›®æ ‡èŒä½:</strong> ${targetJob}</span>
                        <span><strong>å‡†å¤‡å¤©æ•°:</strong> ${plan.totalDays}å¤©</span>
                        <span><strong>é¢è¯•æ—¥æœŸ:</strong> ${endDate.toLocaleDateString()}</span>
                    </div>
                </div>
                
                <!-- ç”˜ç‰¹å›¾åŒºåŸŸ -->
                <div style="overflow-x: auto;">
                    <div style="min-width: 600px;">
                        <!-- å›¾ä¾‹ -->
                        <div style="display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px; padding: 12px; background: #f5f5f5; border-radius: 8px;">
                            ${taskTypes.map(t => `<div style="display: flex; align-items: center; gap: 6px;"><span style="width: 12px; height: 12px; background: ${t.color}; border-radius: 2px;"></span><span style="font-size: 12px;">${t.label}</span></div>`).join('')}
                        </div>
                        
                        <!-- ç”˜ç‰¹å›¾ -->
                        <div style="border: 1px solid #e8e8e8; border-radius: 8px; overflow: hidden;">
                            <!-- è¡¨å¤´ -->
                            <div style="display: flex; background: #fafafa; border-bottom: 1px solid #e8e8e8; font-weight: 600; font-size: 13px;">
                                <div style="width: 80px; padding: 12px 8px; border-right: 1px solid #e8e8e8; text-align: center;">å¤©æ•°</div>
                                <div style="width: 100px; padding: 12px 8px; border-right: 1px solid #e8e8e8; text-align: center;">æ—¥æœŸ</div>
                                <div style="flex: 1; padding: 12px 8px; text-align: center;">ä¸Šåˆä»»åŠ¡</div>
                                <div style="flex: 1; padding: 12px 8px; border-left: 1px solid #e8e8e8; text-align: center;">ä¸‹åˆä»»åŠ¡</div>
                            </div>
                            
                            <!-- ä»»åŠ¡è¡Œ -->
                            ${plan.tasks.map(task => {
                                const morningType = getTaskType(task.morningTask);
                                const afternoonType = getTaskType(task.afternoonTask);
                                return `
                                    <div style="display: flex; border-bottom: 1px solid #f0f0f0; font-size: 13px;">
                                        <div style="width: 80px; padding: 12px 8px; border-right: 1px solid #e8e8e8; text-align: center; font-weight: 500;">ç¬¬${task.dayNum}å¤©</div>
                                        <div style="width: 100px; padding: 12px 8px; border-right: 1px solid #e8e8e8; text-align: center; color: #666;">${task.date.toLocaleDateString()}</div>
                                        <div style="flex: 1; padding: 12px 8px; background: ${morningType.color}15; border-left: 4px solid ${morningType.color};">
                                            <span style="font-weight: 500; color: ${morningType.color};">${morningType.label}</span>
                                            <div style="font-size: 12px; color: #666; margin-top: 4px;">${task.morningTask}</div>
                                        </div>
                                        <div style="flex: 1; padding: 12px 8px; background: ${afternoonType.color}15; border-left: 4px solid ${afternoonType.color};">
                                            <span style="font-weight: 500; color: ${afternoonType.color};">${afternoonType.label}</span>
                                            <div style="font-size: 12px; color: #666; margin-top: 4px;">${task.afternoonTask}</div>
                                        </div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            contentDiv.innerHTML = html;
            resultDiv.style.display = 'block';
        }
        
        // è·å–ä»»åŠ¡ç±»å‹
        function getTaskType(taskName) {
            if (taskName.includes('è¡Œä¸š') || taskName.includes('å²—ä½')) {
                return { label: 'è¡Œä¸šç ”ç©¶', color: '#1890ff' };
            } else if (taskName.includes('åŸºç¡€') || taskName.includes('çŸ¥è¯†')) {
                return { label: 'çŸ¥è¯†å¤ä¹ ', color: '#52c41a' };
            } else if (taskName.includes('æ¨¡æ‹Ÿ') || taskName.includes('ç»ƒä¹ ')) {
                return { label: 'æ¨¡æ‹Ÿç»ƒä¹ ', color: '#722ed1' };
            } else if (taskName.includes('å…¬å¸')) {
                return { label: 'å…¬å¸è°ƒç ”', color: '#fa8c16' };
            } else if (taskName.includes('é¡¹ç›®')) {
                return { label: 'é¡¹ç›®å‡†å¤‡', color: '#eb2f96' };
            } else {
                return { label: 'æœ€ç»ˆå¤ä¹ ', color: '#13c2c2' };
            }
        }
        
        // åˆ†æè‡ªå®šä¹‰é—®é¢˜
        function analyzeCustomQuestion() {
            const customQuestion = document.getElementById('customQuestion').value.trim();
            
            if (!customQuestion) {
                showNotification('è¯·è¾“å…¥é—®é¢˜å†…å®¹', 'warning');
                return;
            }
            
            const interviewResult = document.getElementById('interviewResult');
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            interviewResult.innerHTML = '<div style="text-align: center; padding: 40px;"><div class="loading"></div><p style="margin-top: 16px;">AIæ­£åœ¨åˆ†æé—®é¢˜...</p></div>';
            
            // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
            setTimeout(() => {
                // ç”Ÿæˆé—®é¢˜åˆ†æ
                const analysis = generateQuestionAnalysis(customQuestion);
                
                // æ˜¾ç¤ºåˆ†æç»“æœ
                interviewResult.innerHTML = `
                    <div style="margin-top: 24px;">
                        <h5>é—®é¢˜åˆ†æ</h5>
                        <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius); margin-bottom: 24px;">
                            <strong>${customQuestion}</strong>
                        </div>
                        
                        <div style="background: rgba(82, 196, 26, 0.1); padding: 24px; border-radius: var(--border-radius);">
                            <h6 style="margin-bottom: 16px; color: var(--success-color);">AIåˆ†æç»“æœ</h6>
                            
                            <div style="margin-bottom: 20px;">
                                <h7 style="font-weight: 600; margin-bottom: 8px; display: block;">é—®é¢˜ç±»å‹ï¼š</h7>
                                <div>${analysis.type}</div>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h7 style="font-weight: 600; margin-bottom: 8px; display: block;">è€ƒå¯Ÿè¦ç‚¹ï¼š</h7>
                                <ul style="list-style: none; padding-left: 0;">
                                    ${analysis.points.map(point => `<li style="margin-bottom: 8px; display: flex; align-items: flex-start;">
                                        <span style="color: var(--primary-color); margin-right: 8px;">â€¢</span>
                                        <span>${point}</span>
                                    </li>`).join('')}
                                </ul>
                            </div>
                            
                            <div style="margin-bottom: 20px;">
                                <h7 style="font-weight: 600; margin-bottom: 8px; display: block;">å›ç­”å»ºè®®ï¼š</h7>
                                <div>${analysis.suggestion}</div>
                            </div>
                            
                            <div>
                                <h7 style="font-weight: 600; margin-bottom: 8px; display: block;">ç¤ºä¾‹å›ç­”ç»“æ„ï¼š</h7>
                                <div style="background: rgba(255, 255, 255, 0.8); padding: 12px; border-radius: var(--border-radius); font-size: 13px;">
                                    ${analysis.exampleStructure}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                showNotification('é—®é¢˜åˆ†æå®Œæˆ', 'success');
            }, 2000);
        }
        
        // ç”Ÿæˆé—®é¢˜åˆ†æ
        function generateQuestionAnalysis(question) {
            // ç®€å•çš„åˆ†æé€»è¾‘ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥è°ƒç”¨çœŸå®çš„AIæ¨¡å‹
            let type = '';
            let points = [];
            let suggestion = '';
            let exampleStructure = '';
            
            // æ ¹æ®é—®é¢˜å†…å®¹åˆ¤æ–­ç±»å‹
            if (question.includes('æŠ€æœ¯') || question.includes('æŠ€æœ¯æ ˆ') || question.includes('ç¼–ç¨‹') || question.includes('ä»£ç ')) {
                type = 'æŠ€æœ¯é—®é¢˜';
                points = [
                    'æŠ€æœ¯çŸ¥è¯†æŒæ¡ç¨‹åº¦',
                    'é—®é¢˜è§£å†³èƒ½åŠ›',
                    'ä»£ç è´¨é‡æ„è¯†',
                    'æŠ€æœ¯å­¦ä¹ èƒ½åŠ›'
                ];
                suggestion = 'å›ç­”æŠ€æœ¯é—®é¢˜æ—¶ï¼Œåº”æ¸…æ™°è¡¨è¾¾æŠ€æœ¯æ¦‚å¿µï¼Œç»“åˆå…·ä½“é¡¹ç›®ç»éªŒï¼Œå±•ç¤ºå®é™…è§£å†³é—®é¢˜çš„èƒ½åŠ›ã€‚ä½¿ç”¨STARæ³•åˆ™ç»“æ„å›ç­”ï¼Œé‡ç‚¹çªå‡ºæŠ€æœ¯å®ç°ç»†èŠ‚å’Œæˆæœã€‚';
                exampleStructure = '1. é—®é¢˜ç†è§£ï¼šç®€è¦è¯´æ˜å¯¹é—®é¢˜çš„ç†è§£\n2. æŠ€æœ¯æ–¹æ¡ˆï¼šæè¿°ä½ çš„æŠ€æœ¯æ–¹æ¡ˆå’Œé€‰æ‹©ç†ç”±\n3. å®ç°ç»†èŠ‚ï¼šåˆ†äº«å…³é”®ä»£ç æˆ–å®ç°æ€è·¯\n4. ä¼˜åŒ–ä¸æ€»ç»“ï¼šè®¨è®ºå¯èƒ½çš„ä¼˜åŒ–æ–¹å‘å’Œæœ€ç»ˆæˆæœ';
            } else if (question.includes('æŒ‘æˆ˜') || question.includes('å‹åŠ›') || question.includes('å†²çª') || question.includes('å›¢é˜Ÿ')) {
                type = 'è¡Œä¸ºé—®é¢˜';
                points = [
                    'å›¢é˜Ÿåä½œèƒ½åŠ›',
                    'é—®é¢˜è§£å†³èƒ½åŠ›',
                    'å‹åŠ›ç®¡ç†èƒ½åŠ›',
                    'æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›'
                ];
                suggestion = 'å›ç­”è¡Œä¸ºé—®é¢˜æ—¶ï¼Œåº”ä½¿ç”¨STARæ³•åˆ™ï¼ˆæƒ…å¢ƒã€ä»»åŠ¡ã€è¡ŒåŠ¨ã€ç»“æœï¼‰ç»“æ„åŒ–å›ç­”ï¼Œæä¾›å…·ä½“çš„ä¾‹å­å’Œé‡åŒ–çš„æˆæœï¼Œå±•ç¤ºä½ çš„è½¯æŠ€èƒ½å’Œç»¼åˆç´ è´¨ã€‚';
                exampleStructure = '1. æƒ…å¢ƒï¼ˆSituationï¼‰ï¼šæè¿°å½“æ—¶çš„èƒŒæ™¯å’Œæƒ…å†µ\n2. ä»»åŠ¡ï¼ˆTaskï¼‰ï¼šè¯´æ˜ä½ çš„èŒè´£å’Œç›®æ ‡\n3. è¡ŒåŠ¨ï¼ˆActionï¼‰ï¼šè¯¦ç»†æè¿°ä½ é‡‡å–çš„å…·ä½“è¡ŒåŠ¨\n4. ç»“æœï¼ˆResultï¼‰ï¼šåˆ†äº«æœ€ç»ˆçš„æˆæœå’Œä½ å­¦åˆ°çš„ç»éªŒ';
            } else if (question.includes('å¦‚æœ') || question.includes('å¦‚ä½•') || question.includes('ç­–ç•¥') || question.includes('å¸‚åœº')) {
                type = 'æ¡ˆä¾‹é—®é¢˜';
                points = [
                    'åˆ†ææ€ç»´èƒ½åŠ›',
                    'å•†ä¸šæ„è¯†',
                    'ç­–ç•¥è§„åˆ’èƒ½åŠ›',
                    'é€»è¾‘æ¨ç†èƒ½åŠ›'
                ];
                suggestion = 'å›ç­”æ¡ˆä¾‹é—®é¢˜æ—¶ï¼Œåº”å±•ç¤ºä½ çš„åˆ†ææ¡†æ¶å’Œæ€è€ƒè¿‡ç¨‹ï¼Œç»“åˆç›¸å…³ç†è®ºå’Œå®è·µç»éªŒï¼Œæä¾›ç»“æ„åŒ–çš„è§£å†³æ–¹æ¡ˆï¼Œä½“ç°ä½ çš„å•†ä¸šæ€ç»´å’Œæˆ˜ç•¥çœ¼å…‰ã€‚';
                exampleStructure = '1. é—®é¢˜åˆ†æï¼šæ‹†è§£é—®é¢˜ï¼Œè¯†åˆ«å…³é”®å› ç´ \n2. æ¡†æ¶åº”ç”¨ï¼šä½¿ç”¨åˆé€‚çš„åˆ†ææ¡†æ¶ï¼ˆå¦‚SWOTã€æ³¢ç‰¹äº”åŠ›ç­‰ï¼‰\n3. æ–¹æ¡ˆæå‡ºï¼šåŸºäºåˆ†ææå‡ºå…·ä½“æ–¹æ¡ˆ\n4. é£é™©è¯„ä¼°ï¼šè®¨è®ºå¯èƒ½çš„é£é™©å’Œåº”å¯¹æªæ–½\n5. ç»“è®ºå»ºè®®ï¼šæ€»ç»“æ ¸å¿ƒè§‚ç‚¹å’Œå»ºè®®';
            } else {
                type = 'ç»¼åˆé—®é¢˜';
                points = [
                    'è‡ªæˆ‘è®¤çŸ¥',
                    'èŒä¸šè§„åˆ’',
                    'ä»·å€¼è§‚åŒ¹é…',
                    'æ²Ÿé€šè¡¨è¾¾èƒ½åŠ›'
                ];
                suggestion = 'å›ç­”ç»¼åˆé—®é¢˜æ—¶ï¼Œåº”çœŸè¯šè¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œç»“åˆä¸ªäººç»å†å’ŒèŒä¸šç›®æ ‡ï¼Œå±•ç¤ºä½ çš„è‡ªæˆ‘è®¤çŸ¥å’Œå¯¹å…¬å¸æ–‡åŒ–çš„ç†è§£ï¼Œä½“ç°ä½ çš„ä»·å€¼è§‚ä¸å…¬å¸çš„åŒ¹é…åº¦ã€‚';
                exampleStructure = '1. æ ¸å¿ƒè§‚ç‚¹ï¼šç›´æ¥å›ç­”é—®é¢˜çš„æ ¸å¿ƒ\n2. ä¸ªäººç»å†ï¼šç»“åˆç›¸å…³ç»å†æ”¯æŒä½ çš„è§‚ç‚¹\n3. èŒä¸šå…³è”ï¼šè¯´æ˜ä¸ç›®æ ‡èŒä½çš„ç›¸å…³æ€§\n4. æœªæ¥å±•æœ›ï¼šè¡¨è¾¾å¯¹æœªæ¥çš„æœŸæœ›å’Œè§„åˆ’';
            }
            
            return {
                type: type,
                points: points,
                suggestion: suggestion,
                exampleStructure: exampleStructure
            };
        }
        
        // æäº¤å›ç­”å¹¶è·å–ç‚¹è¯„
        function submitAnswer(index, question) {
            const answer = document.getElementById(`answer-${index}`).value.trim();
            const feedbackDiv = document.getElementById(`feedback-${index}`);
            const decodedQuestion = decodeURIComponent(question);
            
            if (!answer) {
                showNotification('è¯·è¾“å…¥æ‚¨çš„å›ç­”', 'warning');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            feedbackDiv.innerHTML = '<div style="display: flex; align-items: center; gap: 8px;"><div class="loading"></div><span>AIæ­£åœ¨åˆ†ææ‚¨çš„å›ç­”...</span></div>';
            
            // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
            setTimeout(() => {
                // ç”Ÿæˆç‚¹è¯„å†…å®¹
                const feedback = generateFeedback(decodedQuestion, answer);
                
                // æ˜¾ç¤ºç‚¹è¯„ç»“æœ
                feedbackDiv.innerHTML = `
                    <div style="background: rgba(82, 196, 26, 0.1); padding: 16px; border-radius: var(--border-radius);">
                        <h6 style="margin-bottom: 12px; color: var(--success-color);">AIç‚¹è¯„</h6>
                        <div style="margin-bottom: 12px;">${feedback.content}</div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            <strong>è¯„åˆ†ï¼š</strong>${feedback.score}/100
                            <br>
                            <strong>å»ºè®®ï¼š</strong>${feedback.suggestions}
                        </div>
                    </div>
                `;
                
                showNotification('å›ç­”ç‚¹è¯„å®Œæˆ', 'success');
            }, 2000);
        }
        
        // ç”Ÿæˆå›ç­”ç‚¹è¯„
        function generateFeedback(question, answer) {
            // ç®€å•çš„ç‚¹è¯„é€»è¾‘ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥è°ƒç”¨çœŸå®çš„AIæ¨¡å‹
            let content = '';
            let suggestions = '';
            let score = 75 + Math.floor(Math.random() * 20); // 75-95ä¹‹é—´çš„éšæœºåˆ†æ•°
            
            // æ ¹æ®é—®é¢˜ç±»å‹ç”Ÿæˆä¸åŒçš„ç‚¹è¯„
            if (question.includes('æŠ€æœ¯') || question.includes('æŠ€æœ¯æ ˆ') || question.includes('ç¼–ç¨‹')) {
                content = 'æ‚¨çš„å›ç­”å±•ç¤ºäº†å¯¹æŠ€æœ¯æ¦‚å¿µçš„ç†è§£ï¼Œé€»è¾‘æ¸…æ™°ã€‚å»ºè®®åœ¨å›ç­”ä¸­åŠ å…¥æ›´å¤šå…·ä½“çš„é¡¹ç›®ç»éªŒå’ŒæŠ€æœ¯å®ç°ç»†èŠ‚ï¼Œè¿™æ ·å¯ä»¥æ›´å¥½åœ°å±•ç¤ºæ‚¨çš„å®é™…èƒ½åŠ›ã€‚';
                suggestions = 'ç»“åˆå…·ä½“é¡¹ç›®æ¡ˆä¾‹ï¼Œä½¿ç”¨STARæ³•åˆ™ï¼ˆæƒ…å¢ƒã€ä»»åŠ¡ã€è¡ŒåŠ¨ã€ç»“æœï¼‰æ¥ç»“æ„åŒ–æ‚¨çš„å›ç­”ã€‚';
            } else if (question.includes('æŒ‘æˆ˜') || question.includes('å‹åŠ›') || question.includes('å†²çª')) {
                content = 'æ‚¨çš„å›ç­”å±•ç¤ºäº†è‰¯å¥½çš„é—®é¢˜è§£å†³èƒ½åŠ›å’Œå›¢é˜Ÿåä½œç²¾ç¥ã€‚å»ºè®®åœ¨å›ç­”ä¸­æ›´è¯¦ç»†åœ°æè¿°æ‚¨é‡‡å–çš„å…·ä½“è¡ŒåŠ¨å’Œæœ€ç»ˆå–å¾—çš„æˆæœï¼Œè¿™æ ·å¯ä»¥æ›´æœ‰åŠ›åœ°è¯æ˜æ‚¨çš„èƒ½åŠ›ã€‚';
                suggestions = 'ä½¿ç”¨å…·ä½“çš„æ•°æ®å’Œæˆæœæ¥é‡åŒ–æ‚¨çš„è´¡çŒ®ï¼Œè®©å›ç­”æ›´æœ‰è¯´æœåŠ›ã€‚';
            } else if (question.includes('å¸‚åœº') || question.includes('äº§å“') || question.includes('ç­–ç•¥')) {
                content = 'æ‚¨çš„å›ç­”å±•ç¤ºäº†è‰¯å¥½çš„åˆ†ææ€ç»´å’Œå•†ä¸šæ„è¯†ã€‚å»ºè®®åœ¨å›ç­”ä¸­åŠ å…¥æ›´å¤šçš„æ•°æ®åˆ†æå’Œå¸‚åœºæ´å¯Ÿï¼Œä»¥åŠå…·ä½“çš„æ‰§è¡Œæ­¥éª¤ï¼Œè¿™æ ·å¯ä»¥æ›´å…¨é¢åœ°å±•ç¤ºæ‚¨çš„èƒ½åŠ›ã€‚';
                suggestions = 'ä½¿ç”¨æ¡†æ¶æ€§æ€ç»´æ¥ç»„ç»‡æ‚¨çš„å›ç­”ï¼Œä¾‹å¦‚SWOTåˆ†æã€æ³¢ç‰¹äº”åŠ›æ¨¡å‹ç­‰ã€‚';
            } else {
                content = 'æ‚¨çš„å›ç­”ç»“æ„æ¸…æ™°ï¼Œè¡¨è¾¾æµç•…ã€‚å»ºè®®åœ¨å›ç­”ä¸­åŠ å…¥æ›´å¤šå…·ä½“çš„ä¾‹å­å’Œç»†èŠ‚ï¼Œè¿™æ ·å¯ä»¥è®©æ‚¨çš„å›ç­”æ›´åŠ ç”ŸåŠ¨å’Œæœ‰è¯´æœåŠ›ã€‚';
                suggestions = 'ä¿æŒå›ç­”ç®€æ´æ˜äº†ï¼Œé‡ç‚¹çªå‡ºï¼ŒåŒæ—¶å±•ç¤ºæ‚¨çš„ä¸ªäººç‰¹è‰²å’Œä¼˜åŠ¿ã€‚';
            }
            
            // æ ¹æ®å›ç­”é•¿åº¦è°ƒæ•´è¯„åˆ†
            if (answer.length < 50) {
                score -= 10;
                suggestions += ' å›ç­”ç•¥æ˜¾ç®€çŸ­ï¼Œå»ºè®®æä¾›æ›´è¯¦ç»†çš„å†…å®¹ã€‚';
            } else if (answer.length > 300) {
                score -= 5;
                suggestions += ' å›ç­”ç•¥æ˜¾å†—é•¿ï¼Œå»ºè®®ä¿æŒç®€æ´æ˜äº†ã€‚';
            }
            
            return {
                content: content,
                score: score,
                suggestions: suggestions
            };
        }
        
        // å¯¼èˆªåˆ°è§†é¢‘é¢è¯•é¡µé¢
        function navigateToVideoInterview() {
            console.log('å¼€å§‹å¯¼èˆªåˆ°è§†é¢‘é¢è¯•é¡µé¢');
            
            let interviewJob = '';
            let questionType = '';
            
            // å°è¯•è·å–å…ƒç´ å€¼ï¼Œå¦‚æœå…ƒç´ ä¸å­˜åœ¨åˆ™ä½¿ç”¨é»˜è®¤å€¼
            try {
                const interviewJobElement = document.getElementById('interviewJob');
                if (interviewJobElement) {
                    interviewJob = interviewJobElement.value.trim();
                    console.log('è·å–åˆ°ç›®æ ‡èŒä½:', interviewJob);
                } else {
                    console.log('æœªæ‰¾åˆ°interviewJobå…ƒç´ ï¼Œä½¿ç”¨é»˜è®¤å€¼');
                }
                
                const questionTypeElement = document.getElementById('questionType');
                if (questionTypeElement) {
                    questionType = questionTypeElement.value;
                    console.log('è·å–åˆ°é—®é¢˜ç±»å‹:', questionType);
                } else {
                    console.log('æœªæ‰¾åˆ°questionTypeå…ƒç´ ï¼Œä½¿ç”¨é»˜è®¤å€¼');
                }
            } catch (error) {
                console.error('è·å–å…ƒç´ å€¼å¤±è´¥:', error);
            }
            
            try {
                let url = 'interview-video.html';
                let params = [];
                
                if (interviewJob) {
                    params.push(`job=${encodeURIComponent(interviewJob)}`);
                }
                if (questionType) {
                    params.push(`type=${questionType}`);
                }
                
                if (params.length > 0) {
                    url += '?' + params.join('&');
                }
                
                console.log('æ„å»ºçš„URL:', url);
                window.location.href = url;
            } catch (error) {
                console.error('å¯¼èˆªå¤±è´¥:', error);
                showNotification('å¯¼èˆªåˆ°è§†é¢‘é¢è¯•é¡µé¢å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }

        // æ‰¹é‡æŠ•é€’åŠŸèƒ½
        async function startBatchDelivery() {
            const targetJob = document.getElementById('targetJob').value.trim();
            const targetCity = document.getElementById('targetCity').value;
            const deliveryInterval = parseInt(document.getElementById('deliveryInterval').value);
            const deliveryCount = parseInt(document.getElementById('deliveryCount').value);
            const autoLogin = document.getElementById('autoLogin').checked;
            const saveResults = document.getElementById('saveResults').checked;
            
            // è·å–é€‰ä¸­çš„å¹³å°
            const selectedPlatforms = [];
            document.querySelectorAll('input[type="checkbox"]:checked[data-platform]').forEach(checkbox => {
                selectedPlatforms.push(checkbox.dataset.platform);
            });
            
            if (selectedPlatforms.length === 0) {
                showNotification('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªæŠ•é€’å¹³å°', 'warning');
                return;
            }
            
            // é»˜è®¤ç­›é€‰æ¡ä»¶
            const filterCondition = 'all';
            
            // æ˜¾ç¤ºäºŒæ¬¡ç¡®è®¤çª—å£
            showBatchDeliveryConfirm(targetJob, targetCity, selectedPlatforms, deliveryCount, filterCondition, deliveryInterval, autoLogin, saveResults);
        }
        
        // æ˜¾ç¤ºæ‰¹é‡æŠ•é€’äºŒæ¬¡ç¡®è®¤çª—å£
        function showBatchDeliveryConfirm(targetJob, targetCity, selectedPlatforms, deliveryCount, filterCondition, deliveryInterval, autoLogin, saveResults) {
            // åˆ›å»ºç¡®è®¤æ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
            `;
            
            // æ ¼å¼åŒ–å¹³å°åç§°
            const platformNames = selectedPlatforms.map(platform => getPlatformName(platform)).join('ã€');
            
            // åˆ›å»ºå†…å®¹å®¹å™¨
            const contentContainer = document.createElement('div');
            contentContainer.style.cssText = `background: white; border-radius: var(--border-radius); padding: 24px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;`;
            
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé˜²æ­¢ç‚¹å‡»å†…å®¹æ—¶è§¦å‘èƒŒæ™¯å…³é—­
            contentContainer.onclick = function(e) {
                e.stopPropagation();
            };
            
            // åˆ›å»ºå¤´éƒ¨
            const header = document.createElement('div');
            header.style.cssText = `display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;`;
            
            const title = document.createElement('h4');
            title.textContent = 'æ‰¹é‡æŠ•é€’ç¡®è®¤';
            
            const closeButton = document.createElement('button');
            closeButton.textContent = 'Ã—';
            closeButton.style.cssText = `background: none; border: none; font-size: 20px; cursor: pointer;`;
            closeButton.onclick = function() {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            };
            
            header.appendChild(title);
            header.appendChild(closeButton);
            
            // åˆ›å»ºå†…å®¹
            const content = document.createElement('div');
            content.style.cssText = `display: grid; gap: 12px; margin-bottom: 24px;`;
            
            const jobDiv = document.createElement('div');
            jobDiv.innerHTML = `<strong>ç›®æ ‡èŒä½:</strong> ${targetJob || 'æœªè®¾ç½®'}`;
            content.appendChild(jobDiv);
            
            const cityDiv = document.createElement('div');
            cityDiv.innerHTML = `<strong>ç›®æ ‡åŸå¸‚:</strong> ${getCityName(targetCity)}`;
            content.appendChild(cityDiv);
            
            const platformDiv = document.createElement('div');
            platformDiv.innerHTML = `<strong>æŠ•é€’å¹³å°:</strong> ${platformNames}`;
            content.appendChild(platformDiv);
            
            const countDiv = document.createElement('div');
            countDiv.innerHTML = `<strong>æŠ•é€’æ•°é‡:</strong> ${deliveryCount} ä¸ªèŒä½/å¹³å°`;
            content.appendChild(countDiv);
            
            const intervalDiv = document.createElement('div');
            intervalDiv.innerHTML = `<strong>æŠ•é€’é—´éš”:</strong> ${deliveryInterval} ä¸ª/åˆ†`;
            content.appendChild(intervalDiv);
            
            const loginDiv = document.createElement('div');
            loginDiv.innerHTML = `<strong>è‡ªåŠ¨ç™»å½•:</strong> ${autoLogin ? 'æ˜¯' : 'å¦'}`;
            content.appendChild(loginDiv);
            
            // åˆ›å»ºæŒ‰é’®å®¹å™¨
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = `margin-top: 24px; text-align: right; display: flex; gap: 12px; justify-content: flex-end;`;
            
            const cancelButton = document.createElement('button');
            cancelButton.className = 'btn btn-secondary';
            cancelButton.textContent = 'å–æ¶ˆ';
            cancelButton.onclick = function() {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            };
            
            const confirmButton = document.createElement('button');
            confirmButton.className = 'btn btn-primary';
            confirmButton.textContent = 'ç¡®è®¤æŠ•é€’';
            confirmButton.onclick = function() {
                confirmBatchDelivery(targetJob, targetCity, selectedPlatforms.join(','), deliveryCount, filterCondition, deliveryInterval, autoLogin, saveResults);
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            };
            
            buttonContainer.appendChild(cancelButton);
            buttonContainer.appendChild(confirmButton);
            
            // ç»„è£…å†…å®¹å®¹å™¨
            contentContainer.appendChild(header);
            contentContainer.appendChild(content);
            contentContainer.appendChild(buttonContainer);
            
            // ç»„è£…æ¨¡æ€æ¡†
            modal.appendChild(contentContainer);
            
            // æ·»åŠ ç‚¹å‡»èƒŒæ™¯å…³é—­åŠŸèƒ½
            modal.onclick = function(e) {
                if (e.target === modal) {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }
            };
            
            document.body.appendChild(modal);
        }
        
        // ç¡®è®¤æ‰¹é‡æŠ•é€’
        async function confirmBatchDelivery(targetJob, targetCity, platformsStr, deliveryCount, filterCondition, deliveryInterval, autoLogin, saveResults) {
            const selectedPlatforms = platformsStr.split(',');
            
            const deliveryResult = document.getElementById('deliveryResult');
            const batchDeliveryConfig = document.getElementById('batchDeliveryConfig');
            
            // æ˜¾ç¤ºæ‰¹é‡æŠ•é€’é…ç½®
            batchDeliveryConfig.style.display = 'block';
            
            // æ˜¾ç¤ºæŠ•é€’è¿›åº¦
            deliveryResult.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div class="loading"></div>
                    <p style="margin-top: 16px;">æ­£åœ¨å‡†å¤‡æ‰¹é‡æŠ•é€’...</p>
                </div>
            `;
            
            try {
                // æ¨¡æ‹Ÿæ‰¹é‡æŠ•é€’è¿‡ç¨‹
                const deliveryStats = {
                    total: deliveryCount * selectedPlatforms.length,
                    completed: 0,
                    success: 0,
                    failed: 0,
                    inProgress: true
                };
                
                // æ˜¾ç¤ºæŠ•é€’é…ç½®ä¿¡æ¯
                deliveryResult.innerHTML = `
                    <div class="result-grid">
                        <div class="metric-card">
                            <div class="metric-value">${selectedPlatforms.length}</div>
                            <div class="metric-label">å¹³å°æ•°é‡</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${deliveryCount}</div>
                            <div class="metric-label">æ¯ä¸ªå¹³å°æŠ•é€’æ•°</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${deliveryStats.total}</div>
                            <div class="metric-label">æ€»æŠ•é€’æ•°</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${deliveryInterval}s</div>
                            <div class="metric-label">æŠ•é€’é—´éš”</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>æŠ•é€’é…ç½®</h5>
                        <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius);">
                            <div>ç›®æ ‡èŒä½: ${targetJob}</div>
                            <div>ç›®æ ‡åŸå¸‚: ${getCityName(targetCity)}</div>
                            <div>ç­›é€‰æ¡ä»¶: ${getFilterConditionName(filterCondition)}</div>
                            <div>è‡ªåŠ¨ç™»å½•: ${autoLogin ? 'æ˜¯' : 'å¦'}</div>
                            <div>ä¿å­˜ç»“æœ: ${saveResults ? 'æ˜¯' : 'å¦'}</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>æŠ•é€’è¿›åº¦</h5>
                        <div id="deliveryProgress" style="background: #f0f0f0; border-radius: var(--border-radius); overflow: hidden; margin-bottom: 16px;">
                            <div id="progressBar" style="background: var(--primary-color); height: 8px; width: 0%; transition: width 0.3s;"></div>
                        </div>
                        <div id="progressText" style="text-align: center; font-size: 14px; color: var(--text-secondary);">
                            å‡†å¤‡å¼€å§‹æŠ•é€’...
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>æŠ•é€’ç»“æœ</h5>
                        <div id="deliveryLog" style="background: rgba(250, 173, 20, 0.1); padding: 16px; border-radius: var(--border-radius); max-height: 300px; overflow-y: auto;">
                            <div>ğŸ“‹ æ‰¹é‡æŠ•é€’ä»»åŠ¡å·²åˆ›å»º</div>
                        </div>
                    </div>
                `;
                
                // æ¨¡æ‹ŸæŠ•é€’è¿‡ç¨‹
                for (const platform of selectedPlatforms) {
                    const platformName = getPlatformName(platform);
                    
                    // æ·»åŠ å¹³å°å¼€å§‹æŠ•é€’æ—¥å¿—
                    document.getElementById('deliveryLog').innerHTML += `<div style="margin-top: 8px;">ğŸš€ å¼€å§‹åœ¨ ${platformName} æŠ•é€’...</div>`;
                    
                    for (let i = 0; i < deliveryCount; i++) {
                            // è®¡ç®—æŠ•é€’é—´éš”ï¼ˆç§’ï¼‰ï¼š60ç§’ / æ¯åˆ†é’ŸæŠ•é€’æ•°é‡
                            const intervalSeconds = Math.max(6, 60 / Math.max(1, deliveryInterval));
                            // æ¨¡æ‹ŸæŠ•é€’å»¶è¿Ÿ
                            await new Promise(resolve => setTimeout(resolve, intervalSeconds * 1000));
                        
                        deliveryStats.completed++;
                        const progress = Math.round((deliveryStats.completed / deliveryStats.total) * 100);
                        
                        // æ›´æ–°è¿›åº¦æ¡
                        document.getElementById('progressBar').style.width = `${progress}%`;
                        document.getElementById('progressText').textContent = `æŠ•é€’è¿›åº¦: ${deliveryStats.completed}/${deliveryStats.total} (${progress}%)`;
                        
                        // æ¨¡æ‹ŸæŠ•é€’ç»“æœ
                        const companies = ['é˜¿é‡Œå·´å·´', 'è…¾è®¯', 'ç™¾åº¦', 'å­—èŠ‚è·³åŠ¨', 'ç¾å›¢', 'äº¬ä¸œ', 'æ‹¼å¤šå¤š', 'ç½‘æ˜“', 'åä¸º', 'å°ç±³'];
                        const positions = ['å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'åç«¯å¼€å‘å·¥ç¨‹å¸ˆ', 'äº§å“ç»ç†', 'UIè®¾è®¡å¸ˆ', 'è¿è¥ä¸“å‘˜', 'æµ‹è¯•å·¥ç¨‹å¸ˆ', 'æ•°æ®åˆ†æå¸ˆ', 'ç®—æ³•å·¥ç¨‹å¸ˆ'];
                        const addresses = ['åŒ—äº¬å¸‚æœé˜³åŒº', 'ä¸Šæµ·å¸‚æµ¦ä¸œæ–°åŒº', 'å¹¿å·å¸‚å¤©æ²³åŒº', 'æ·±åœ³å¸‚å—å±±åŒº', 'æ­å·å¸‚ä½™æ­åŒº', 'æˆéƒ½å¸‚é«˜æ–°åŒº', 'æ­¦æ±‰å¸‚æ­¦æ˜ŒåŒº', 'è¥¿å®‰å¸‚é›å¡”åŒº', 'å—äº¬å¸‚ç„æ­¦åŒº', 'é‡åº†å¸‚æ¸ä¸­åŒº'];
                        
                        const company = companies[Math.floor(Math.random() * companies.length)];
                        
                        // æ£€æŸ¥ä¼ä¸šæ˜¯å¦åœ¨é»‘åå•ä¸­
                        if (isCompanyBlacklisted(company)) {
                            deliveryStats.failed++;
                            document.getElementById('deliveryLog').innerHTML += `<div style="color: var(--warning-color);">âš ï¸ ${platformName}: ä¼ä¸š "${company}" åœ¨é»‘åå•ä¸­ï¼Œå·²è‡ªåŠ¨è·³è¿‡</div>`;
                        } else {
                            const isSuccess = Math.random() > 0.2; // 80%æˆåŠŸç‡
                            if (isSuccess) {
                                deliveryStats.success++;
                                document.getElementById('deliveryLog').innerHTML += `<div style="color: var(--success-color);">âœ… ${platformName}: èŒä½ ${i + 1} æŠ•é€’æˆåŠŸ</div>`;
                                
                                // ä¸ºæ¯ä¸ªèŒä½ç”Ÿæˆå¯¹åº”çš„æ‹›è˜ä¿¡æ¯ç½‘ç»œåœ°å€
                                let deliveryWebsite = '';
                                
                                // ç”Ÿæˆéšæœºçš„æ‹›è˜ä¿¡æ¯ID
                                const jobId = Math.floor(Math.random() * 9000000000) + 1000000000; // 10ä½éšæœºæ•°
                                
                                // æ ¹æ®å¹³å°ç”Ÿæˆå¯¹åº”çš„æ‹›è˜ä¿¡æ¯ç½‘ç»œåœ°å€
                                switch(platform) {
                                    case 'zhilian':
                                        deliveryWebsite = `https://www.zhaopin.com/jobdetail/${jobId}.htm`;
                                        break;
                                    case '51job':
                                        deliveryWebsite = `https://jobs.51job.com/beijing/${jobId}.html`;
                                        break;
                                    case 'boss':
                                        deliveryWebsite = `https://www.zhipin.com/job_detail/${jobId}.html`;
                                        break;
                                    case 'lagou':
                                        deliveryWebsite = `https://www.lagou.com/jobs/${jobId}.html`;
                                        break;
                                    default:
                                        deliveryWebsite = `https://www.example.com/job/${jobId}`;
                                }
                                
                                // æ·»åŠ æŠ•é€’è®°å½•åˆ°deliveryRecordsæ•°ç»„
                                deliveryRecords.push({
                                    id: `record-${Date.now()}-${i}-${Math.random().toString(36).substr(2, 9)}`,
                                    platform: platformName,
                                    company: company,
                                    deliveryWebsite: deliveryWebsite,
                                    position: positions[Math.floor(Math.random() * positions.length)],
                                    address: addresses[Math.floor(Math.random() * addresses.length)],
                                    timestamp: new Date().toISOString(),
                                    result: 'æˆåŠŸ'
                                });
                            } else {
                                deliveryStats.failed++;
                                document.getElementById('deliveryLog').innerHTML += `<div style="color: var(--error-color);">âŒ ${platformName}: èŒä½ ${i + 1} æŠ•é€’å¤±è´¥</div>`;
                            }
                        }
                        
                        // æ»šåŠ¨åˆ°æ—¥å¿—åº•éƒ¨
                        const deliveryLog = document.getElementById('deliveryLog');
                        deliveryLog.scrollTop = deliveryLog.scrollHeight;
                    }
                }
                
                deliveryStats.inProgress = false;
                
                // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
                deliveryResult.innerHTML = `
                    <div class="result-grid">
                        <div class="metric-card">
                            <div class="metric-value">${deliveryStats.success}</div>
                            <div class="metric-label">æˆåŠŸæŠ•é€’</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${deliveryStats.failed}</div>
                            <div class="metric-label">æŠ•é€’å¤±è´¥</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${((deliveryStats.success / deliveryStats.total) * 100).toFixed(1)}%</div>
                            <div class="metric-label">æˆåŠŸç‡</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value">${selectedPlatforms.length}</div>
                            <div class="metric-label">è¦†ç›–å¹³å°</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>æŠ•é€’é…ç½®</h5>
                        <div style="background: rgba(24, 144, 255, 0.05); padding: 16px; border-radius: var(--border-radius);">
                            <div>ç›®æ ‡èŒä½: ${targetJob}</div>
                            <div>ç›®æ ‡åŸå¸‚: ${getCityName(targetCity)}</div>
                            <div>æŠ•é€’æ•°é‡: ${deliveryCount} ä¸ªèŒä½/å¹³å°</div>
                            <div>æŠ•é€’é—´éš”: ${deliveryInterval} ä¸ª/åˆ†</div>
                            <div>è‡ªåŠ¨ç™»å½•: ${autoLogin ? 'æ˜¯' : 'å¦'}</div>
                            <div>ä¿å­˜ç»“æœ: ${saveResults ? 'æ˜¯' : 'å¦'}</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>å¹³å°æŠ•é€’è¯¦æƒ…</h5>
                        <div style="background: rgba(82, 196, 26, 0.1); padding: 16px; border-radius: var(--border-radius);">
                            ${selectedPlatforms.map(platform => {
                                const platformName = getPlatformName(platform);
                                return `<div>âœ… ${platformName}: å®Œæˆ ${deliveryCount} ä¸ªèŒä½æŠ•é€’</div>`;
                            }).join('')}
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px;">
                        <h5>æŠ•é€’æ€»ç»“</h5>
                        <div style="background: rgba(24, 144, 255, 0.1); padding: 16px; border-radius: var(--border-radius);">
                            <div>ğŸ“Š æ€»æŠ•é€’èŒä½: ${deliveryStats.total} ä¸ª</div>
                            <div>âœ… æˆåŠŸæŠ•é€’: ${deliveryStats.success} ä¸ª</div>
                            <div>âŒ æŠ•é€’å¤±è´¥: ${deliveryStats.failed} ä¸ª</div>
                            <div>ğŸ¯ æˆåŠŸç‡: ${((deliveryStats.success / deliveryStats.total) * 100).toFixed(1)}%</div>
                            <div>â±ï¸ é¢„è®¡è€—æ—¶: ${Math.round((deliveryCount * selectedPlatforms.length * deliveryInterval) / 60)} åˆ†é’Ÿ</div>
                        </div>
                    </div>
                `;
                
                showNotification(`æ‰¹é‡æŠ•é€’å®Œæˆï¼ŒæˆåŠŸ ${deliveryStats.success} ä¸ªï¼Œå¤±è´¥ ${deliveryStats.failed} ä¸ª`, 'success');
                
            } catch (error) {
                console.error('æ‰¹é‡æŠ•é€’å¤±è´¥:', error);
                deliveryResult.innerHTML = `<div style="text-align: center; color: var(--error-color); padding: 40px;"><div style="font-size: 48px; margin-bottom: 16px;">âŒ</div><h4>æ‰¹é‡æŠ•é€’å¤±è´¥</h4><p style="margin-top: 8px;">${error.message}</p></div>`;
                showNotification('æ‰¹é‡æŠ•é€’å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
            }
        }
        
        // è·å–å¹³å°åç§°
        function getPlatformName(platform) {
            const platformNames = {
                zhilian: 'æ™ºè”æ‹›è˜',
                '51job': 'å‰ç¨‹æ— å¿§',
                boss: 'Bossç›´è˜',
                lagou: 'æ‹‰å‹¾ç½‘'
            };
            return platformNames[platform] || platform;
        }
        
        // è·å–åŸå¸‚åç§°
        function getCityName(cityCode) {
            const cityMap = {
                '530': 'åŒ—äº¬',
                '538': 'ä¸Šæµ·',
                '539': 'å¹¿å·',
                '540': 'æ·±åœ³',
                '585': 'æ­å·',
                '570': 'æˆéƒ½',
                '565': 'æ­¦æ±‰',
                '546': 'è¥¿å®‰',
                '551': 'å—äº¬',
                '580': 'é‡åº†'
            };
            return cityMap[cityCode] || 'æœªçŸ¥åŸå¸‚';
        }
        
        // è·å–ç­›é€‰æ¡ä»¶åç§°
        function getFilterConditionName(condition) {
            const conditionNames = {
                all: 'å…¨éƒ¨èŒä½',
                relevant: 'ç›¸å…³æ€§é«˜',
                recent: 'æœ€æ–°å‘å¸ƒ',
                salary: 'è–ªèµ„ä¼˜å…ˆ'
            };
            return conditionNames[condition] || condition;
        }
        
        // æ˜¾ç¤ºæŠ•é€’è®°å½•
        function showDeliveryRecords() {
            console.log('æ˜¾ç¤ºæŠ•é€’è®°å½•');
            // æ»šåŠ¨åˆ°æŠ•é€’è®°å½•éƒ¨åˆ†
            const recordsSection = document.getElementById('deliveryRecordsSection');
            if (recordsSection) {
                recordsSection.scrollIntoView({ behavior: 'smooth' });
            }
            // æ¸²æŸ“æŠ•é€’è®°å½•è¡¨æ ¼
            renderDeliveryRecordsTable();
        }
        
        // è·³è½¬åˆ°æŒ‡å®šé¡µç 
        function goToPage(page) {
            currentPage = page;
            renderDeliveryRecordsTable();
        }
        
        // æ¸²æŸ“æŠ•é€’è®°å½•è¡¨æ ¼
        function renderDeliveryRecordsTable() {
            const deliveryRecordsContent = document.getElementById('recordsContent');
            if (!deliveryRecordsContent) return;
            
            // æ£€æŸ¥æ˜¯å¦æœ‰æŠ•é€’è®°å½•
            if (deliveryRecords.length === 0) {
                deliveryRecordsContent.innerHTML = `
                    <div style="text-align: center; padding: 60px;">
                        <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“‹</div>
                        <h4>æš‚æ— æŠ•é€’è®°å½•</h4>
                        <p style="margin-top: 8px; color: var(--text-secondary);">æ‚¨è¿˜æ²¡æœ‰ä»»ä½•æŠ•é€’è®°å½•ï¼Œå¼€å§‹æŠ•é€’èŒä½å§ï¼</p>
                    </div>
                `;
                return;
            }
            
            // è·å–å½“å‰ç­›é€‰å’Œæ’åºå€¼
            const currentFilterValue = document.getElementById('recordFilter')?.value || 'all';
            const currentPlatformValue = document.getElementById('platformFilter')?.value || 'all';
            const currentSortValue = document.getElementById('recordSort')?.value || 'time-desc';
            
            // æ¸²æŸ“è¡¨æ ¼
            let html = `
                <div style="margin-bottom: 16px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        <span style="font-weight: 500;">å…± ${deliveryRecords.length} æ¡æŠ•é€’è®°å½•</span>
                    </div>
                    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                        <select id="recordFilter" onchange="currentPage = 1; renderDeliveryRecordsTable()" class="form-control" style="width: auto;">
                            <option value="all" ${currentFilterValue === 'all' ? 'selected' : ''}>å…¨éƒ¨ç»“æœ</option>
                            <option value="æˆåŠŸ" ${currentFilterValue === 'æˆåŠŸ' ? 'selected' : ''}>æˆåŠŸ</option>
                            <option value="å¤±è´¥" ${currentFilterValue === 'å¤±è´¥' ? 'selected' : ''}>å¤±è´¥</option>
                            <option value="å¾…å¤„ç†" ${currentFilterValue === 'å¾…å¤„ç†' ? 'selected' : ''}>å¾…å¤„ç†</option>
                        </select>
                        <select id="platformFilter" onchange="currentPage = 1; renderDeliveryRecordsTable()" class="form-control" style="width: auto;">
                            <option value="all" ${currentPlatformValue === 'all' ? 'selected' : ''}>å…¨éƒ¨å¹³å°</option>
                            <option value="æ™ºè”æ‹›è˜" ${currentPlatformValue === 'æ™ºè”æ‹›è˜' ? 'selected' : ''}>æ™ºè”æ‹›è˜</option>
                            <option value="å‰ç¨‹æ— å¿§" ${currentPlatformValue === 'å‰ç¨‹æ— å¿§' ? 'selected' : ''}>å‰ç¨‹æ— å¿§</option>
                            <option value="Bossç›´è˜" ${currentPlatformValue === 'Bossç›´è˜' ? 'selected' : ''}>Bossç›´è˜</option>
                            <option value="æ‹‰å‹¾ç½‘" ${currentPlatformValue === 'æ‹‰å‹¾ç½‘' ? 'selected' : ''}>æ‹‰å‹¾ç½‘</option>
                        </select>
                        <select id="recordSort" onchange="currentPage = 1; renderDeliveryRecordsTable()" class="form-control" style="width: auto;">
                            <option value="time-desc" ${currentSortValue === 'time-desc' ? 'selected' : ''}>æ—¶é—´å€’åº</option>
                            <option value="time-asc" ${currentSortValue === 'time-asc' ? 'selected' : ''}>æ—¶é—´æ­£åº</option>
                        </select>
                    </div>
                </div>
                
                <div style="overflow-x: auto;">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>æŠ•é€’å¹³å°</th>
                                <th>æŠ•é€’æ—¶é—´</th>
                                <th>æŠ•é€’ç»“æœ</th>
                                <th>æŠ•é€’å…¬å¸</th>
                                <th>æŠ•é€’å²—ä½</th>
                                <th>æŠ•é€’åœ°å€</th>
                                <th>æŠ•é€’ç½‘å€</th>
                                <th>æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            // è·å–ç­›é€‰å’Œæ’åºå€¼
            const filterValue = currentFilterValue;
            const platformValue = currentPlatformValue;
            const sortValue = currentSortValue;
            
            // ç­›é€‰å’Œæ’åºè®°å½•
            let filteredRecords = [...deliveryRecords];
            
            // ç­›é€‰ç»“æœ
            if (filterValue !== 'all') {
                filteredRecords = filteredRecords.filter(record => record.result === filterValue);
            }
            
            // ç­›é€‰å¹³å°
            if (platformValue !== 'all') {
                filteredRecords = filteredRecords.filter(record => record.platform === platformValue);
            }
            
            // æ’åº
            switch (sortValue) {
                case 'time-asc':
                    filteredRecords.sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));
                    break;
                case 'platform':
                    filteredRecords.sort((a, b) => a.platform.localeCompare(b.platform));
                    break;
                case 'company':
                    filteredRecords.sort((a, b) => a.company.localeCompare(b.company));
                    break;
                default: // time-desc
                    filteredRecords.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            }
            
            // åˆ†é¡µå¤„ç†
            const totalPages = Math.ceil(filteredRecords.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const paginatedRecords = filteredRecords.slice(startIndex, endIndex);
            
            // æ¸²æŸ“è®°å½•
            paginatedRecords.forEach(record => {
                const formattedTime = new Date(record.timestamp).toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                let resultClass = '';
                let resultText = '';
                
                switch (record.result) {
                    case 'æˆåŠŸ':
                        resultClass = 'status-success';
                        resultText = 'âœ… æˆåŠŸ';
                        break;
                    case 'å¤±è´¥':
                        resultClass = 'status-error';
                        resultText = 'âŒ å¤±è´¥';
                        break;
                    case 'å¾…å¤„ç†':
                        resultClass = 'status-warning';
                        resultText = 'â³ å¾…å¤„ç†';
                        break;
                }
                
                const deliveryWebsite = record.deliveryWebsite || 'https://www.example.com';
                html += `
                    <tr>
                        <td>${record.platform}</td>
                        <td>${formattedTime}</td>
                        <td><span class="status ${resultClass}">${resultText}</span></td>
                        <td>${record.company}</td>
                        <td>${record.position}</td>
                        <td>${record.address}</td>
                        <td><a href="${deliveryWebsite}" target="_blank" style="color: var(--primary-color); text-decoration: none;">${deliveryWebsite}</a></td>
                        <td>
                            <button class="btn btn-secondary" style="padding: 4px 8px; font-size: 12px;" onclick="viewRecordDetail('${record.id}')">æŸ¥çœ‹è¯¦æƒ…</button>
                        </td>
                    </tr>
                `;
            });
            
            html += `
                        </tbody>
                    </table>
                </div>
                
                ${filteredRecords.length !== deliveryRecords.length ? `
                <div style="margin-top: 16px; padding: 12px; background: rgba(250, 173, 20, 0.1); border-radius: var(--border-radius); font-size: 13px;">
                    æ˜¾ç¤º ${paginatedRecords.length} æ¡è®°å½•ï¼Œå…± ${filteredRecords.length} æ¡
                </div>
                ` : ''}
                
                ${totalPages > 1 ? `
                <div style="margin-top: 16px; display: flex; justify-content: center; align-items: center; gap: 8px;">
                    <button onclick="goToPage(${Math.max(1, currentPage - 1)})" class="btn btn-secondary" ${currentPage === 1 ? 'disabled' : ''}>
                        ä¸Šä¸€é¡µ
                    </button>
                    ${Array.from({ length: totalPages }, (_, i) => i + 1).map(page => `
                        <button onclick="goToPage(${page})" class="btn ${currentPage === page ? 'btn-primary' : 'btn-secondary'}" style="min-width: 32px;">
                            ${page}
                        </button>
                    `).join('')}
                    <button onclick="goToPage(${Math.min(totalPages, currentPage + 1)})" class="btn btn-secondary" ${currentPage === totalPages ? 'disabled' : ''}>
                        ä¸‹ä¸€é¡µ
                    </button>
                </div>
                ` : ''}
            `;
            
            deliveryRecordsContent.innerHTML = html;
        }
        
        // æŸ¥çœ‹æŠ•é€’è®°å½•è¯¦æƒ…
        function viewRecordDetail(recordId) {
            console.log('æŸ¥çœ‹æŠ•é€’è®°å½•è¯¦æƒ…:', recordId);
            
            const record = deliveryRecords.find(r => r.id === recordId);
            if (!record) {
                showNotification('è®°å½•ä¸å­˜åœ¨', 'error');
                return;
            }
            
            // åˆ›å»ºè¯¦æƒ…æ¨¡æ€æ¡†
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
            `;
            
            const formattedTime = new Date(record.timestamp).toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // åˆ›å»ºå†…å®¹å®¹å™¨
            const contentContainer = document.createElement('div');
            contentContainer.style.cssText = `background: white; border-radius: var(--border-radius); padding: 24px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto;`;
            
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé˜²æ­¢ç‚¹å‡»å†…å®¹æ—¶è§¦å‘èƒŒæ™¯å…³é—­
            contentContainer.onclick = function(e) {
                e.stopPropagation();
            };
            
            // åˆ›å»ºå¤´éƒ¨
            const header = document.createElement('div');
            header.style.cssText = `display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;`;
            
            const title = document.createElement('h4');
            title.textContent = 'æŠ•é€’è®°å½•è¯¦æƒ…';
            
            const closeButton = document.createElement('button');
            closeButton.textContent = 'Ã—';
            closeButton.style.cssText = `background: none; border: none; font-size: 20px; cursor: pointer;`;
            closeButton.onclick = function() {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            };
            
            header.appendChild(title);
            header.appendChild(closeButton);
            
            // åˆ›å»ºå†…å®¹
            const content = document.createElement('div');
            content.style.cssText = `display: grid; gap: 12px;`;
            
            const platformDiv = document.createElement('div');
            platformDiv.innerHTML = `<strong>æŠ•é€’å¹³å°:</strong> ${record.platform}`;
            content.appendChild(platformDiv);
            
            const timeDiv = document.createElement('div');
            timeDiv.innerHTML = `<strong>æŠ•é€’æ—¶é—´:</strong> ${formattedTime}`;
            content.appendChild(timeDiv);
            
            const resultDiv = document.createElement('div');
            resultDiv.innerHTML = `<strong>æŠ•é€’ç»“æœ:</strong> ${record.result}`;
            content.appendChild(resultDiv);
            
            const companyDiv = document.createElement('div');
            companyDiv.innerHTML = `<strong>æŠ•é€’å…¬å¸å:</strong> ${record.company}`;
            content.appendChild(companyDiv);
            
            const websiteDiv = document.createElement('div');
            const deliveryWebsite = record.deliveryWebsite || 'https://www.example.com';
            websiteDiv.innerHTML = `<strong>æŠ•é€’ç½‘å€:</strong> <a href="${deliveryWebsite}" target="_blank" style="color: var(--primary-color); text-decoration: none;">${deliveryWebsite}</a>`;
            content.appendChild(websiteDiv);
            
            const positionDiv = document.createElement('div');
            positionDiv.innerHTML = `<strong>æŠ•é€’å²—ä½:</strong> ${record.position}`;
            content.appendChild(positionDiv);
            
            const addressDiv = document.createElement('div');
            addressDiv.innerHTML = `<strong>æŠ•é€’åœ°å€:</strong> ${record.address}`;
            content.appendChild(addressDiv);
            
            const statusDiv = document.createElement('div');
            statusDiv.innerHTML = `<strong>æŠ•é€’çŠ¶æ€:</strong> ${record.result === 'æˆåŠŸ' ? 'âœ… å·²æˆåŠŸæŠ•é€’' : record.result === 'å¤±è´¥' ? 'âŒ æŠ•é€’å¤±è´¥' : 'â³ ç­‰å¾…å¤„ç†'}`;
            content.appendChild(statusDiv);
            
            // åˆ›å»ºæŒ‰é’®å®¹å™¨
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = `margin-top: 20px; text-align: right;`;
            
            const closeBtn = document.createElement('button');
            closeBtn.className = 'btn btn-secondary';
            closeBtn.textContent = 'å…³é—­';
            closeBtn.onclick = function() {
                if (modal.parentNode) {
                    modal.parentNode.removeChild(modal);
                }
            };
            
            buttonContainer.appendChild(closeBtn);
            
            // ç»„è£…å†…å®¹å®¹å™¨
            contentContainer.appendChild(header);
            contentContainer.appendChild(content);
            contentContainer.appendChild(buttonContainer);
            
            // ç»„è£…æ¨¡æ€æ¡†
            modal.appendChild(contentContainer);
            
            // æ·»åŠ ç‚¹å‡»èƒŒæ™¯å…³é—­åŠŸèƒ½
            modal.onclick = function(e) {
                if (e.target === modal) {
                    if (modal.parentNode) {
                        modal.parentNode.removeChild(modal);
                    }
                }
            };
            
            document.body.appendChild(modal);
        }
        
        // æ˜¾ç¤ºé¦–é¡µ
        function showHomePage() {
            console.log('æ˜¾ç¤ºé¦–é¡µ');
            
            // éšè—æ‰€æœ‰é¡µé¢éƒ¨åˆ†
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // æ˜¾ç¤ºé¦–é¡µéƒ¨åˆ†
            const homeSection = document.getElementById('homeSection');
            if (homeSection) {
                homeSection.style.display = 'block';
            }
        }

        function getNotificationIcon(type) {
            switch(type) {
                case 'success': return 'âœ…';
                case 'warning': return 'âš ï¸';
                case 'error': return 'âŒ';
                default: return 'â„¹ï¸';
            }
        }

        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type = 'info') {
            // åˆ›å»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            
            const notificationId = 'notification-' + Date.now();
            notification.id = notificationId;
            
            notification.innerHTML = `
                <div class="notification-content">
                    <span class="notification-icon">${getNotificationIcon(type)}</span>
                    <span class="notification-message">${message}</span>
                    <button class="notification-close" onclick="document.getElementById('${notificationId}').remove()">Ã—</button>
                </div>
            `;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(notification);
            
            // è‡ªåŠ¨ç§»é™¤
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // åˆå§‹åŒ–æŠ•é€’é¡µé¢çš„ç®€å†é€‰æ‹©å™¨
        async function initializeResumeSelector() {
            const resumeSelector = document.getElementById('resumeSelectorDelivery');
            if (!resumeSelector) return;
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                resumeSelector.innerHTML = '<option value="">åŠ è½½ä¸­...</option>';
                
                // ä»APIè·å–ç®€å†åˆ—è¡¨
                const response = await fetch(`${API_BASE}/api/resume/list`, {
                    method: 'GET'
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    // æ›´æ–°æœ¬åœ°ç®€å†æ•°æ®
                    resumeData = result.data || [];
                    
                    // å¡«å……ç®€å†é€‰æ‹©ä¸‹æ‹‰æ¡†
                    populateResumeSelectorDelivery();
                } else {
                    throw new Error(result.error || 'è·å–ç®€å†åˆ—è¡¨å¤±è´¥');
                }
            } catch (error) {
                console.error('åˆå§‹åŒ–ç®€å†é€‰æ‹©å™¨å¤±è´¥:', error);
                const resumeSelector = document.getElementById('resumeSelectorDelivery');
                if (resumeSelector) {
                    resumeSelector.innerHTML = '<option value="">è¯·é€‰æ‹©è¦ä½¿ç”¨çš„ç®€å†</option>';
                }
            }
        }
        
        // å¡«å……æŠ•é€’é¡µé¢çš„ç®€å†é€‰æ‹©ä¸‹æ‹‰æ¡†
        function populateResumeSelectorDelivery() {
            const resumeSelector = document.getElementById('resumeSelectorDelivery');
            if (!resumeSelector) return;
            
            let options = '<option value="">è¯·é€‰æ‹©è¦ä½¿ç”¨çš„ç®€å†</option>';
            
            resumeData.forEach(resume => {
                options += `
                    <option value="${resume.id}">
                        ${resume.fileName} (${(resume.fileSize / 1024 / 1024).toFixed(2)}MB)
                    </option>
                `;
            });
            
            resumeSelector.innerHTML = options;
        }
        
        // åˆ‡æ¢ç®€å†é€‰æ‹©å™¨çŠ¶æ€
        function toggleResumeSelector() {
            const resumeSelector = document.getElementById('resumeSelectorDelivery');
            if (!resumeSelector) return;
            
            const usePlatformResume = document.querySelector('input[name="usePlatformResume"]:checked').value;
            
            if (usePlatformResume === 'yes') {
                resumeSelector.disabled = false;
                resumeSelector.style.opacity = '1';
                resumeSelector.style.cursor = 'pointer';
            } else {
                resumeSelector.disabled = true;
                resumeSelector.style.opacity = '0.6';
                resumeSelector.style.cursor = 'not-allowed';
                // æ¸…ç©ºé€‰æ‹©
                resumeSelector.value = '';
            }
        }
        
        // æŠ•é€’é¡µé¢ç®€å†é€‰æ‹©äº‹ä»¶
        function resumeSelectedForDelivery() {
            const resumeSelector = document.getElementById('resumeSelectorDelivery');
            const selectedResumeId = resumeSelector.value;
            
            if (selectedResumeId) {
                const selectedResume = resumeData.find(r => r && r.id === selectedResumeId);
                if (selectedResume) {
                    console.log('é€‰æ‹©çš„ç®€å†:', selectedResume.fileName);
                    showNotification(`å·²é€‰æ‹©ç®€å†: ${selectedResume.fileName}`, 'info');
                }
            }
        }
        
        // åˆå§‹åŒ–é¡µé¢
        function initializePage() {
            console.log('åˆå§‹åŒ–é¡µé¢...');
            
            // é‡ç½®æ‰€æœ‰ä¾§è¾¹æ é¡¹çš„activeçŠ¶æ€
            document.querySelectorAll('.sidebar-item').forEach(s => {
                s.classList.remove('active');
            });
            
            // æ£€æŸ¥URLå“ˆå¸Œå¹¶æ˜¾ç¤ºç›¸åº”é¡µé¢
            checkUrlHash();
            
            showNotification('é¡µé¢å·²åˆå§‹åŒ–', 'success');
        }
        
        // æ£€æŸ¥URLå“ˆå¸Œ
        function checkUrlHash() {
            const hash = window.location.hash.substring(1);
            
            console.log('æ£€æŸ¥URLå“ˆå¸Œ:', hash);
            
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // é‡ç½®æ‰€æœ‰ä¾§è¾¹æ é¡¹çš„activeçŠ¶æ€
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // æ ¹æ®hashæ˜¾ç¤ºå¯¹åº”é¡µé¢
            switch(hash) {
                case 'resumeManage':
                    showResumeManagePage();
                    break;
                case 'resume':
                    showResumePage();
                    break;
                case 'jobs':
                    showJobsPage();
                    break;
                case 'delivery':
                    showDeliveryPage();
                    break;
                case 'records':
                    showRecordsPage();
                    break;
                case 'interview':
                    showInterviewPage();
                    break;
                case 'analytics':
                    showAnalyticsPage();
                    break;
                case 'settings':
                    showSettingsPage();
                    break;
                case 'home':
                case '':
                default:
                    showHomePage();
                    break;
            }
            
            // æ¿€æ´»å¯¹åº”çš„ä¾§è¾¹æ é¡¹
            // å…ˆç§»é™¤æ‰€æœ‰ active ç±»
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // å†æ ¹æ® hash æ¿€æ´»å¯¹åº”é¡¹
            document.querySelectorAll('.sidebar-item').forEach(item => {
                const textNodes = Array.from(item.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim());
                const menuText = textNodes.length > 0 ? textNodes[0].textContent.trim() : '';
                
                let matchHash = '';
                switch(menuText) {
                    case 'é¦–é¡µ': matchHash = 'home'; break;
                    case 'ç®€å†ç®¡ç†': matchHash = 'resumeManage'; break;
                    case 'ç®€å†ä¼˜åŒ–': matchHash = 'resume'; break;
                    case 'èŒä½åŒ¹é…': matchHash = 'jobs'; break;
                    case 'æ™ºèƒ½æŠ•é€’': matchHash = 'delivery'; break;
                    case 'é¢è¯•æ•™ç»ƒ': matchHash = 'interview'; break;
                    case 'æ•°æ®åˆ†æ': matchHash = 'analytics'; break;
                    case 'ç³»ç»Ÿè®¾ç½®': matchHash = 'settings'; break;
                    case 'è§†é¢‘é¢è¯•': matchHash = 'videoInterview'; break;
                    case 'æ¨¡å‹é…ç½®': matchHash = 'config'; break;
                }
                
                // records é¡µé¢ä¹Ÿæ¿€æ´»"æ™ºèƒ½æŠ•é€’"
                if (hash === 'records' && menuText === 'æ™ºèƒ½æŠ•é€’') {
                    item.classList.add('active');
                } else if (matchHash && matchHash === hash) {
                    item.classList.add('active');
                }
            });
            
            // é¦–é¡µç‰¹æ®Šå¤„ç†ï¼šæ¿€æ´»é¦–é¡µèœå•é¡¹
            const sidebarItems = document.querySelectorAll('.sidebar-item');
            sidebarItems.forEach(item => {
                const textNodes = Array.from(item.childNodes).filter(node => node.nodeType === 3 && node.textContent.trim());
                const menuText = textNodes.length > 0 ? textNodes[0].textContent.trim() : '';
                
                if (menuText === 'é¦–é¡µ') {
                    if (hash === 'home' || hash === '') {
                        item.classList.add('active');
                    } else {
                        item.classList.remove('active');
                    }
                }
            });
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        let hashChangeListenerAdded = false;
        
        window.onload = function() {
            console.log('window.onload è§¦å‘');
            
            // å…ˆåˆå§‹åŒ–åº”ç”¨
            initializeApp();
            
            // å†æ£€æŸ¥URLå“ˆå¸Œå¹¶æ˜¾ç¤ºç›¸åº”é¡µé¢
            checkUrlHash();
            
            // æ˜¾ç¤ºé¡µé¢å†…å®¹
            document.body.style.visibility = 'visible';
            
            // ç›‘å¬hashå˜åŒ–äº‹ä»¶ï¼ˆåªç»‘å®šä¸€æ¬¡ï¼‰
            if (!hashChangeListenerAdded) {
                window.addEventListener('hashchange', function() {
                    checkUrlHash();
                });
                hashChangeListenerAdded = true;
            }
        };


    </script>
    
    <!-- é¢è¯•æŠ€å·§å¼¹çª— -->
    <div id="interviewTipsModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 10001; justify-content: center; align-items: center;">
        <div style="background: white; border-radius: var(--border-radius); width: 90%; max-width: 900px; max-height: 80vh; overflow: hidden; display: flex; flex-direction: column; position: relative;">
            <!-- å³ä¸Šè§’å…³é—­æŒ‰é’® -->
            <button onclick="closeInterviewTipsModal()" style="position: absolute; top: 16px; right: 16px; background: none; border: none; font-size: 24px; cursor: pointer; color: #999; z-index: 1;">âœ•</button>
            
            <!-- æ ‡é¢˜ -->
            <div style="padding: 24px; border-bottom: 1px solid var(--border-color);">
                <h3 style="margin: 0; font-size: 20px; font-weight: 600;">ğŸ’¡ é¢è¯•æŠ€å·§å’Œå»ºè®®</h3>
            </div>
            
            <!-- å†…å®¹åŒºåŸŸ -->
            <div style="padding: 24px; overflow-y: auto; flex: 1;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;">
                    <div style="background: rgba(24, 144, 255, 0.05); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--primary-color);">
                        <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">è‡ªæˆ‘ä»‹ç»æŠ€å·§</h4>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li style="margin-bottom: 8px;">â€¢ æ§åˆ¶åœ¨1-2åˆ†é’Ÿå†…</li>
                            <li style="margin-bottom: 8px;">â€¢ çªå‡ºæ ¸å¿ƒä¼˜åŠ¿å’Œæˆå°±</li>
                            <li style="margin-bottom: 8px;">â€¢ ä¸èŒä½è¦æ±‚ç›¸å…³</li>
                            <li style="margin-bottom: 8px;">â€¢ ä¿æŒè‡ªä¿¡å’Œç®€æ´</li>
                        </ul>
                    </div>
                    <div style="background: rgba(82, 196, 26, 0.05); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--success-color);">
                        <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">å›ç­”é—®é¢˜æŠ€å·§</h4>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li style="margin-bottom: 8px;">â€¢ ä½¿ç”¨STARæ³•åˆ™ï¼ˆæƒ…å¢ƒã€ä»»åŠ¡ã€è¡ŒåŠ¨ã€ç»“æœï¼‰</li>
                            <li style="margin-bottom: 8px;">â€¢ æä¾›å…·ä½“ä¾‹å­</li>
                            <li style="margin-bottom: 8px;">â€¢ ä¿æŒç»“æ„æ¸…æ™°</li>
                            <li style="margin-bottom: 8px;">â€¢ è¯šå®å›ç­”ï¼Œä¸å¤¸å¤§äº‹å®</li>
                        </ul>
                    </div>
                    <div style="background: rgba(250, 173, 20, 0.05); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--warning-color);">
                        <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">éè¯­è¨€æ²Ÿé€š</h4>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li style="margin-bottom: 8px;">â€¢ ä¿æŒçœ¼ç¥äº¤æµ</li>
                            <li style="margin-bottom: 8px;">â€¢ ä¿æŒè‰¯å¥½åå§¿</li>
                            <li style="margin-bottom: 8px;">â€¢ é€‚å½“ä½¿ç”¨æ‰‹åŠ¿</li>
                            <li style="margin-bottom: 8px;">â€¢ æ§åˆ¶é¢éƒ¨è¡¨æƒ…</li>
                        </ul>
                    </div>
                    <div style="background: rgba(114, 46, 209, 0.05); padding: 20px; border-radius: var(--border-radius); border-left: 4px solid var(--info-color);">
                        <h4 style="margin-bottom: 16px; font-size: 16px; font-weight: 600;">ç»“æŸé¢è¯•æŠ€å·§</h4>
                        <ul style="list-style: none; padding: 0; line-height: 1.6;">
                            <li style="margin-bottom: 8px;">â€¢ å‡†å¤‡1-2ä¸ªé—®é¢˜è¯¢é—®é¢è¯•å®˜</li>
                            <li style="margin-bottom: 8px;">â€¢ è¡¨è¾¾å¯¹èŒä½çš„å…´è¶£</li>
                            <li style="margin-bottom: 8px;">â€¢ è¯¢é—®åç»­æµç¨‹</li>
                            <li style="margin-bottom: 8px;">â€¢ å‘é€æ„Ÿè°¢ä¿¡</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- åº•éƒ¨å…³é—­æŒ‰é’® -->
            <div style="padding: 16px 24px; border-top: 1px solid var(--border-color); text-align: right;">
                <button class="btn btn-primary" onclick="closeInterviewTipsModal()">å…³é—­</button>
            </div>
        </div>
    </div>
    
    <script>
        // æ˜¾ç¤ºé¢è¯•æŠ€å·§å¼¹çª—
        function showInterviewTipsModal() {
            const modal = document.getElementById('interviewTipsModal');
            if (modal) {
                modal.style.display = 'flex';
                // ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = 'hidden';
            }
        }
        
        // å…³é—­é¢è¯•æŠ€å·§å¼¹çª—
        function closeInterviewTipsModal() {
            const modal = document.getElementById('interviewTipsModal');
            if (modal) {
                modal.style.display = 'none';
                // æ¢å¤èƒŒæ™¯æ»šåŠ¨
                document.body.style.overflow = '';
            }
        }
    </script>
</body>
</html>