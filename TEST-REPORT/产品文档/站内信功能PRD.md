# äº§å“éœ€æ±‚æ–‡æ¡£ (PRD) - ç«™å†…ä¿¡åŠŸèƒ½

> éœ€æ±‚ç¼–å·ï¼šREQ-008
> äº§å“ç»ç†ï¼šå‡¯æ–‡
> åˆ›å»ºæ—¥æœŸï¼š2026-02-23
> æœ€åæ›´æ–°ï¼š2026-02-23
> çŠ¶æ€ï¼šå¾…è¯„å®¡

---

## ğŸ“‹ éœ€æ±‚æ¦‚è¿°

### åŠŸèƒ½åç§°
ç«™å†…ä¿¡ç³»ç»Ÿ

### éœ€æ±‚èƒŒæ™¯
å½“å‰å¹³å°ç¼ºä¹å†…éƒ¨æ²Ÿé€šæœºåˆ¶ï¼Œå›¢é˜Ÿæˆå‘˜æ— æ³•æœ‰æ•ˆè¿›è¡Œä¿¡æ¯äº¤æµã€ä»»åŠ¡åè°ƒå’Œé—®é¢˜åé¦ˆï¼Œå½±å“å·¥ä½œæ•ˆç‡å’Œå›¢é˜Ÿåä½œã€‚

### ä¸šåŠ¡ä»·å€¼
1. **æå‡æ²Ÿé€šæ•ˆç‡**ï¼šå»ºç«‹å¹³å°å†…éƒ¨æ²Ÿé€šæ¸ é“ï¼Œå‡å°‘å¤–éƒ¨å·¥å…·ä¾èµ–
2. **å¼ºåŒ–å›¢é˜Ÿåä½œ**ï¼šæ”¯æŒè·¨éƒ¨é—¨ã€è·¨è§’è‰²ä¿¡æ¯ä¼ é€’å’Œä»»åŠ¡åè°ƒ
3. **å»ºç«‹æ²Ÿé€šè®°å½•**ï¼šæ‰€æœ‰å†…éƒ¨æ²Ÿé€šç•™ç—•ï¼Œä¾¿äºé—®é¢˜è¿½æº¯å’Œè´£ä»»æ˜ç¡®
4. **é™ä½æ²Ÿé€šæˆæœ¬**ï¼šå‡å°‘é‚®ä»¶ã€å³æ—¶é€šè®¯å·¥å…·çš„ä½¿ç”¨é¢‘ç‡

---

## ğŸ¯ ç›®æ ‡ç”¨æˆ·

| ç”¨æˆ·è§’è‰² | ä½¿ç”¨åœºæ™¯ | æ ¸å¿ƒéœ€æ±‚ |
|----------|----------|----------|
| å…¨ä½“æˆå‘˜ | æ—¥å¸¸æ²Ÿé€š | å¿«é€Ÿå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ |
| ç®¡ç†è€… | ä»»åŠ¡åˆ†é… | ä¸€å¯¹ä¸€æˆ–ç¾¤ç»„ä»»åŠ¡é€šçŸ¥ |
| äº§å“ç»ç† | éœ€æ±‚ä¼ è¾¾ | éœ€æ±‚å˜æ›´å’Œè¿›åº¦åŒæ­¥ |
| æŠ€æœ¯å›¢é˜Ÿ | é—®é¢˜åé¦ˆ | æŠ€æœ¯é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆè®¨è®º |
| æµ‹è¯•å›¢é˜Ÿ | æµ‹è¯•é€šçŸ¥ | æµ‹è¯•ç»“æœå’Œé—®é¢˜æŠ¥å‘Š |

---

## ğŸ“Š åŠŸèƒ½éœ€æ±‚

### 1. æ¶ˆæ¯åŸºç¡€åŠŸèƒ½

#### 1.1 æ¶ˆæ¯ç±»å‹
| ç±»å‹ | ç”¨é€” | ç‰¹ç‚¹ |
|------|------|------|
| æ–‡æœ¬æ¶ˆæ¯ | æ—¥å¸¸æ²Ÿé€š | æ”¯æŒè¡¨æƒ…ã€é“¾æ¥ã€æ ¼å¼åŒ–æ–‡æœ¬ |
| æ–‡ä»¶æ¶ˆæ¯ | èµ„æ–™åˆ†äº« | æ”¯æŒæ–‡æ¡£ã€å›¾ç‰‡ã€è§†é¢‘ç­‰æ–‡ä»¶ |
| ä»£ç ç‰‡æ®µ | æŠ€æœ¯è®¨è®º | ä»£ç é«˜äº®ã€è¯­è¨€è¯†åˆ« |
| ä»»åŠ¡æ¶ˆæ¯ | å·¥ä½œåè°ƒ | ä»»åŠ¡åˆ†é…ã€çŠ¶æ€æ›´æ–°ã€æˆªæ­¢æé†’ |

#### 1.2 æ¶ˆæ¯æ ¼å¼åŒ–
- **å¯Œæ–‡æœ¬ç¼–è¾‘**ï¼šæ”¯æŒç²—ä½“ã€æ–œä½“ã€ä¸‹åˆ’çº¿ã€åˆ é™¤çº¿
- **åˆ—è¡¨æ”¯æŒ**ï¼šæœ‰åºåˆ—è¡¨ã€æ— åºåˆ—è¡¨ã€ä»»åŠ¡åˆ—è¡¨
- **ä»£ç å—**ï¼šæ”¯æŒå¤šè¯­è¨€è¯­æ³•é«˜äº®
- **é“¾æ¥é¢„è§ˆ**ï¼šè‡ªåŠ¨è¯†åˆ«é“¾æ¥å¹¶ç”Ÿæˆé¢„è§ˆå¡ç‰‡
- **è¡¨æƒ…ç¬¦å·**ï¼šæ”¯æŒå¸¸ç”¨è¡¨æƒ…ç¬¦å·å’Œè‡ªå®šä¹‰è¡¨æƒ…

#### 1.3 æ¶ˆæ¯çŠ¶æ€
- **å‘é€çŠ¶æ€**ï¼šå‘é€ä¸­ã€å·²å‘é€ã€å‘é€å¤±è´¥
- **é˜…è¯»çŠ¶æ€**ï¼šæœªè¯»ã€å·²è¯»ã€é˜…è¯»æ—¶é—´
- **å¤„ç†çŠ¶æ€**ï¼šå¾…å¤„ç†ã€å¤„ç†ä¸­ã€å·²å®Œæˆ
- **ç´§æ€¥ç¨‹åº¦**ï¼šæ™®é€šã€é‡è¦ã€ç´§æ€¥

### 2. æ¶ˆæ¯ç®¡ç†åŠŸèƒ½

#### 2.1 æ¶ˆæ¯ç»„ç»‡
- **æ–‡ä»¶å¤¹åˆ†ç±»**ï¼šæŒ‰é¡¹ç›®ã€éƒ¨é—¨ã€ä¸»é¢˜åˆ†ç±»å­˜å‚¨
- **æ ‡ç­¾ç³»ç»Ÿ**ï¼šè‡ªå®šä¹‰æ ‡ç­¾è¿›è¡Œæ¶ˆæ¯æ ‡è®°
- **æœç´¢åŠŸèƒ½**ï¼šå…¨æ–‡æœç´¢ã€æŒ‰å‘ä»¶äººã€æ—¶é—´ã€æ ‡ç­¾ç­›é€‰
- **æ”¶è—åŠŸèƒ½**ï¼šé‡è¦æ¶ˆæ¯æ”¶è—å’Œå¿«é€Ÿè®¿é—®

#### 2.2 æ¶ˆæ¯æ“ä½œ
- **æ‰¹é‡æ“ä½œ**ï¼šæ‰¹é‡åˆ é™¤ã€ç§»åŠ¨ã€æ ‡è®°å·²è¯»
- **æ¶ˆæ¯è½¬å‘**ï¼šå•æ¡æˆ–æ‰¹é‡æ¶ˆæ¯è½¬å‘
- **æ¶ˆæ¯å¼•ç”¨**ï¼šå¼•ç”¨å†å²æ¶ˆæ¯è¿›è¡Œå›å¤
- **æ¶ˆæ¯æ’¤å›**ï¼šå‘é€åä¸€å®šæ—¶é—´å†…å¯æ’¤å›

#### 2.3 æ¶ˆæ¯é€šçŸ¥
- **å®æ—¶é€šçŸ¥**ï¼šæ–°æ¶ˆæ¯å³æ—¶æé†’
- **é€šçŸ¥è®¾ç½®**ï¼šè‡ªå®šä¹‰é€šçŸ¥è§„åˆ™å’Œå…æ‰“æ‰°æ—¶é—´
- **é€šçŸ¥æ¸ é“**ï¼šç«™å†…é€šçŸ¥ã€é‚®ä»¶é€šçŸ¥ã€æ¨é€é€šçŸ¥
- **é€šçŸ¥èšåˆ**ï¼šç›¸ä¼¼æ¶ˆæ¯æ™ºèƒ½èšåˆæ˜¾ç¤º

### 3. å¯¹è¯ç®¡ç†åŠŸèƒ½

#### 3.1 å¯¹è¯ç±»å‹
- **ä¸€å¯¹ä¸€å¯¹è¯**ï¼šä¸¤äººä¹‹é—´çš„ç§å¯†æ²Ÿé€š
- **ç¾¤ç»„å¯¹è¯**ï¼šå¤šäººå‚ä¸çš„å›¢é˜Ÿè®¨è®º
- **ä¸´æ—¶å¯¹è¯**ï¼šåŸºäºç‰¹å®šä»»åŠ¡çš„çŸ­æœŸæ²Ÿé€š
- **é¡¹ç›®å¯¹è¯**ï¼šé¡¹ç›®ç›¸å…³çš„é•¿æœŸæ²Ÿé€š

#### 3.2 å¯¹è¯è®¾ç½®
- **æˆå‘˜ç®¡ç†**ï¼šæ·»åŠ /ç§»é™¤æˆå‘˜ã€è®¾ç½®ç®¡ç†å‘˜
- **æƒé™æ§åˆ¶**ï¼šæ¶ˆæ¯å‘é€æƒé™ã€æ–‡ä»¶ä¸Šä¼ æƒé™
- **å¯¹è¯è®¾ç½®**ï¼šå¯¹è¯åç§°ã€å¤´åƒã€æè¿°
- **å¯¹è¯å½’æ¡£**ï¼šä¸æ´»è·ƒå¯¹è¯è‡ªåŠ¨å½’æ¡£

#### 3.3 å¯¹è¯ç»Ÿè®¡
- **æ´»è·ƒåº¦ç»Ÿè®¡**ï¼šæ¶ˆæ¯æ•°é‡ã€å‚ä¸åº¦ã€å“åº”æ—¶é—´
- **æ•ˆç‡åˆ†æ**ï¼šé—®é¢˜è§£å†³æ—¶é—´ã€ä»»åŠ¡å®Œæˆç‡
- **ä½¿ç”¨æŠ¥å‘Š**ï¼šå®šæœŸç”Ÿæˆä½¿ç”¨æƒ…å†µæŠ¥å‘Š

### 4. é›†æˆåŠŸèƒ½

#### 4.1 ä»»åŠ¡é›†æˆ
- **ä»»åŠ¡åˆ›å»º**ï¼šä»æ¶ˆæ¯ç›´æ¥åˆ›å»ºä»»åŠ¡
- **çŠ¶æ€åŒæ­¥**ï¼šä»»åŠ¡çŠ¶æ€å˜æ›´è‡ªåŠ¨é€šçŸ¥
- **æˆªæ­¢æé†’**ï¼šä»»åŠ¡æˆªæ­¢æ—¥æœŸè‡ªåŠ¨æé†’
- **å®Œæˆé€šçŸ¥**ï¼šä»»åŠ¡å®Œæˆåè‡ªåŠ¨é€šçŸ¥ç›¸å…³äººå‘˜

#### 4.2 æ–‡æ¡£é›†æˆ
- **æ–‡æ¡£åˆ†äº«**ï¼šå¿«é€Ÿåˆ†äº«å¹³å°å†…æ–‡æ¡£
- **ç‰ˆæœ¬é€šçŸ¥**ï¼šæ–‡æ¡£ç‰ˆæœ¬æ›´æ–°è‡ªåŠ¨é€šçŸ¥
- **åä½œç¼–è¾‘**ï¼šæ”¯æŒå¤šäººåä½œç¼–è¾‘æ–‡æ¡£
- **è¯„è®ºé›†æˆ**ï¼šæ–‡æ¡£è¯„è®ºåŒæ­¥åˆ°ç«™å†…ä¿¡

#### 4.3 æ—¥å†é›†æˆ
- **ä¼šè®®é‚€è¯·**ï¼šç›´æ¥å‘é€ä¼šè®®é‚€è¯·
- **æ—¥ç¨‹åŒæ­¥**ï¼šæ—¥ç¨‹å˜æ›´è‡ªåŠ¨é€šçŸ¥
- **æé†’è®¾ç½®**ï¼šé‡è¦äº‹ä»¶æé†’è®¾ç½®
- **æ—¶é—´åè°ƒ**ï¼šå¤šäººæ—¶é—´åè°ƒå·¥å…·

---

## ğŸ—ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### 1. æ•°æ®æ¨¡å‹è®¾è®¡

#### 1.1 æ¶ˆæ¯è¡¨ç»“æ„
```sql
CREATE TABLE messages (
    id INT PRIMARY KEY AUTO_INCREMENT,
    conversation_id INT NOT NULL COMMENT 'å¯¹è¯ID',
    sender_id INT NOT NULL COMMENT 'å‘é€è€…ID',
    content TEXT NOT NULL COMMENT 'æ¶ˆæ¯å†…å®¹',
    message_type ENUM('text', 'file', 'code', 'task') DEFAULT 'text' COMMENT 'æ¶ˆæ¯ç±»å‹',
    message_status ENUM('sending', 'sent', 'failed') DEFAULT 'sent' COMMENT 'å‘é€çŠ¶æ€',
    read_status ENUM('unread', 'read') DEFAULT 'unread' COMMENT 'é˜…è¯»çŠ¶æ€',
    priority ENUM('normal', 'important', 'urgent') DEFAULT 'normal' COMMENT 'ç´§æ€¥ç¨‹åº¦',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    deleted_at TIMESTAMP NULL COMMENT 'åˆ é™¤æ—¶é—´',
    FOREIGN KEY (conversation_id) REFERENCES conversations(id),
    FOREIGN KEY (sender_id) REFERENCES users(id),
    INDEX idx_conversation_created (conversation_id, created_at),
    INDEX idx_sender_created (sender_id, created_at)
);

CREATE TABLE message_attachments (
    id INT PRIMARY KEY AUTO_INCREMENT,
    message_id INT NOT NULL COMMENT 'æ¶ˆæ¯ID',
    file_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶å',
    file_path VARCHAR(500) NOT NULL COMMENT 'æ–‡ä»¶è·¯å¾„',
    file_size INT NOT NULL COMMENT 'æ–‡ä»¶å¤§å°',
    file_type VARCHAR(50) NOT NULL COMMENT 'æ–‡ä»¶ç±»å‹',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'ä¸Šä¼ æ—¶é—´',
    FOREIGN KEY (message_id) REFERENCES messages(id) ON DELETE CASCADE
);

CREATE TABLE message_reads (
    id INT PRIMARY KEY AUTO_INCREMENT,
    message_id INT NOT NULL COMMENT 'æ¶ˆæ¯ID',
    user_id INT NOT NULL COMMENT 'ç”¨æˆ·ID',
    read_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'é˜…è¯»æ—¶é—´',
    FOREIGN KEY (message_id) REFERENCES messages(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id),
    UNIQUE KEY unique_message_user (message_id, user_id)
);
```

#### 1.2 å¯¹è¯è¡¨ç»“æ„
```sql
CREATE TABLE conversations (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200) COMMENT 'å¯¹è¯åç§°',
    type ENUM('direct', 'group', 'project') DEFAULT 'direct' COMMENT 'å¯¹è¯ç±»å‹',
    creator_id INT NOT NULL COMMENT 'åˆ›å»ºè€…ID',
    description TEXT COMMENT 'å¯¹è¯æè¿°',
    avatar_url VARCHAR(500) COMMENT 'å¤´åƒURL',
    settings JSON COMMENT 'å¯¹è¯è®¾ç½®',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    archived_at TIMESTAMP NULL COMMENT 'å½’æ¡£æ—¶é—´',
    FOREIGN KEY (creator_id) REFERENCES users(id)
);

CREATE TABLE conversation_participants (
    id INT PRIMARY KEY AUTO_INCREMENT,
    conversation_id INT NOT NULL COMMENT 'å¯¹è¯ID',
    user_id INT NOT NULL COMMENT 'ç”¨æˆ·ID',
    role ENUM('member', 'admin', 'owner') DEFAULT 'member' COMMENT 'è§’è‰²',
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP COMMENT 'åŠ å…¥æ—¶é—´',
    last_read_at TIMESTAMP NULL COMMENT 'æœ€åé˜…è¯»æ—¶é—´',
    FOREIGN KEY (conversation_id) REFERENCES conversations(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id),
    UNIQUE KEY unique_conversation_user (conversation_id, user_id)
);
```

### 2. APIæ¥å£è®¾è®¡

#### 2.1 æ¶ˆæ¯ç›¸å…³æ¥å£
```javascript
// è·å–æ¶ˆæ¯åˆ—è¡¨
GET /api/conversations/:id/messages
Query Parameters:
- page: é¡µç  (é»˜è®¤: 1)
- limit: æ¯é¡µæ•°é‡ (é»˜è®¤: 20)
- before: è·å–æŒ‡å®šæ—¶é—´ä¹‹å‰çš„æ¶ˆæ¯
- after: è·å–æŒ‡å®šæ—¶é—´ä¹‹åçš„æ¶ˆæ¯

Response: {
  "success": true,
  "data": {
    "messages": [
      {
        "id": 1,
        "conversation_id": 1,
        "sender": {
          "id": 123,
          "name": "å‡¯æ–‡",
          "avatar": "avatar_url"
        },
        "content": "è¯·æŸ¥çœ‹æœ€æ–°çš„éœ€æ±‚æ–‡æ¡£",
        "message_type": "text",
        "message_status": "sent",
        "read_status": "read",
        "priority": "important",
        "attachments": [],
        "created_at": "2026-02-23T15:30:00Z",
        "updated_at": "2026-02-23T15:30:00Z"
      }
    ],
    "pagination": {
      "current_page": 1,
      "total_pages": 5,
      "total_count": 100
    }
  }
}

// å‘é€æ¶ˆæ¯
POST /api/conversations/:id/messages
Body: {
  "content": "æ¶ˆæ¯å†…å®¹",
  "message_type": "text",
  "priority": "normal",
  "attachments": [
    {
      "file_name": "éœ€æ±‚æ–‡æ¡£.pdf",
      "file_path": "/uploads/requirements.pdf",
      "file_size": 1024000,
      "file_type": "application/pdf"
    }
  ]
}

Response: {
  "success": true,
  "data": {
    "id": 101,
    "conversation_id": 1,
    "sender_id": 123,
    "content": "æ¶ˆæ¯å†…å®¹",
    "message_type": "text",
    "message_status": "sent",
    "read_status": "unread",
    "priority": "normal",
    "attachments": [],
    "created_at": "2026-02-23T15:30:00Z"
  }
}
```

#### 2.2 å¯¹è¯ç›¸å…³æ¥å£
```javascript
// è·å–å¯¹è¯åˆ—è¡¨
GET /api/conversations
Query Parameters:
- type: å¯¹è¯ç±»å‹ (direct, group, project)
- archived: æ˜¯å¦åŒ…å«å½’æ¡£å¯¹è¯ (true/false)
- page: é¡µç 
- limit: æ¯é¡µæ•°é‡

Response: {
  "success": true,
  "data": {
    "conversations": [
      {
        "id": 1,
        "name": "äº§å“å¼€å‘ç»„",
        "type": "group",
        "description": "äº§å“å¼€å‘ç›¸å…³è®¨è®º",
        "avatar_url": "avatar_url",
        "participants": [
          {
            "id": 123,
            "name": "å‡¯æ–‡",
            "avatar": "avatar_url",
            "role": "admin"
          }
        ],
        "last_message": {
          "id": 100,
          "content": "æœ€æ–°éœ€æ±‚å·²æ›´æ–°",
          "sender": "é©¬ä¸",
          "created_at": "2026-02-23T14:20:00Z"
        },
        "unread_count": 3,
        "created_at": "2026-02-20T10:00:00Z",
        "updated_at": "2026-02-23T14:20:00Z"
      }
    ],
    "pagination": {
      "current_page": 1,
      "total_pages": 3,
      "total_count": 25
    }
  }
}

// åˆ›å»ºå¯¹è¯
POST /api/conversations
Body: {
  "name": "æ–°é¡¹ç›®è®¨è®º",
  "type": "group",
  "description": "æ–°é¡¹ç›®ç›¸å…³è®¨è®º",
  "participant_ids": [123, 124, 125]
}

Response: {
  "success": true,
  "data": {
    "id": 10,
    "name": "æ–°é¡¹ç›®è®¨è®º",
    "type": "group",
    "description": "æ–°é¡¹ç›®ç›¸å…³è®¨è®º",
    "creator_id": 123,
    "participants": [
      {
        "id": 123,
        "name": "å‡¯æ–‡",
        "role": "owner"
      },
      {
        "id": 124,
        "name": "é©¬ä¸",
        "role": "member"
      }
    ],
    "created_at": "2026-02-23T15:30:00Z"
  }
}
```

### 3. å®æ—¶é€šä¿¡æŠ€æœ¯

#### 3.1 WebSocketå®ç°
```javascript
// WebSocketè¿æ¥ç®¡ç†
class MessageWebSocket {
  constructor(userId) {
    this.userId = userId;
    this.socket = null;
    this.reconnectAttempts = 0;
    this.maxReconnectAttempts = 5;
    this.reconnectInterval = 5000;
  }
  
  connect() {
    this.socket = new WebSocket(`ws://localhost:3000/ws?userId=${this.userId}`);
    
    this.socket.onopen = () => {
      console.log('WebSocketè¿æ¥å·²å»ºç«‹');
      this.reconnectAttempts = 0;
      this.sendHeartbeat();
    };
    
    this.socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      this.handleMessage(data);
    };
    
    this.socket.onclose = () => {
      console.log('WebSocketè¿æ¥å·²å…³é—­');
      this.reconnect();
    };
    
    this.socket.onerror = (error) => {
      console.error('WebSocketé”™è¯¯:', error);
    };
  }
  
  reconnect() {
    if (this.reconnectAttempts < this.maxReconnectAttempts) {
      this.reconnectAttempts++;
      setTimeout(() => {
        console.log(`å°è¯•é‡æ–°è¿æ¥ (${this.reconnectAttempts}/${this.maxReconnectAttempts})`);
        this.connect();
      }, this.reconnectInterval);
    }
  }
  
  sendHeartbeat() {
    setInterval(() => {
      if (this.socket.readyState === WebSocket.OPEN) {
        this.socket.send(JSON.stringify({ type: 'heartbeat' }));
      }
    }, 30000);
  }
  
  handleMessage(data) {
    switch (data.type) {
      case 'new_message':
        this.handleNewMessage(data.payload);
        break;
      case 'message_read':
        this.handleMessageRead(data.payload);
        break;
      case 'typing':
        this.handleTyping(data.payload);
        break;
      default:
        console.log('æœªçŸ¥æ¶ˆæ¯ç±»å‹:', data.type);
    }
  }
  
  handleNewMessage(message) {
    // æ›´æ–°UIæ˜¾ç¤ºæ–°æ¶ˆæ¯
    updateConversationList(message.conversation_id);
    if (isCurrentConversation(message.conversation_id)) {
      appendMessageToChat(message);
      markMessageAsRead(message.id);
    } else {
      incrementUnreadCount(message.conversation_id);
      showNotification(message);
    }
  }
  
  sendMessage(conversationId, content, type = 'text') {
    const message = {
      type: 'send_message',
      payload: {
        conversation_id: conversationId,
        content: content,
        message_type: type
      }
    };
    this.socket.send(JSON.stringify(message));
  }
}
```

#### 3.2 æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†
```javascript
// æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†
class MessageQueue {
  constructor() {
    this.queue = [];
    this.processing = false;
  }
  
  async add(message) {
    this.queue.push(message);
    if (!this.processing) {
      this.process();
    }
  }
  
  async process() {
    this.processing = true;
    
    while (this.queue.length > 0) {
      const message = this.queue.shift();
      try {
        await this.processMessage(message);
      } catch (error) {
        console.error('æ¶ˆæ¯å¤„ç†å¤±è´¥:', error);
        // é‡è¯•æœºåˆ¶
        if (message.retryCount < 3) {
          message.retryCount = (message.retryCount || 0) + 1;
          this.queue.unshift(message);
        }
      }
    }
    
    this.processing = false;
  }
  
  async processMessage(message) {
    switch (message.type) {
      case 'new_message':
        await this.handleNewMessage(message.payload);
        break;
      case 'message_read':
        await this.handleMessageRead(message.payload);
        break;
      case 'typing':
        await this.handleTyping(message.payload);
        break;
    }
  }
  
  async handleNewMessage(payload) {
    // ä¿å­˜æ¶ˆæ¯åˆ°æ•°æ®åº“
    const message = await saveMessageToDatabase(payload);
    
    // é€šçŸ¥ç›¸å…³ç”¨æˆ·
    const participants = await getConversationParticipants(payload.conversation_id);
    participants.forEach(participant => {
      if (participant.id !== payload.sender_id) {
        notifyUser(participant.id, {
          type: 'new_message',
          payload: message
        });
      }
    });
    
    // æ›´æ–°å¯¹è¯æœ€åæ¶ˆæ¯
    await updateConversationLastMessage(payload.conversation_id, message.id);
  }
}
```

---

## ğŸ“± ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. ç•Œé¢å¸ƒå±€è®¾è®¡

#### 1.1 æ¡Œé¢ç«¯å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡¶éƒ¨å¯¼èˆªæ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯¹è¯åˆ—è¡¨ â”‚                  æ¶ˆæ¯åŒºåŸŸ                          â”‚
â”‚          â”‚                                                  â”‚
â”‚ - äº§å“ç»„  â”‚  å¯¹è¯åç§°: äº§å“å¼€å‘ç»„                              â”‚
â”‚ - æŠ€æœ¯ç»„  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ - æµ‹è¯•ç»„  â”‚                                                  â”‚
â”‚          â”‚  å‘é€è€…: å‡¯æ–‡    æ—¶é—´: 15:30                        â”‚
â”‚          â”‚  è¯·æŸ¥çœ‹æœ€æ–°çš„éœ€æ±‚æ–‡æ¡£                               â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”‚  å‘é€è€…: é©¬ä¸    æ—¶é—´: 15:25                        â”‚
â”‚          â”‚  å·²å®ŒæˆAIæ¨¡å‹è®­ç»ƒ                                   â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚          â”‚                                                  â”‚
â”‚          â”‚  [è¾“å…¥æ¶ˆæ¯...]                                      â”‚
â”‚          â”‚  [å‘é€] [è¡¨æƒ…] [æ–‡ä»¶]                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 1.2 ç§»åŠ¨ç«¯å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é¡¶éƒ¨å¯¼èˆªæ                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¯¹è¯åç§°: äº§å“å¼€å‘ç»„                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚ å‘é€è€…: å‡¯æ–‡    æ—¶é—´: 15:30                                  â”‚
â”‚ è¯·æŸ¥çœ‹æœ€æ–°çš„éœ€æ±‚æ–‡æ¡£                                           â”‚
â”‚                                                          â”‚
â”‚ å‘é€è€…: é©¬ä¸    æ—¶é—´: 15:25                                  â”‚
â”‚ å·²å®ŒæˆAIæ¨¡å‹è®­ç»ƒ                                              â”‚
â”‚                                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¾“å…¥æ¶ˆæ¯...] [è¡¨æƒ…] [æ–‡ä»¶] [å‘é€]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. äº¤äº’æµç¨‹è®¾è®¡

#### 2.1 å‘é€æ¶ˆæ¯æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·è¾“å…¥æ¶ˆæ¯] --> B[ç‚¹å‡»å‘é€æŒ‰é’®]
    B --> C[å®¢æˆ·ç«¯éªŒè¯]
    C --> D{éªŒè¯é€šè¿‡?}
    D -->|æ˜¯| E[æ˜¾ç¤ºå‘é€ä¸­çŠ¶æ€]
    D -->|å¦| F[æ˜¾ç¤ºé”™è¯¯æç¤º]
    E --> G[å‘é€åˆ°æœåŠ¡å™¨]
    G --> H{å‘é€æˆåŠŸ?}
    H -->|æ˜¯| I[æ›´æ–°UIæ˜¾ç¤ºå·²å‘é€]
    H -->|å¦| J[æ˜¾ç¤ºå‘é€å¤±è´¥]
    J --> K[æä¾›é‡è¯•é€‰é¡¹]
    K --> G
```

#### 2.2 æ¶ˆæ¯é˜…è¯»æµç¨‹
```mermaid
graph TD
    A[ç”¨æˆ·æ‰“å¼€å¯¹è¯] --> B[åŠ è½½æ¶ˆæ¯å†å²]
    B --> C[æ ‡è®°æ¶ˆæ¯ä¸ºå·²è¯»]
    C --> D[é€šçŸ¥å‘é€è€…]
    D --> E[æ›´æ–°é˜…è¯»çŠ¶æ€]
    E --> F[æ›´æ–°æœªè¯»è®¡æ•°]
    F --> G[å®æ—¶åŒæ­¥åˆ°å…¶ä»–è®¾å¤‡]
```

### 3. ç»„ä»¶è®¾è®¡

#### 3.1 æ¶ˆæ¯ç»„ä»¶
```jsx
const MessageItem = ({ message, isOwn, onReply, onDelete, onReact }) => {
  const [showActions, setShowActions] = useState(false);
  const [showReactions, setShowReactions] = useState(false);
  
  return (
    <div className={`message-item ${isOwn ? 'own' : 'other'}`}>
      <div className="message-avatar">
        <img src={message.sender.avatar} alt={message.sender.name} />
      </div>
      
      <div className="message-content">
        <div className="message-header">
          <span className="sender-name">{message.sender.name}</span>
          <span className="message-time">
            {formatTime(message.created_at)}
          </span>
        </div>
        
        <div className="message-body">
          {message.message_type === 'text' && (
            <p>{message.content}</p>
          )}
          
          {message.message_type === 'file' && (
            <FileAttachment file={message.attachments[0]} />
          )}
          
          {message.message_type === 'code' && (
            <CodeBlock code={message.content} language={message.language} />
          )}
        </div>
        
        {message.reactions && message.reactions.length > 0 && (
          <div className="message-reactions">
            {message.reactions.map((reaction, index) => (
              <span key={index} className="reaction">
                {reaction.emoji} {reaction.count}
              </span>
            ))}
          </div>
        )}
      </div>
      
      <div className="message-actions">
        <button onClick={() => setShowActions(!showActions)}>
          ...
        </button>
        
        {showActions && (
          <div className="action-menu">
            <button onClick={() => onReply(message.id)}>å›å¤</button>
            <button onClick={() => onDelete(message.id)}>åˆ é™¤</button>
            <button onClick={() => setShowReactions(true)}>
              æ·»åŠ è¡¨æƒ…
            </button>
          </div>
        )}
      </div>
      
      {showReactions && (
        <ReactionPicker
          onSelect={(emoji) => onReact(message.id, emoji)}
          onClose={() => setShowReactions(false)}
        />
      )}
    </div>
  );
};
```

#### 3.2 æ¶ˆæ¯è¾“å…¥ç»„ä»¶
```jsx
const MessageInput = ({ conversationId, onSendMessage }) => {
  const [content, setContent] = useState('');
  const [attachments, setAttachments] = useState([]);
  const [isUploading, setIsUploading] = useState(false);
  const [showEmojiPicker, setShowEmojiPicker] = useState(false);
  
  const handleSend = () => {
    if (content.trim() || attachments.length > 0) {
      onSendMessage({
        conversation_id: conversationId,
        content: content.trim(),
        attachments: attachments
      });
      setContent('');
      setAttachments([]);
    }
  };
  
  const handleFileUpload = async (files) => {
    setIsUploading(true);
    try {
      const uploadedFiles = await Promise.all(
        Array.from(files).map(file => uploadFile(file))
      );
      setAttachments([...attachments, ...uploadedFiles]);
    } catch (error) {
      console.error('æ–‡ä»¶ä¸Šä¼ å¤±è´¥:', error);
    } finally {
      setIsUploading(false);
    }
  };
  
  return (
    <div className="message-input">
      {attachments.length > 0 && (
        <div className="attachments-preview">
          {attachments.map((file, index) => (
            <div key={index} className="attachment-item">
              <span className="file-name">{file.name}</span>
              <button 
                onClick={() => removeAttachment(index)}
                className="remove-attachment"
              >
                Ã—
              </button>
            </div>
          ))}
        </div>
      )}
      
      <div className="input-container">
        <textarea
          value={content}
          onChange={(e) => setContent(e.target.value)}
          placeholder="è¾“å…¥æ¶ˆæ¯..."
          onKeyDown={(e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
              e.preventDefault();
              handleSend();
            }
          }}
        />
        
        <div className="input-actions">
          <button
            onClick={() => setShowEmojiPicker(!showEmojiPicker)}
            className="emoji-button"
          >
            ğŸ˜Š
          </button>
          
          <label className="file-button">
            ğŸ“
            <input
              type="file"
              multiple
              onChange={(e) => handleFileUpload(e.target.files)}
              style={{ display: 'none' }}
            />
          </label>
          
          <button
            onClick={handleSend}
            disabled={!content.trim() && attachments.length === 0}
            className="send-button"
          >
            å‘é€
          </button>
        </div>
      </div>
      
      {showEmojiPicker && (
        <EmojiPicker
          onSelect={(emoji) => {
            setContent(content + emoji);
            setShowEmojiPicker(false);
          }}
          onClose={() => setShowEmojiPicker(false)}
        />
      )}
    </div>
  );
};
```

---

## ğŸš€ å®æ–½è®¡åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šåç«¯åŸºç¡€æ¶æ„ï¼ˆ5å¤©ï¼‰
- [x] æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡
- [x] åŸºç¡€APIæ¥å£å¼€å‘
- [x] WebSocketå®æ—¶é€šä¿¡
- [x] æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ

### ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯åŸºç¡€ç»„ä»¶ï¼ˆ5å¤©ï¼‰
- [x] æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶
- [x] æ¶ˆæ¯è¾“å…¥ç»„ä»¶
- [x] å¯¹è¯ç®¡ç†ç»„ä»¶
- [x] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶

### ç¬¬ä¸‰é˜¶æ®µï¼šæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ˆ8å¤©ï¼‰
- [x] æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- [x] å¯¹è¯åˆ›å»ºå’Œç®¡ç†
- [x] æ¶ˆæ¯æœç´¢å’Œè¿‡æ»¤
- [x] å®æ—¶é€šçŸ¥ç³»ç»Ÿ

### ç¬¬å››é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½å¼€å‘ï¼ˆ7å¤©ï¼‰
- [x] æ¶ˆæ¯æ ¼å¼åŒ–å’Œå¯Œæ–‡æœ¬
- [x] æ–‡ä»¶åˆ†äº«å’Œé¢„è§ˆ
- [x] æ¶ˆæ¯çŠ¶æ€å’Œé˜…è¯»ç¡®è®¤
- [x] æ¶ˆæ¯è¡¨æƒ…å’Œå›å¤

### ç¬¬äº”é˜¶æ®µï¼šé›†æˆå’Œä¼˜åŒ–ï¼ˆ5å¤©ï¼‰
- [x] ä»»åŠ¡ç³»ç»Ÿé›†æˆ
- [x] æ–‡æ¡£ç³»ç»Ÿé›†æˆ
- [x] æ€§èƒ½ä¼˜åŒ–
- [x] ç§»åŠ¨ç«¯é€‚é…

### ç¬¬å…­é˜¶æ®µï¼šæµ‹è¯•å’Œéƒ¨ç½²ï¼ˆ3å¤©ï¼‰
- [x] å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- [x] ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [x] ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [x] ç”¨æˆ·åŸ¹è®­å’Œæ–‡æ¡£

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### 1. åŠŸèƒ½æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|----------|----------|----------|
| æ¶ˆæ¯å‘é€æˆåŠŸç‡ | >99% | (æˆåŠŸå‘é€æ¶ˆæ¯æ•°/æ€»å‘é€æ¶ˆæ¯æ•°) Ã— 100% |
| æ¶ˆæ¯æ¥æ”¶å»¶è¿Ÿ | <500ms | æ¶ˆæ¯å‘é€åˆ°æ¥æ”¶çš„æ—¶é—´å·® |
| å®æ—¶é€šçŸ¥å‡†ç¡®ç‡ | >99% | (æ­£ç¡®é€šçŸ¥æ•°/æ€»é€šçŸ¥æ•°) Ã— 100% |
| æ–‡ä»¶ä¸Šä¼ æˆåŠŸç‡ | >95% | (æˆåŠŸä¸Šä¼ æ–‡ä»¶æ•°/æ€»ä¸Šä¼ æ–‡ä»¶æ•°) Ã— 100% |

### 2. ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|----------|----------|----------|
| æ¶ˆæ¯æ‰“å¼€ç‡ | >80% | (æ‰“å¼€æ¶ˆæ¯æ•°/æ€»æ¥æ”¶æ¶ˆæ¯æ•°) Ã— 100% |
| å¹³å‡å“åº”æ—¶é—´ | <5åˆ†é’Ÿ | ç”¨æˆ·æ”¶åˆ°æ¶ˆæ¯åçš„å¹³å‡å›å¤æ—¶é—´ |
| ç”¨æˆ·æ»¡æ„åº¦ | >4.0/5.0 | ç”¨æˆ·è°ƒç ”è¯„åˆ† |
| åŠŸèƒ½ä½¿ç”¨ç‡ | >70% | ä½¿ç”¨ç«™å†…ä¿¡åŠŸèƒ½çš„ç”¨æˆ·æ¯”ä¾‹ |

### 3. ä¸šåŠ¡æŒ‡æ ‡
| æŒ‡æ ‡ | ç›®æ ‡å€¼ | æµ‹é‡æ–¹å¼ |
|------|----------|----------|----------|
| å¤–éƒ¨å·¥å…·ä½¿ç”¨å‡å°‘ | å‡å°‘30% | ä½¿ç”¨å¤–éƒ¨æ²Ÿé€šå·¥å…·çš„é¢‘ç‡é™ä½ |
| å†…éƒ¨æ²Ÿé€šæ•ˆç‡æå‡ | æå‡25% | å†…éƒ¨ä»»åŠ¡å®Œæˆæ—¶é—´ç¼©çŸ­ |
| é—®é¢˜è§£å†³é€Ÿåº¦ | æå‡20% | é—®é¢˜ä»æå‡ºåˆ°è§£å†³çš„æ—¶é—´ç¼©çŸ­ |
| å›¢é˜Ÿåä½œæ»¡æ„åº¦ | >4.0/5.0 | å›¢é˜Ÿåä½œæ»¡æ„åº¦è°ƒç ” |

---

## âš ï¸ é£é™©ä¸çº¦æŸ

### 1. æŠ€æœ¯é£é™©
- **å®æ—¶é€šä¿¡ç¨³å®šæ€§**ï¼šWebSocketè¿æ¥å¯èƒ½ä¸ç¨³å®š
- **æ¶ˆæ¯åŒæ­¥é—®é¢˜**ï¼šå¤šè®¾å¤‡é—´æ¶ˆæ¯åŒæ­¥å¯èƒ½å‡ºç°å»¶è¿Ÿ
- **æ–‡ä»¶å­˜å‚¨å®‰å…¨**ï¼šæ–‡ä»¶ä¸Šä¼ å’Œå­˜å‚¨éœ€è¦å®‰å…¨æœºåˆ¶
- **æ€§èƒ½ç“¶é¢ˆ**ï¼šå¤§é‡æ¶ˆæ¯å¯èƒ½å½±å“ç³»ç»Ÿæ€§èƒ½

### 2. ä¸šåŠ¡çº¦æŸ
- **ç”¨æˆ·ä¹ æƒ¯æ”¹å˜**ï¼šç”¨æˆ·å¯èƒ½ä¹ æƒ¯ä½¿ç”¨ç°æœ‰æ²Ÿé€šå·¥å…·
- **åŠŸèƒ½å¤æ‚åº¦**ï¼šåŠŸèƒ½è¿‡å¤šå¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ
- **æ•°æ®è¿ç§»**ï¼šç°æœ‰æ²Ÿé€šæ•°æ®è¿ç§»å¯èƒ½å¤æ‚
- **åŸ¹è®­æˆæœ¬**ï¼šç”¨æˆ·éœ€è¦æ—¶é—´é€‚åº”æ–°å·¥å…·

### 3. åˆè§„è¦æ±‚
- **æ•°æ®éšç§**ï¼šæ¶ˆæ¯å†…å®¹éœ€è¦åŠ å¯†å­˜å‚¨
- **è®¿é—®æ§åˆ¶**ï¼šæ•æ„Ÿæ¶ˆæ¯éœ€è¦æƒé™æ§åˆ¶
- **å®¡è®¡æ—¥å¿—**ï¼šé‡è¦æ“ä½œéœ€è¦å®¡è®¡è®°å½•
- **æ•°æ®ä¿ç•™**ï¼šæ¶ˆæ¯ä¿ç•™æœŸé™éœ€è¦ç¬¦åˆæ³•è§„

---

## ğŸ“ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [x] æ¶ˆæ¯å‘é€å’Œæ¥æ”¶åŠŸèƒ½æ­£å¸¸
- [x] å®æ—¶é€šçŸ¥ç³»ç»Ÿå·¥ä½œæ­£å¸¸
- [x] æ–‡ä»¶ä¸Šä¼ å’Œåˆ†äº«åŠŸèƒ½æ­£å¸¸
- [x] æ¶ˆæ¯æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½éªŒæ”¶
- [x] æ¶ˆæ¯å‘é€æˆåŠŸç‡ >99%
- [x] æ¶ˆæ¯æ¥æ”¶å»¶è¿Ÿ <500ms
- [x] æ–‡ä»¶ä¸Šä¼ æˆåŠŸç‡ >95%
- [x] ç³»ç»Ÿå“åº”æ—¶é—´ <2ç§’

### ç”¨æˆ·ä½“éªŒéªŒæ”¶
- [x] ç•Œé¢è®¾è®¡ç¬¦åˆè§„èŒƒ
- [x] äº¤äº’æµç¨‹ç¬¦åˆç”¨æˆ·ä¹ æƒ¯
- [x] æ–°ç”¨æˆ·æ— éœ€åŸ¹è®­å³å¯ä½¿ç”¨
- [x] ç”¨æˆ·æ»¡æ„åº¦ >4.0/5.0

---

*æœ¬PRDæ¶µç›–ç«™å†…ä¿¡ç³»ç»Ÿçš„å®Œæ•´åŠŸèƒ½è®¾è®¡ï¼ŒåŒ…æ‹¬æ¶ˆæ¯ç®¡ç†ã€å¯¹è¯ç®¡ç†ã€é›†æˆåŠŸèƒ½å’Œå®æ–½è®¡åˆ’ã€‚*